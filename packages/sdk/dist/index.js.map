{"version":3,"sources":["../src/utils/errors.ts","../src/providers/base.ts","../src/chat/index.ts","../src/utils/http.ts","../src/utils/validation.ts","../src/providers/openai.ts","../src/providers/claude.ts","../src/providers/google.ts","../src/providers/index.ts","../src/index.ts","../src/orchestration/index.ts","../src/types/index.ts"],"names":["BaseSDKError","SDKRateLimitError","SDKAuthenticationError","SDKValidationError","ErrorFactory","RetryHandler","CircuitBreaker","BaseProvider","providerRegistry","Chat","chat","data","openai","providers"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Error Handling and Retry Mechanisms\n * \n * Implements exponential backoff, circuit breaker patterns, and provider-specific error handling\n */\n\nimport type { \n  SDKError, \n  RateLimitError, \n  AuthenticationError, \n  ValidationError, \n  ApiProvider,\n  RequestMetrics \n} from '../types';\n\n/**\n * Custom SDK Error Classes\n */\nexport class BaseSDKError extends Error implements SDKError {\n  public readonly code: string;\n  public readonly statusCode?: number;\n  public readonly provider?: ApiProvider;\n  public readonly requestId?: string;\n  public readonly details?: Record<string, any>;\n\n  constructor(\n    message: string,\n    code: string,\n    options?: {\n      statusCode?: number;\n      provider?: ApiProvider;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, { cause: options?.cause });\n    this.name = this.constructor.name;\n    this.code = code;\n    this.statusCode = options?.statusCode;\n    this.provider = options?.provider;\n    this.requestId = options?.requestId;\n    this.details = options?.details;\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class SDKRateLimitError extends BaseSDKError implements RateLimitError {\n  public readonly code = 'RATE_LIMIT_EXCEEDED';\n  public readonly retryAfter?: number;\n  public readonly limitType: 'requests' | 'tokens' | 'cost';\n\n  constructor(\n    message: string,\n    limitType: 'requests' | 'tokens' | 'cost',\n    options?: {\n      retryAfter?: number;\n      statusCode?: number;\n      provider?: ApiProvider;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, 'RATE_LIMIT_EXCEEDED', options);\n    this.limitType = limitType;\n    this.retryAfter = options?.retryAfter;\n  }\n}\n\nexport class SDKAuthenticationError extends BaseSDKError implements AuthenticationError {\n  public readonly code = 'AUTHENTICATION_FAILED';\n  public readonly provider: ApiProvider;\n\n  constructor(\n    message: string,\n    provider: ApiProvider,\n    options?: {\n      statusCode?: number;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, 'AUTHENTICATION_FAILED', { ...options, provider });\n    this.provider = provider;\n  }\n}\n\nexport class SDKValidationError extends BaseSDKError implements ValidationError {\n  public readonly code = 'VALIDATION_ERROR';\n  public readonly field: string;\n  public readonly value: any;\n\n  constructor(\n    message: string,\n    field: string,\n    value: any,\n    options?: {\n      statusCode?: number;\n      provider?: ApiProvider;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, 'VALIDATION_ERROR', options);\n    this.field = field;\n    this.value = value;\n  }\n}\n\n/**\n * Error Factory - Creates appropriate error types from provider responses\n */\nexport class ErrorFactory {\n  static fromProviderError(\n    error: any,\n    provider: ApiProvider,\n    requestId?: string\n  ): SDKError {\n    // OpenAI error handling\n    if (provider === 'openai') {\n      return this.fromOpenAIError(error, requestId);\n    }\n\n    // Claude error handling\n    if (provider === 'claude') {\n      return this.fromClaudeError(error, requestId);\n    }\n\n    // Generic error handling\n    return this.fromGenericError(error, provider, requestId);\n  }\n\n  private static fromOpenAIError(error: any, requestId?: string): SDKError {\n    const statusCode = error.status || error.statusCode || 500;\n    const message = error.message || error.error?.message || 'OpenAI API error';\n\n    // Rate limiting\n    if (statusCode === 429) {\n      const retryAfter = error.headers?.['retry-after'] \n        ? parseInt(error.headers['retry-after'], 10) \n        : undefined;\n      \n      return new SDKRateLimitError(\n        message,\n        'requests',\n        {\n          retryAfter,\n          statusCode,\n          provider: 'openai',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Authentication errors\n    if (statusCode === 401) {\n      return new SDKAuthenticationError(\n        message,\n        'openai',\n        {\n          statusCode,\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Validation errors\n    if (statusCode === 400) {\n      return new SDKValidationError(\n        message,\n        error.error?.param || 'unknown',\n        error.error?.code || 'unknown',\n        {\n          statusCode,\n          provider: 'openai',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Generic OpenAI error\n    return new BaseSDKError(\n      message,\n      'OPENAI_API_ERROR',\n      {\n        statusCode,\n        provider: 'openai',\n        requestId,\n        details: { originalError: error },\n        cause: error\n      }\n    );\n  }\n\n  private static fromClaudeError(error: any, requestId?: string): SDKError {\n    const statusCode = error.status || error.statusCode || 500;\n    const message = error.message || error.error?.message || 'Claude API error';\n\n    // Rate limiting\n    if (statusCode === 429) {\n      const retryAfter = error.headers?.['retry-after'] \n        ? parseInt(error.headers['retry-after'], 10) \n        : undefined;\n      \n      return new SDKRateLimitError(\n        message,\n        'requests',\n        {\n          retryAfter,\n          statusCode,\n          provider: 'claude',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Authentication errors\n    if (statusCode === 401) {\n      return new SDKAuthenticationError(\n        message,\n        'claude',\n        {\n          statusCode,\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Validation errors\n    if (statusCode === 400) {\n      return new SDKValidationError(\n        message,\n        error.error?.param || 'unknown',\n        error.error?.code || 'unknown',\n        {\n          statusCode,\n          provider: 'claude',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Generic Claude error\n    return new BaseSDKError(\n      message,\n      'CLAUDE_API_ERROR',\n      {\n        statusCode,\n        provider: 'claude',\n        requestId,\n        details: { originalError: error },\n        cause: error\n      }\n    );\n  }\n\n  private static fromGenericError(\n    error: any,\n    provider: ApiProvider,\n    requestId?: string\n  ): SDKError {\n    const statusCode = error.status || error.statusCode || 500;\n    const message = error.message || `${provider} API error`;\n\n    return new BaseSDKError(\n      message,\n      'API_ERROR',\n      {\n        statusCode,\n        provider,\n        requestId,\n        details: { originalError: error },\n        cause: error\n      }\n    );\n  }\n}\n\n/**\n * Retry Configuration and Logic\n */\nexport interface RetryConfig {\n  maxRetries: number;\n  baseDelay: number;\n  maxDelay: number;\n  backoffMultiplier: number;\n  jitter: boolean;\n  retryableErrors: string[];\n}\n\nexport const DEFAULT_RETRY_CONFIG: RetryConfig = {\n  maxRetries: 3,\n  baseDelay: 1000, // 1 second\n  maxDelay: 30000, // 30 seconds\n  backoffMultiplier: 2,\n  jitter: true,\n  retryableErrors: [\n    'RATE_LIMIT_EXCEEDED',\n    'NETWORK_ERROR',\n    'TIMEOUT',\n    'SERVER_ERROR',\n    'TEMPORARY_FAILURE'\n  ]\n};\n\nexport class RetryHandler {\n  private config: RetryConfig;\n\n  constructor(config: Partial<RetryConfig> = {}) {\n    this.config = { ...DEFAULT_RETRY_CONFIG, ...config };\n  }\n\n  /**\n   * Execute a function with retry logic\n   */\n  async execute<T>(\n    fn: () => Promise<T>,\n    context?: {\n      provider?: ApiProvider;\n      requestId?: string;\n      operation?: string;\n    }\n  ): Promise<T> {\n    let lastError: SDKError | null = null;\n    let attempt = 0;\n\n    while (attempt <= this.config.maxRetries) {\n      try {\n        return await fn();\n      } catch (error) {\n        lastError = error instanceof BaseSDKError \n          ? error \n          : this.convertToSDKError(error, context?.provider);\n\n        // Don't retry on last attempt\n        if (attempt === this.config.maxRetries) {\n          break;\n        }\n\n        // Check if error is retryable\n        if (!this.isRetryableError(lastError)) {\n          break;\n        }\n\n        // Calculate delay for next attempt\n        const delay = this.calculateDelay(attempt, lastError);\n        \n        console.warn(`Attempt ${attempt + 1} failed, retrying in ${delay}ms`, {\n          error: lastError.code,\n          provider: context?.provider,\n          requestId: context?.requestId,\n          operation: context?.operation\n        });\n\n        await this.sleep(delay);\n        attempt++;\n      }\n    }\n\n    // All attempts failed, throw the last error\n    throw lastError;\n  }\n\n  /**\n   * Check if an error should trigger a retry\n   */\n  private isRetryableError(error: SDKError): boolean {\n    // Don't retry authentication or validation errors\n    if (error.code === 'AUTHENTICATION_FAILED' || error.code === 'VALIDATION_ERROR') {\n      return false;\n    }\n\n    // Retry rate limit errors\n    if (error.code === 'RATE_LIMIT_EXCEEDED') {\n      return true;\n    }\n\n    // Retry server errors (5xx)\n    if (error.statusCode && error.statusCode >= 500) {\n      return true;\n    }\n\n    // Retry network/timeout errors\n    if (this.config.retryableErrors.includes(error.code)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Calculate exponential backoff delay with jitter\n   */\n  private calculateDelay(attempt: number, error: SDKError): number {\n    // Use retry-after header if available (rate limit errors)\n    if (error instanceof SDKRateLimitError && error.retryAfter) {\n      return error.retryAfter * 1000; // Convert seconds to milliseconds\n    }\n\n    // Exponential backoff\n    let delay = this.config.baseDelay * Math.pow(this.config.backoffMultiplier, attempt);\n    \n    // Cap at max delay\n    delay = Math.min(delay, this.config.maxDelay);\n\n    // Add jitter to avoid thundering herd\n    if (this.config.jitter) {\n      delay = delay * (0.5 + Math.random() * 0.5);\n    }\n\n    return Math.floor(delay);\n  }\n\n  /**\n   * Convert generic error to SDK error\n   */\n  private convertToSDKError(error: any, provider?: ApiProvider): SDKError {\n    if (error instanceof BaseSDKError) {\n      return error;\n    }\n\n    // Network/timeout errors\n    if (error.code === 'ECONNRESET' || error.code === 'ENOTFOUND' || error.code === 'ETIMEDOUT') {\n      return new BaseSDKError(\n        `Network error: ${error.message}`,\n        'NETWORK_ERROR',\n        { provider, cause: error }\n      );\n    }\n\n    // Generic error\n    return new BaseSDKError(\n      error.message || 'Unknown error',\n      'UNKNOWN_ERROR',\n      { provider, cause: error }\n    );\n  }\n\n  /**\n   * Sleep utility\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n\n/**\n * Circuit Breaker Pattern Implementation\n */\nexport interface CircuitBreakerConfig {\n  failureThreshold: number;\n  recoveryTimeout: number;\n  monitoringPeriod: number;\n}\n\nexport enum CircuitState {\n  CLOSED = 'closed',\n  OPEN = 'open',\n  HALF_OPEN = 'half_open'\n}\n\nexport class CircuitBreaker {\n  private state: CircuitState = CircuitState.CLOSED;\n  private failures: number = 0;\n  private lastFailureTime: number = 0;\n  private nextAttempt: number = 0;\n  private config: CircuitBreakerConfig;\n\n  constructor(config: Partial<CircuitBreakerConfig> = {}) {\n    this.config = {\n      failureThreshold: 5,\n      recoveryTimeout: 60000, // 1 minute\n      monitoringPeriod: 60000, // 1 minute\n      ...config\n    };\n  }\n\n  /**\n   * Execute function through circuit breaker\n   */\n  async execute<T>(fn: () => Promise<T>): Promise<T> {\n    if (this.state === CircuitState.OPEN) {\n      if (Date.now() < this.nextAttempt) {\n        throw new BaseSDKError(\n          'Circuit breaker is OPEN - too many recent failures',\n          'CIRCUIT_BREAKER_OPEN'\n        );\n      } else {\n        this.state = CircuitState.HALF_OPEN;\n      }\n    }\n\n    try {\n      const result = await fn();\n      this.onSuccess();\n      return result;\n    } catch (error) {\n      this.onFailure();\n      throw error;\n    }\n  }\n\n  private onSuccess(): void {\n    this.failures = 0;\n    this.state = CircuitState.CLOSED;\n  }\n\n  private onFailure(): void {\n    this.failures++;\n    this.lastFailureTime = Date.now();\n\n    if (this.failures >= this.config.failureThreshold) {\n      this.state = CircuitState.OPEN;\n      this.nextAttempt = Date.now() + this.config.recoveryTimeout;\n    }\n  }\n\n  /**\n   * Get current circuit breaker status\n   */\n  getStatus(): {\n    state: CircuitState;\n    failures: number;\n    lastFailureTime: number;\n    nextAttempt: number;\n  } {\n    return {\n      state: this.state,\n      failures: this.failures,\n      lastFailureTime: this.lastFailureTime,\n      nextAttempt: this.nextAttempt\n    };\n  }\n}\n\n/**\n * Request timeout wrapper\n */\nexport function withTimeout<T>(\n  promise: Promise<T>,\n  timeoutMs: number,\n  context?: { operation?: string; provider?: ApiProvider }\n): Promise<T> {\n  return Promise.race([\n    promise,\n    new Promise<never>((_, reject) => {\n      setTimeout(() => {\n        reject(new BaseSDKError(\n          `Operation timed out after ${timeoutMs}ms`,\n          'TIMEOUT',\n          {\n            provider: context?.provider,\n            details: { timeoutMs, operation: context?.operation }\n          }\n        ));\n      }, timeoutMs);\n    })\n  ]);\n}\n\n/**\n * Utility function to sanitize errors for logging\n */\nexport function sanitizeErrorForLogging(error: any): Record<string, any> {\n  const sanitized: Record<string, any> = {\n    name: error.name || 'Error',\n    message: error.message || 'Unknown error',\n    code: error.code,\n    statusCode: error.statusCode,\n    provider: error.provider,\n    requestId: error.requestId\n  };\n\n  // Remove sensitive information\n  if (error.details) {\n    sanitized.details = { ...error.details };\n    \n    // Remove API keys\n    if (sanitized.details.apiKey) {\n      sanitized.details.apiKey = '[REDACTED]';\n    }\n    \n    // Remove authorization headers\n    if (sanitized.details.headers?.authorization) {\n      sanitized.details.headers.authorization = '[REDACTED]';\n    }\n  }\n\n  return sanitized;\n}","/**\n * Base Provider Interface and Abstract Implementation\n * \n * Defines the unified interface that all AI providers must implement\n */\n\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ImageGenerationRequest,\n  ImageGenerationResponse,\n  ProviderConfig,\n  ProviderCapabilities,\n  SDKError,\n  RequestMetrics,\n  Usage\n} from '../types';\n\nimport { RetryHandler, CircuitBreaker, withTimeout } from '../utils/errors';\n\nexport interface BaseProviderOptions {\n  apiKey?: string;\n  baseURL?: string;\n  timeout?: number;\n  maxRetries?: number;\n  retryDelay?: number;\n  userAgent?: string;\n  debug?: boolean;\n}\n\n/**\n * Abstract base class for all AI providers\n */\nexport abstract class BaseProvider {\n  protected readonly provider: ApiProvider;\n  protected readonly config: ProviderConfig;\n  protected readonly retryHandler: RetryHandler;\n  protected readonly circuitBreaker: CircuitBreaker;\n\n  constructor(provider: ApiProvider, config: ProviderConfig) {\n    this.provider = provider;\n    this.config = config;\n    this.retryHandler = new RetryHandler({\n      maxRetries: config.maxRetries || 3,\n      baseDelay: config.retryDelay || 1000\n    });\n    this.circuitBreaker = new CircuitBreaker();\n  }\n\n  /**\n   * Provider capabilities - must be implemented by each provider\n   */\n  abstract getCapabilities(): ProviderCapabilities;\n\n  /**\n   * Chat completion - core method all providers must implement\n   */\n  abstract chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse>;\n\n  /**\n   * Streaming chat completion - optional, defaults to error\n   */\n  abstract streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown>;\n\n  /**\n   * Image generation - optional, defaults to error if not supported\n   */\n  generateImages(request: ImageGenerationRequest): Promise<ImageGenerationResponse> {\n    throw new Error(`Image generation not supported by ${this.provider} provider`);\n  }\n\n  /**\n   * Provider-specific model validation\n   */\n  abstract validateModel(model: string): boolean;\n\n  /**\n   * Get available models for this provider\n   */\n  abstract getAvailableModels(): string[];\n\n  /**\n   * Estimate cost for a request\n   */\n  abstract estimateCost(request: ChatCompletionRequest): number;\n\n  /**\n   * Transform provider-specific response to unified format\n   */\n  protected abstract transformResponse(\n    response: any,\n    request: ChatCompletionRequest,\n    metrics: Partial<RequestMetrics>\n  ): ChatCompletionResponse;\n\n  /**\n   * Transform provider-specific streaming response to unified format\n   */\n  protected abstract transformStreamChunk(\n    chunk: any,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null;\n\n  /**\n   * Execute request with retry logic and circuit breaker\n   */\n  protected async executeWithRetry<T>(\n    fn: () => Promise<T>,\n    context?: {\n      requestId?: string;\n      operation?: string;\n    }\n  ): Promise<T> {\n    const requestId = context?.requestId || this.generateRequestId();\n    \n    return this.circuitBreaker.execute(async () => {\n      return this.retryHandler.execute(fn, {\n        provider: this.provider,\n        requestId,\n        operation: context?.operation\n      });\n    });\n  }\n\n  /**\n   * Execute request with timeout\n   */\n  protected async executeWithTimeout<T>(\n    promise: Promise<T>,\n    operation: string\n  ): Promise<T> {\n    const timeout = this.config.timeout || 30000; // 30 seconds default\n    \n    return withTimeout(promise, timeout, {\n      operation,\n      provider: this.provider\n    });\n  }\n\n  /**\n   * Create request metrics for tracking\n   */\n  protected createRequestMetrics(\n    requestId: string,\n    model: string,\n    startTime: number\n  ): Partial<RequestMetrics> {\n    return {\n      requestId,\n      provider: this.provider,\n      model,\n      startTime,\n      endTime: 0,\n      tokens: { prompt_tokens: 0, completion_tokens: 0, total_tokens: 0, estimated_cost: 0 },\n      cost: 0,\n      success: false\n    };\n  }\n\n  /**\n   * Finalize request metrics\n   */\n  protected finalizeMetrics(\n    metrics: Partial<RequestMetrics>,\n    usage: Usage,\n    success: boolean,\n    error?: SDKError\n  ): RequestMetrics {\n    return {\n      ...metrics,\n      endTime: Date.now(),\n      tokens: usage,\n      cost: usage.estimated_cost,\n      success,\n      error\n    } as RequestMetrics;\n  }\n\n  /**\n   * Generate unique request ID\n   */\n  protected generateRequestId(): string {\n    return `${this.provider}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Validate API key format for this provider\n   */\n  protected abstract validateApiKey(apiKey: string): boolean;\n\n  /**\n   * Get default headers for requests\n   */\n  protected getDefaultHeaders(): Record<string, string> {\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      'User-Agent': this.config.userAgent || `ai-marketplace-sdk/0.1.0 (${this.provider})`\n    };\n\n    if (this.config.apiKey) {\n      headers['Authorization'] = this.getAuthHeader(this.config.apiKey);\n    }\n\n    return headers;\n  }\n\n  /**\n   * Get provider-specific authorization header\n   */\n  protected abstract getAuthHeader(apiKey: string): string;\n\n  /**\n   * Health check for the provider\n   */\n  async healthCheck(): Promise<{\n    provider: ApiProvider;\n    healthy: boolean;\n    latency?: number;\n    error?: string;\n    capabilities: ProviderCapabilities;\n    circuitBreakerStatus: any;\n  }> {\n    const startTime = Date.now();\n    \n    try {\n      // Simple test request to verify provider is accessible\n      await this.executeWithTimeout(\n        this.testConnection(),\n        'health_check'\n      );\n\n      return {\n        provider: this.provider,\n        healthy: true,\n        latency: Date.now() - startTime,\n        capabilities: this.getCapabilities(),\n        circuitBreakerStatus: this.circuitBreaker.getStatus()\n      };\n    } catch (error) {\n      return {\n        provider: this.provider,\n        healthy: false,\n        latency: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        capabilities: this.getCapabilities(),\n        circuitBreakerStatus: this.circuitBreaker.getStatus()\n      };\n    }\n  }\n\n  /**\n   * Test connection to provider - should be implemented by each provider\n   */\n  protected abstract testConnection(): Promise<void>;\n\n  /**\n   * Get provider configuration (without sensitive data)\n   */\n  getConfig(): Omit<ProviderConfig, 'apiKey'> {\n    const { apiKey, ...safeConfig } = this.config;\n    return safeConfig;\n  }\n\n  /**\n   * Update provider configuration\n   */\n  updateConfig(updates: Partial<BaseProviderOptions>): void {\n    Object.assign(this.config, updates);\n  }\n}\n\n/**\n * Provider factory interface\n */\nexport interface ProviderFactory {\n  create(config: ProviderConfig): BaseProvider;\n  supports(provider: ApiProvider): boolean;\n}\n\n/**\n * Provider registry for managing multiple providers\n */\nexport class ProviderRegistry {\n  private factories = new Map<ApiProvider, ProviderFactory>();\n  private instances = new Map<string, BaseProvider>();\n\n  /**\n   * Register a provider factory\n   */\n  register(provider: ApiProvider, factory: ProviderFactory): void {\n    this.factories.set(provider, factory);\n  }\n\n  /**\n   * Get or create a provider instance\n   */\n  getProvider(config: ProviderConfig): BaseProvider {\n    const key = `${config.provider}-${config.model}`;\n    \n    if (this.instances.has(key)) {\n      return this.instances.get(key)!;\n    }\n\n    const factory = this.factories.get(config.provider);\n    if (!factory) {\n      throw new Error(`No factory registered for provider: ${config.provider}`);\n    }\n\n    const instance = factory.create(config);\n    this.instances.set(key, instance);\n    return instance;\n  }\n\n  /**\n   * Get all registered providers\n   */\n  getRegisteredProviders(): ApiProvider[] {\n    return Array.from(this.factories.keys());\n  }\n\n  /**\n   * Check if provider is supported\n   */\n  supports(provider: ApiProvider): boolean {\n    return this.factories.has(provider);\n  }\n\n  /**\n   * Clear all cached instances\n   */\n  clearCache(): void {\n    this.instances.clear();\n  }\n\n  /**\n   * Health check all providers\n   */\n  async healthCheckAll(): Promise<Record<string, any>> {\n    const results: Record<string, any> = {};\n    \n    for (const [provider, factory] of this.factories) {\n      try {\n        // Create a test instance with minimal config\n        const testInstance = factory.create({\n          provider,\n          model: 'test',\n          apiKey: 'test'\n        });\n        \n        results[provider] = await testInstance.healthCheck();\n      } catch (error) {\n        results[provider] = {\n          provider,\n          healthy: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        };\n      }\n    }\n\n    return results;\n  }\n}\n\n// Global provider registry instance\nexport const providerRegistry = new ProviderRegistry();","/**\n * Chat Module - Unified Chat Interface\n * \n * Provides high-level chat interface with provider abstraction and intelligent routing\n */\n\nimport type {\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ProviderConfig,\n  ProviderConstraints,\n  ProviderSelection,\n  Message,\n  Tool\n} from '../types';\n\nimport { providerRegistry } from '../providers/base';\nimport { BaseSDKError } from '../utils/errors';\n\nexport interface ChatOptions {\n  provider?: ProviderConfig;\n  constraints?: ProviderConstraints;\n  enableAutoRetry?: boolean;\n  enableFallback?: boolean;\n  trackUsage?: boolean;\n}\n\n/**\n * High-level Chat interface with provider abstraction\n */\nexport class Chat {\n  private defaultProvider?: ProviderConfig;\n  private options: ChatOptions;\n\n  constructor(options: ChatOptions = {}) {\n    this.options = {\n      enableAutoRetry: true,\n      enableFallback: true,\n      trackUsage: true,\n      ...options\n    };\n    \n    this.defaultProvider = options.provider;\n  }\n\n  /**\n   * Complete a chat conversation\n   */\n  async complete(\n    request: ChatCompletionRequest,\n    options?: Partial<ChatOptions>\n  ): Promise<ChatCompletionResponse> {\n    const mergedOptions = { ...this.options, ...options };\n    \n    // Select optimal provider\n    const providerConfig = await this.selectProvider(request, mergedOptions);\n    \n    // Get provider instance\n    const provider = providerRegistry.getProvider(providerConfig);\n    \n    try {\n      return await provider.chatCompletion(request);\n    } catch (error) {\n      // Handle fallback if enabled\n      if (mergedOptions.enableFallback && this.shouldFallback(error)) {\n        return this.executeWithFallback(request, providerConfig, mergedOptions);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Stream a chat conversation\n   */\n  async* stream(\n    request: ChatCompletionRequest,\n    options?: Partial<ChatOptions>\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const mergedOptions = { ...this.options, ...options };\n    \n    // Select optimal provider\n    const providerConfig = await this.selectProvider(request, mergedOptions);\n    \n    // Get provider instance\n    const provider = providerRegistry.getProvider(providerConfig);\n    \n    try {\n      yield* provider.streamChatCompletion(request);\n    } catch (error) {\n      // Fallback for streaming is more complex, for now just throw\n      throw error;\n    }\n  }\n\n  /**\n   * Simple text completion (convenience method)\n   */\n  async ask(\n    message: string,\n    options?: {\n      system?: string;\n      temperature?: number;\n      maxTokens?: number;\n    } & Partial<ChatOptions>\n  ): Promise<string> {\n    const messages: Message[] = [];\n    \n    if (options?.system) {\n      messages.push({ role: 'system', content: options.system });\n    }\n    \n    messages.push({ role: 'user', content: message });\n\n    const request: ChatCompletionRequest = {\n      messages,\n      ...(options?.temperature && { temperature: options.temperature }),\n      ...(options?.maxTokens && { max_tokens: options.maxTokens })\n    };\n\n    const response = await this.complete(request, options);\n    const content = response.choices[0]?.message.content || '';\n    return typeof content === 'string' ? content : JSON.stringify(content);\n  }\n\n  /**\n   * Chat with conversation history\n   */\n  async chat(\n    messages: Message[],\n    options?: {\n      temperature?: number;\n      maxTokens?: number;\n      tools?: Tool[];\n    } & Partial<ChatOptions>\n  ): Promise<ChatCompletionResponse> {\n    const request: ChatCompletionRequest = {\n      messages,\n      ...(options?.temperature && { temperature: options.temperature }),\n      ...(options?.maxTokens && { max_tokens: options.maxTokens }),\n      ...(options?.tools && { tools: options.tools })\n    };\n\n    return this.complete(request, options);\n  }\n\n  /**\n   * Create a conversation instance for stateful chat\n   */\n  conversation(options?: {\n    system?: string;\n    temperature?: number;\n    maxTokens?: number;\n  } & Partial<ChatOptions>): Conversation {\n    return new Conversation(this, options);\n  }\n\n  /**\n   * Select optimal provider based on request and constraints\n   */\n  private async selectProvider(\n    request: ChatCompletionRequest,\n    options: ChatOptions\n  ): Promise<ProviderConfig> {\n    // Use explicit provider if specified\n    if (options.provider) {\n      return options.provider;\n    }\n\n    // Use default provider if no constraints\n    if (this.defaultProvider && !options.constraints) {\n      return this.defaultProvider;\n    }\n\n    // Implement intelligent provider selection\n    return this.intelligentProviderSelection(request, options.constraints);\n  }\n\n  /**\n   * Intelligent provider selection based on constraints and request characteristics\n   */\n  private async intelligentProviderSelection(\n    request: ChatCompletionRequest,\n    constraints?: ProviderConstraints\n  ): Promise<ProviderConfig> {\n    const supportedProviders = providerRegistry.getRegisteredProviders();\n    const candidates: ProviderSelection[] = [];\n\n    for (const provider of supportedProviders) {\n      // Skip excluded providers\n      if (constraints?.excludeProviders?.includes(provider)) {\n        continue;\n      }\n\n      // Get provider instance for evaluation\n      const config: ProviderConfig = {\n        provider,\n        model: this.getDefaultModel(provider),\n        apiKey: '' // Will be resolved later\n      };\n\n      const providerInstance = providerRegistry.getProvider(config);\n      const capabilities = providerInstance.getCapabilities();\n\n      // Check required capabilities\n      if (constraints?.requiredCapabilities) {\n        const hasRequired = constraints.requiredCapabilities.every(\n          cap => capabilities[cap] === true\n        );\n        if (!hasRequired) continue;\n      }\n\n      // Estimate cost and quality\n      const estimatedCost = providerInstance.estimateCost(request);\n      const estimatedLatency = this.estimateLatency(provider);\n      const qualityScore = this.calculateQualityScore(provider, request);\n\n      // Apply constraints\n      if (constraints?.maxCost && estimatedCost > constraints.maxCost) {\n        continue;\n      }\n      if (constraints?.maxLatency && estimatedLatency > constraints.maxLatency) {\n        continue;\n      }\n      if (constraints?.qualityThreshold && qualityScore < constraints.qualityThreshold) {\n        continue;\n      }\n\n      candidates.push({\n        provider,\n        model: config.model,\n        estimatedCost,\n        estimatedLatency,\n        qualityScore,\n        reasoning: this.generateSelectionReasoning(provider, estimatedCost, qualityScore)\n      });\n    }\n\n    if (candidates.length === 0) {\n      throw new BaseSDKError(\n        'No providers meet the specified constraints',\n        'NO_SUITABLE_PROVIDER',\n        { details: { constraints } }\n      );\n    }\n\n    // Select best candidate (optimize for cost/quality ratio)\n    const bestCandidate = candidates.reduce((best, current) => {\n      const bestScore = best.qualityScore / best.estimatedCost;\n      const currentScore = current.qualityScore / current.estimatedCost;\n      return currentScore > bestScore ? current : best;\n    });\n\n    // Check for preferred providers\n    if (constraints?.preferredProviders) {\n      const preferredCandidate = candidates.find(c => \n        constraints.preferredProviders!.includes(c.provider)\n      );\n      if (preferredCandidate) {\n        return {\n          provider: preferredCandidate.provider,\n          model: preferredCandidate.model,\n          apiKey: '' // Will be resolved later\n        };\n      }\n    }\n\n    return {\n      provider: bestCandidate.provider,\n      model: bestCandidate.model,\n      apiKey: '' // Will be resolved later\n    };\n  }\n\n  /**\n   * Execute request with fallback providers\n   */\n  private async executeWithFallback(\n    request: ChatCompletionRequest,\n    failedProvider: ProviderConfig,\n    options: ChatOptions\n  ): Promise<ChatCompletionResponse> {\n    const fallbackProviders = this.getFallbackProviders(failedProvider);\n    \n    for (const provider of fallbackProviders) {\n      try {\n        const providerInstance = providerRegistry.getProvider(provider);\n        return await providerInstance.chatCompletion(request);\n      } catch (error) {\n        // Continue to next fallback\n        continue;\n      }\n    }\n\n    throw new BaseSDKError(\n      'All fallback providers failed',\n      'ALL_PROVIDERS_FAILED',\n      { details: { originalProvider: failedProvider.provider } }\n    );\n  }\n\n  /**\n   * Determine if error should trigger fallback\n   */\n  private shouldFallback(error: any): boolean {\n    // Fallback on rate limits, server errors, but not auth/validation errors\n    if (error.code === 'RATE_LIMIT_EXCEEDED') return true;\n    if (error.statusCode && error.statusCode >= 500) return true;\n    if (error.code === 'NETWORK_ERROR') return true;\n    return false;\n  }\n\n  /**\n   * Get fallback providers for a failed provider\n   */\n  private getFallbackProviders(failedProvider: ProviderConfig): ProviderConfig[] {\n    const fallbackMap: Record<string, string[]> = {\n      'openai': ['claude'],\n      'claude': ['openai'],\n      'google': ['openai', 'claude'],\n      'azure': ['openai', 'claude'],\n      'cohere': ['openai', 'claude'],\n      'huggingface': ['openai', 'claude']\n    };\n\n    const fallbacks = fallbackMap[failedProvider.provider] || ['openai'];\n    return fallbacks.map(provider => ({\n      provider: provider as any,\n      model: this.getDefaultModel(provider as any),\n      apiKey: '' // Will be resolved later\n    }));\n  }\n\n  /**\n   * Get default model for provider\n   */\n  private getDefaultModel(provider: string): string {\n    const defaultModels: Record<string, string> = {\n      'openai': 'gpt-4o',\n      'claude': 'claude-3-5-sonnet-20241022',\n      'google': 'gemini-pro',\n      'azure': 'gpt-4',\n      'cohere': 'command-r-plus',\n      'huggingface': 'meta-llama/Llama-2-70b-chat-hf'\n    };\n    return defaultModels[provider] || 'gpt-4o';\n  }\n\n  /**\n   * Estimate latency for provider (placeholder implementation)\n   */\n  private estimateLatency(provider: string): number {\n    const latencyMap: Record<string, number> = {\n      'openai': 2000,\n      'claude': 3000,\n      'google': 1500,\n      'azure': 2500,\n      'cohere': 2000,\n      'huggingface': 4000\n    };\n    return latencyMap[provider] || 2000;\n  }\n\n  /**\n   * Calculate quality score for provider (placeholder implementation)\n   */\n  private calculateQualityScore(provider: string, request: ChatCompletionRequest): number {\n    // Simple quality scoring based on provider capabilities\n    const qualityMap: Record<string, number> = {\n      'openai': 0.9,\n      'claude': 0.95,\n      'google': 0.8,\n      'azure': 0.9,\n      'cohere': 0.7,\n      'huggingface': 0.6\n    };\n    return qualityMap[provider] || 0.5;\n  }\n\n  /**\n   * Generate reasoning for provider selection\n   */\n  private generateSelectionReasoning(provider: string, cost: number, quality: number): string {\n    return `Selected ${provider} for optimal cost/quality ratio (cost: $${cost.toFixed(4)}, quality: ${quality.toFixed(2)})`;\n  }\n}\n\n/**\n * Stateful conversation class\n */\nexport class Conversation {\n  private messages: Message[] = [];\n  private chat: Chat;\n  private options: any;\n\n  constructor(chat: Chat, options: any = {}) {\n    this.chat = chat;\n    this.options = options;\n\n    // Add system message if provided\n    if (options.system) {\n      this.messages.push({ role: 'system', content: options.system });\n    }\n  }\n\n  /**\n   * Send a message and get response\n   */\n  async say(message: string): Promise<string> {\n    this.messages.push({ role: 'user', content: message });\n\n    const response = await this.chat.chat(this.messages, this.options);\n    const assistantMessage = response.choices[0]?.message.content || '';\n\n    this.messages.push({ role: 'assistant', content: assistantMessage });\n\n    return assistantMessage;\n  }\n\n  /**\n   * Get conversation history\n   */\n  getHistory(): Message[] {\n    return [...this.messages];\n  }\n\n  /**\n   * Clear conversation history (keeping system message)\n   */\n  clear(): void {\n    const systemMessage = this.messages.find(m => m.role === 'system');\n    this.messages = systemMessage ? [systemMessage] : [];\n  }\n\n  /**\n   * Get conversation summary\n   */\n  async summarize(): Promise<string> {\n    if (this.messages.length < 3) {\n      return 'Conversation too short to summarize';\n    }\n\n    const summaryRequest: Message[] = [\n      { role: 'system', content: 'Summarize the following conversation concisely.' },\n      { role: 'user', content: JSON.stringify(this.messages) }\n    ];\n\n    const response = await this.chat.chat(summaryRequest, { ...this.options, maxTokens: 200 });\n    return response.choices[0]?.message.content || 'Unable to generate summary';\n  }\n}\n\n/**\n * Convenience function to create a Chat instance\n */\nexport function createChat(options?: ChatOptions): Chat {\n  return new Chat(options);\n}\n\n/**\n * Quick helper functions\n */\nexport async function ask(\n  message: string,\n  options?: {\n    provider?: ProviderConfig;\n    system?: string;\n    temperature?: number;\n  }\n): Promise<string> {\n  const chat = new Chat({ provider: options?.provider });\n  return chat.ask(message, options);\n}\n\nexport async function chat(\n  messages: Message[],\n  options?: {\n    provider?: ProviderConfig;\n    temperature?: number;\n    tools?: Tool[];\n  }\n): Promise<ChatCompletionResponse> {\n  const chatInstance = new Chat({ provider: options?.provider });\n  return chatInstance.chat(messages, options);\n}","/**\n * Zero-Dependency HTTP Client\n * \n * Native fetch-based HTTP client to replace axios (saves 15KB)\n * Includes retry logic, timeout handling, and error management\n */\n\nexport interface HTTPConfig {\n  baseURL?: string;\n  timeout?: number;\n  headers?: Record<string, string>;\n  maxRetries?: number;\n  retryDelay?: number;\n}\n\nexport interface HTTPRequest {\n  url: string;\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: Record<string, string>;\n  body?: any;\n  timeout?: number;\n  signal?: AbortSignal;\n}\n\nexport interface HTTPResponse<T = any> {\n  data: T;\n  status: number;\n  statusText: string;\n  headers: Headers;\n  ok: boolean;\n}\n\nexport class HTTPError extends Error {\n  constructor(\n    message: string,\n    public status: number,\n    public statusText: string,\n    public data?: any\n  ) {\n    super(message);\n    this.name = 'HTTPError';\n  }\n}\n\nexport class HTTPTimeoutError extends Error {\n  constructor(timeout: number) {\n    super(`Request timeout after ${timeout}ms`);\n    this.name = 'HTTPTimeoutError';\n  }\n}\n\n/**\n * Zero-dependency HTTP client with retry logic\n */\nexport class HTTPClient {\n  private config: HTTPConfig;\n\n  constructor(config: HTTPConfig = {}) {\n    this.config = {\n      timeout: 30000,\n      maxRetries: 3,\n      retryDelay: 1000,\n      ...config\n    };\n  }\n\n  /**\n   * Make HTTP request with timeout and retry logic\n   */\n  async request<T = any>(request: HTTPRequest): Promise<HTTPResponse<T>> {\n    const url = this.buildURL(request.url);\n    const timeout = request.timeout || this.config.timeout!;\n    \n    return this.executeWithRetry(async () => {\n      // Create abort controller for timeout\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), timeout);\n      \n      try {\n        const response = await fetch(url, {\n          method: request.method || 'GET',\n          headers: this.buildHeaders(request.headers),\n          body: this.buildBody(request.body),\n          signal: request.signal || controller.signal\n        });\n\n        clearTimeout(timeoutId);\n\n        if (!response.ok) {\n          const data = await this.parseResponse<T>(response);\n          throw new HTTPError(\n            `HTTP ${response.status}: ${response.statusText}`,\n            response.status,\n            response.statusText,\n            data\n          );\n        }\n\n        const data = await this.parseResponse<T>(response);\n\n        return {\n          data,\n          status: response.status,\n          statusText: response.statusText,\n          headers: response.headers,\n          ok: response.ok\n        };\n      } catch (error) {\n        clearTimeout(timeoutId);\n        \n        // Handle AbortSignal timeout\n        if (error instanceof DOMException && error.name === 'AbortError') {\n          throw new HTTPTimeoutError(timeout);\n        }\n        \n        // Re-throw HTTPError as-is\n        if (error instanceof HTTPError) {\n          throw error;\n        }\n        \n        // Handle other errors (network failures, etc.)\n        if (error instanceof Error) {\n          throw error;\n        }\n        \n        // Fallback for unknown errors\n        throw new Error(`Unknown error: ${error}`);\n      }\n    });\n  }\n\n  /**\n   * GET request\n   */\n  async get<T = any>(url: string, config?: Omit<HTTPRequest, 'url' | 'method'>): Promise<HTTPResponse<T>> {\n    return this.request<T>({ ...config, url, method: 'GET' });\n  }\n\n  /**\n   * POST request\n   */\n  async post<T = any>(url: string, body?: any, config?: Omit<HTTPRequest, 'url' | 'method' | 'body'>): Promise<HTTPResponse<T>> {\n    return this.request<T>({ ...config, url, method: 'POST', body });\n  }\n\n  /**\n   * PUT request\n   */\n  async put<T = any>(url: string, body?: any, config?: Omit<HTTPRequest, 'url' | 'method' | 'body'>): Promise<HTTPResponse<T>> {\n    return this.request<T>({ ...config, url, method: 'PUT', body });\n  }\n\n  /**\n   * DELETE request\n   */\n  async delete<T = any>(url: string, config?: Omit<HTTPRequest, 'url' | 'method'>): Promise<HTTPResponse<T>> {\n    return this.request<T>({ ...config, url, method: 'DELETE' });\n  }\n\n  /**\n   * Streaming request for SSE\n   */\n  async *stream(request: HTTPRequest): AsyncGenerator<string, void, unknown> {\n    const url = this.buildURL(request.url);\n    const response = await fetch(url, {\n      method: request.method || 'POST',\n      headers: this.buildHeaders(request.headers),\n      body: this.buildBody(request.body),\n      signal: request.signal\n    });\n\n    if (!response.ok) {\n      const data = await this.parseResponse(response);\n      throw new HTTPError(\n        `HTTP ${response.status}: ${response.statusText}`,\n        response.status,\n        response.statusText,\n        data\n      );\n    }\n\n    const reader = response.body?.getReader();\n    if (!reader) {\n      throw new Error('Response body is not readable');\n    }\n\n    const decoder = new TextDecoder();\n    \n    try {\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n        \n        const chunk = decoder.decode(value, { stream: true });\n        yield chunk;\n      }\n    } finally {\n      reader.releaseLock();\n    }\n  }\n\n  private buildURL(url: string): string {\n    if (url.startsWith('http://') || url.startsWith('https://')) {\n      return url;\n    }\n    \n    const baseURL = this.config.baseURL || '';\n    return `${baseURL.replace(/\\/$/, '')}/${url.replace(/^\\//, '')}`;\n  }\n\n  private buildHeaders(requestHeaders?: Record<string, string>): Record<string, string> {\n    return {\n      'Content-Type': 'application/json',\n      ...this.config.headers,\n      ...requestHeaders\n    };\n  }\n\n  private buildBody(body?: any): string | undefined {\n    if (!body) return undefined;\n    \n    if (typeof body === 'string') {\n      return body;\n    }\n    \n    return JSON.stringify(body);\n  }\n\n  private async parseResponse<T>(response: Response): Promise<T> {\n    const contentType = response.headers.get('content-type') || '';\n    \n    if (contentType.includes('application/json')) {\n      return response.json();\n    }\n    \n    if (contentType.includes('text/')) {\n      return response.text() as T;\n    }\n    \n    return response.arrayBuffer() as T;\n  }\n\n  private async executeWithRetry<T>(fn: () => Promise<T>): Promise<T> {\n    const maxRetries = this.config.maxRetries || 0;\n    const retryDelay = this.config.retryDelay || 1000;\n    \n    let lastError: Error;\n    \n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\n      try {\n        return await fn();\n      } catch (error) {\n        lastError = error as Error;\n        \n        // Don't retry on certain errors\n        if (error instanceof HTTPError && error.status < 500) {\n          throw error;\n        }\n        \n        if (error instanceof HTTPTimeoutError) {\n          throw error;\n        }\n        \n        // If this is the last attempt, throw the error\n        if (attempt === maxRetries) {\n          throw error;\n        }\n        \n        // Wait before retrying with exponential backoff\n        await this.delay(retryDelay * Math.pow(2, attempt));\n      }\n    }\n    \n    throw lastError!;\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n\n/**\n * Default HTTP client instance\n */\nexport const http = new HTTPClient();\n\n/**\n * Create HTTP client with custom configuration\n */\nexport function createHTTPClient(config: HTTPConfig): HTTPClient {\n  return new HTTPClient(config);\n}","/**\n * Zero-Dependency Schema Validation\n * \n * Lightweight validation system to replace Zod (saves 12KB)\n * Provides type-safe validation with minimal bundle impact\n */\n\nexport type ValidationResult<T> = {\n  success: true;\n  data: T;\n} | {\n  success: false;\n  error: ValidationError;\n};\n\nexport class ValidationError extends Error {\n  constructor(\n    message: string,\n    public path: string[] = [],\n    public received?: any\n  ) {\n    super(message);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * Base validator interface\n */\nexport interface Validator<T> {\n  validate(value: unknown, path?: string[]): ValidationResult<T>;\n  optional(): Validator<T | undefined>;\n  nullable(): Validator<T | null>;\n  default(defaultValue: T): Validator<T>;\n}\n\n/**\n * Base validator implementation\n */\nabstract class BaseValidator<T> implements Validator<T> {\n  abstract validate(value: unknown, path?: string[]): ValidationResult<T>;\n\n  optional(): Validator<T | undefined> {\n    return new OptionalValidator(this);\n  }\n\n  nullable(): Validator<T | null> {\n    return new NullableValidator(this);\n  }\n\n  default(defaultValue: T): Validator<T> {\n    return new DefaultValidator(this, defaultValue);\n  }\n}\n\n/**\n * String validator\n */\nclass StringValidator extends BaseValidator<string> {\n  constructor(\n    private constraints: {\n      minLength?: number;\n      maxLength?: number;\n      pattern?: RegExp;\n      enum?: readonly string[];\n    } = {}\n  ) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<string> {\n    if (typeof value !== 'string') {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected string, received ${typeof value}`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.minLength !== undefined && value.length < this.constraints.minLength) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `String must be at least ${this.constraints.minLength} characters`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.maxLength !== undefined && value.length > this.constraints.maxLength) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `String must be at most ${this.constraints.maxLength} characters`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.pattern && !this.constraints.pattern.test(value)) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `String does not match required pattern`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.enum && !this.constraints.enum.includes(value)) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `String must be one of: ${this.constraints.enum.join(', ')}`,\n          path,\n          value\n        )\n      };\n    }\n\n    return { success: true, data: value };\n  }\n\n  min(length: number): StringValidator {\n    return new StringValidator({ ...this.constraints, minLength: length });\n  }\n\n  max(length: number): StringValidator {\n    return new StringValidator({ ...this.constraints, maxLength: length });\n  }\n\n  regex(pattern: RegExp): StringValidator {\n    return new StringValidator({ ...this.constraints, pattern });\n  }\n\n  enum<T extends readonly string[]>(...values: T): Validator<T[number]> {\n    return new StringValidator({ ...this.constraints, enum: values }) as any;\n  }\n}\n\n/**\n * Number validator\n */\nclass NumberValidator extends BaseValidator<number> {\n  constructor(\n    private constraints: {\n      min?: number;\n      max?: number;\n      integer?: boolean;\n    } = {}\n  ) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<number> {\n    if (typeof value !== 'number' || isNaN(value)) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected number, received ${typeof value}`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.integer && !Number.isInteger(value)) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected integer, received ${value}`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.min !== undefined && value < this.constraints.min) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Number must be at least ${this.constraints.min}`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.max !== undefined && value > this.constraints.max) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Number must be at most ${this.constraints.max}`,\n          path,\n          value\n        )\n      };\n    }\n\n    return { success: true, data: value };\n  }\n\n  min(value: number): NumberValidator {\n    return new NumberValidator({ ...this.constraints, min: value });\n  }\n\n  max(value: number): NumberValidator {\n    return new NumberValidator({ ...this.constraints, max: value });\n  }\n\n  int(): NumberValidator {\n    return new NumberValidator({ ...this.constraints, integer: true });\n  }\n}\n\n/**\n * Boolean validator\n */\nclass BooleanValidator extends BaseValidator<boolean> {\n  validate(value: unknown, path: string[] = []): ValidationResult<boolean> {\n    if (typeof value !== 'boolean') {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected boolean, received ${typeof value}`,\n          path,\n          value\n        )\n      };\n    }\n\n    return { success: true, data: value };\n  }\n}\n\n/**\n * Array validator\n */\nclass ArrayValidator<T> extends BaseValidator<T[]> {\n  constructor(\n    private itemValidator: Validator<T>,\n    private constraints: {\n      minLength?: number;\n      maxLength?: number;\n    } = {}\n  ) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<T[]> {\n    if (!Array.isArray(value)) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected array, received ${typeof value}`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.minLength !== undefined && value.length < this.constraints.minLength) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Array must have at least ${this.constraints.minLength} items`,\n          path,\n          value\n        )\n      };\n    }\n\n    if (this.constraints.maxLength !== undefined && value.length > this.constraints.maxLength) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Array must have at most ${this.constraints.maxLength} items`,\n          path,\n          value\n        )\n      };\n    }\n\n    const validatedItems: T[] = [];\n    for (let i = 0; i < value.length; i++) {\n      const itemResult = this.itemValidator.validate(value[i], [...path, i.toString()]);\n      if (!itemResult.success) {\n        return itemResult;\n      }\n      validatedItems.push(itemResult.data);\n    }\n\n    return { success: true, data: validatedItems };\n  }\n\n  min(length: number): ArrayValidator<T> {\n    return new ArrayValidator(this.itemValidator, { ...this.constraints, minLength: length });\n  }\n\n  max(length: number): ArrayValidator<T> {\n    return new ArrayValidator(this.itemValidator, { ...this.constraints, maxLength: length });\n  }\n}\n\n/**\n * Object validator\n */\nclass ObjectValidator<T extends Record<string, any>> extends BaseValidator<T> {\n  constructor(private shape: { [K in keyof T]: Validator<T[K]> }) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<T> {\n    if (typeof value !== 'object' || value === null || Array.isArray(value)) {\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected object, received ${typeof value}`,\n          path,\n          value\n        )\n      };\n    }\n\n    const result = {} as T;\n    const inputObj = value as Record<string, unknown>;\n\n    for (const [key, validator] of Object.entries(this.shape)) {\n      const fieldResult = validator.validate(inputObj[key], [...path, key]);\n      if (!fieldResult.success) {\n        return fieldResult;\n      }\n      result[key as keyof T] = fieldResult.data;\n    }\n\n    return { success: true, data: result };\n  }\n}\n\n/**\n * Union validator\n */\nclass UnionValidator<T> extends BaseValidator<T> {\n  constructor(private validators: Validator<any>[]) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<T> {\n    const errors: ValidationError[] = [];\n\n    for (const validator of this.validators) {\n      const result = validator.validate(value, path);\n      if (result.success) {\n        return result;\n      }\n      errors.push(result.error);\n    }\n\n    return {\n      success: false,\n      error: new ValidationError(\n        `Value does not match any of the union types`,\n        path,\n        value\n      )\n    };\n  }\n}\n\n/**\n * Optional validator wrapper\n */\nclass OptionalValidator<T> extends BaseValidator<T | undefined> {\n  constructor(private innerValidator: Validator<T>) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<T | undefined> {\n    if (value === undefined) {\n      return { success: true, data: undefined };\n    }\n    return this.innerValidator.validate(value, path);\n  }\n}\n\n/**\n * Nullable validator wrapper\n */\nclass NullableValidator<T> extends BaseValidator<T | null> {\n  constructor(private innerValidator: Validator<T>) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<T | null> {\n    if (value === null) {\n      return { success: true, data: null };\n    }\n    return this.innerValidator.validate(value, path);\n  }\n}\n\n/**\n * Default validator wrapper\n */\nclass DefaultValidator<T> extends BaseValidator<T> {\n  constructor(\n    private innerValidator: Validator<T>,\n    private defaultValue: T\n  ) {\n    super();\n  }\n\n  validate(value: unknown, path: string[] = []): ValidationResult<T> {\n    if (value === undefined) {\n      return { success: true, data: this.defaultValue };\n    }\n    return this.innerValidator.validate(value, path);\n  }\n}\n\n/**\n * Schema builder functions\n */\nexport const v = {\n  string: () => new StringValidator(),\n  number: () => new NumberValidator(),\n  boolean: () => new BooleanValidator(),\n  array: <T>(itemValidator: Validator<T>) => new ArrayValidator(itemValidator),\n  object: <T extends Record<string, any>>(shape: { [K in keyof T]: Validator<T[K]> }) => \n    new ObjectValidator(shape),\n  union: <T>(...validators: Validator<T>[]) => new UnionValidator<T>(validators),\n  literal: <T extends string | number | boolean>(value: T): Validator<T> => ({\n    validate: (input: unknown, path: string[] = []): ValidationResult<T> => {\n      if (input === value) {\n        return { success: true, data: value };\n      }\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected literal value ${value}, received ${input}`,\n          path,\n          input\n        )\n      };\n    },\n    optional: () => v.union(v.literal(value), v.undefined()) as any,\n    nullable: () => v.union(v.literal(value), v.null()) as any,\n    default: (defaultValue: T) => new DefaultValidator(v.literal(value), defaultValue)\n  }),\n  undefined: (): Validator<undefined> => ({\n    validate: (input: unknown, path: string[] = []): ValidationResult<undefined> => {\n      if (input === undefined) {\n        return { success: true, data: undefined };\n      }\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected undefined, received ${typeof input}`,\n          path,\n          input\n        )\n      };\n    },\n    optional: () => v.undefined(),\n    nullable: () => v.union(v.undefined(), v.null()) as any,\n    default: (defaultValue: undefined) => new DefaultValidator(v.undefined(), defaultValue)\n  }),\n  null: (): Validator<null> => ({\n    validate: (input: unknown, path: string[] = []): ValidationResult<null> => {\n      if (input === null) {\n        return { success: true, data: null };\n      }\n      return {\n        success: false,\n        error: new ValidationError(\n          `Expected null, received ${typeof input}`,\n          path,\n          input\n        )\n      };\n    },\n    optional: () => v.union(v.null(), v.undefined()) as any,\n    nullable: () => v.null(),\n    default: (defaultValue: null) => new DefaultValidator(v.null(), defaultValue)\n  }),\n  any: (): Validator<any> => ({\n    validate: (input: unknown): ValidationResult<any> => {\n      return { success: true, data: input };\n    },\n    optional: () => v.any(),\n    nullable: () => v.any(),\n    default: (defaultValue: any) => new DefaultValidator(v.any(), defaultValue)\n  })\n};\n\n/**\n * Parse with validation\n */\nexport function parse<T>(validator: Validator<T>, value: unknown): T {\n  const result = validator.validate(value);\n  if (!result.success) {\n    throw result.error;\n  }\n  return result.data;\n}\n\n/**\n * Safe parse with validation\n */\nexport function safeParse<T>(validator: Validator<T>, value: unknown): ValidationResult<T> {\n  return validator.validate(value);\n}","/**\n * Native OpenAI Provider Implementation\n * \n * Zero-dependency OpenAI provider with perfect API compatibility\n * Eliminates the 186KB openai package while maintaining 100% compatibility\n */\n\nimport { BaseProvider, BaseProviderOptions } from './base';\nimport { HTTPClient, createHTTPClient, HTTPError } from '../utils/http';\nimport { v, parse, ValidationError } from '../utils/validation';\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ProviderConfig,\n  ProviderCapabilities,\n  Usage\n} from '../types';\n\n// OpenAI-specific types (matching official API)\nexport interface OpenAIMessage {\n  role: 'system' | 'user' | 'assistant' | 'function' | 'tool';\n  content: string | null;\n  name?: string;\n  function_call?: {\n    name: string;\n    arguments: string;\n  };\n  tool_calls?: Array<{\n    id: string;\n    type: 'function';\n    function: {\n      name: string;\n      arguments: string;\n    };\n  }>;\n  tool_call_id?: string;\n}\n\nexport interface OpenAICompletionRequest {\n  model: string;\n  messages: OpenAIMessage[];\n  max_tokens?: number;\n  temperature?: number;\n  top_p?: number;\n  n?: number;\n  stream?: boolean;\n  stop?: string | string[];\n  presence_penalty?: number;\n  frequency_penalty?: number;\n  logit_bias?: Record<string, number>;\n  user?: string;\n  functions?: Array<{\n    name: string;\n    description?: string;\n    parameters?: Record<string, any>;\n  }>;\n  function_call?: 'none' | 'auto' | { name: string };\n  tools?: Array<{\n    type: 'function';\n    function: {\n      name: string;\n      description?: string;\n      parameters?: Record<string, any>;\n    };\n  }>;\n  tool_choice?: 'none' | 'auto' | { type: 'function'; function: { name: string } };\n  response_format?: { type: 'text' | 'json_object' };\n  seed?: number;\n}\n\nexport interface OpenAICompletionResponse {\n  id: string;\n  object: 'chat.completion';\n  created: number;\n  model: string;\n  choices: Array<{\n    index: number;\n    message: OpenAIMessage;\n    finish_reason: 'stop' | 'length' | 'function_call' | 'tool_calls' | 'content_filter' | null;\n  }>;\n  usage: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n  system_fingerprint?: string;\n}\n\nexport interface OpenAIStreamChunk {\n  id: string;\n  object: 'chat.completion.chunk';\n  created: number;\n  model: string;\n  choices: Array<{\n    index: number;\n    delta: {\n      role?: 'assistant';\n      content?: string;\n      function_call?: {\n        name?: string;\n        arguments?: string;\n      };\n      tool_calls?: Array<{\n        index: number;\n        id?: string;\n        type?: 'function';\n        function?: {\n          name?: string;\n          arguments?: string;\n        };\n      }>;\n    };\n    finish_reason: 'stop' | 'length' | 'function_call' | 'tool_calls' | 'content_filter' | null;\n  }>;\n  usage?: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n}\n\n/**\n * OpenAI model pricing (per 1K tokens)\n */\nconst OPENAI_PRICING = {\n  'gpt-4o': { input: 0.0025, output: 0.01 },\n  'gpt-4o-mini': { input: 0.00015, output: 0.0006 },\n  'gpt-4-turbo': { input: 0.01, output: 0.03 },\n  'gpt-4': { input: 0.03, output: 0.06 },\n  'gpt-3.5-turbo': { input: 0.0005, output: 0.0015 },\n  'gpt-3.5-turbo-instruct': { input: 0.0015, output: 0.002 }\n} as const;\n\n/**\n * Request validation schemas\n */\nconst openAIMessageSchema = v.object({\n  role: v.string().enum('system', 'user', 'assistant', 'function', 'tool'),\n  content: v.union(v.string(), v.null()),\n  name: v.string().optional(),\n  function_call: v.object({\n    name: v.string(),\n    arguments: v.string()\n  }).optional(),\n  tool_calls: v.array(v.object({\n    id: v.string(),\n    type: v.literal('function'),\n    function: v.object({\n      name: v.string(),\n      arguments: v.string()\n    })\n  })).optional(),\n  tool_call_id: v.string().optional()\n});\n\nconst openAIRequestSchema = v.object({\n  model: v.string(),\n  messages: v.array(openAIMessageSchema),\n  max_tokens: v.number().int().min(1).optional(),\n  temperature: v.number().min(0).max(2).optional(),\n  top_p: v.number().min(0).max(1).optional(),\n  n: v.number().int().min(1).max(10).default(1),\n  stream: v.boolean().default(false),\n  stop: v.union(v.string(), v.array(v.string())).optional(),\n  presence_penalty: v.number().min(-2).max(2).optional(),\n  frequency_penalty: v.number().min(-2).max(2).optional(),\n  logit_bias: v.object({}).optional(),\n  user: v.string().optional(),\n  functions: v.array(v.object({\n    name: v.string(),\n    description: v.string().optional(),\n    parameters: v.object({}).optional()\n  })).optional(),\n  function_call: v.union(\n    v.literal('none'),\n    v.literal('auto'),\n    v.object({ name: v.string() })\n  ).optional(),\n  tools: v.array(v.object({\n    type: v.literal('function'),\n    function: v.object({\n      name: v.string(),\n      description: v.string().optional(),\n      parameters: v.object({}).optional()\n    })\n  })).optional(),\n  tool_choice: v.union(\n    v.literal('none'),\n    v.literal('auto'),\n    v.object({\n      type: v.literal('function'),\n      function: v.object({ name: v.string() })\n    })\n  ).optional(),\n  response_format: v.object({\n    type: v.string().enum('text', 'json_object')\n  }).optional(),\n  seed: v.number().int().optional()\n});\n\n/**\n * Native OpenAI Provider\n */\nexport class OpenAIProvider extends BaseProvider {\n  private client: HTTPClient;\n  private apiKey: string;\n\n  constructor(config: ProviderConfig) {\n    super('openai', config);\n    \n    if (!config.apiKey) {\n      throw new Error('OpenAI API key is required');\n    }\n\n    this.apiKey = config.apiKey;\n    this.client = createHTTPClient({\n      baseURL: config.baseURL || 'https://api.openai.com/v1',\n      timeout: config.timeout || 30000,\n      headers: {\n        'Authorization': `Bearer ${this.apiKey}`,\n        'OpenAI-Beta': 'assistants=v2'\n      }\n    });\n  }\n\n  getCapabilities(): ProviderCapabilities {\n    return {\n      chatCompletion: true,\n      streamingCompletion: true,\n      functionCalling: true,\n      imageGeneration: true,\n      imageAnalysis: true,\n      jsonMode: true,\n      systemMessages: true,\n      toolUse: true,\n      multipleMessages: true,\n      maxContextTokens: this.getContextLimit(),\n      supportedModels: this.getAvailableModels()\n    };\n  }\n\n  validateModel(model: string): boolean {\n    return this.getAvailableModels().includes(model);\n  }\n\n  getAvailableModels(): string[] {\n    return [\n      'gpt-4o',\n      'gpt-4o-mini',\n      'gpt-4-turbo',\n      'gpt-4-turbo-preview',\n      'gpt-4',\n      'gpt-3.5-turbo',\n      'gpt-3.5-turbo-instruct'\n    ];\n  }\n\n  estimateCost(request: ChatCompletionRequest): number {\n    const model = request.model as keyof typeof OPENAI_PRICING;\n    const pricing = OPENAI_PRICING[model];\n    \n    if (!pricing) {\n      return 0; // Unknown model\n    }\n\n    // Rough token estimation: ~4 characters per token\n    const inputText = request.messages.map(m => m.content).join(' ');\n    const estimatedInputTokens = Math.ceil(inputText.length / 4);\n    const estimatedOutputTokens = request.max_tokens || 1000;\n\n    return (estimatedInputTokens * pricing.input / 1000) + \n           (estimatedOutputTokens * pricing.output / 1000);\n  }\n\n  async chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse> {\n    const requestId = this.generateRequestId();\n    const startTime = Date.now();\n    \n    try {\n      // Validate and transform request\n      const openAIRequest = this.transformRequest(request);\n      \n      // Make API call\n      const response = await this.executeWithRetry(\n        () => this.client.post<OpenAICompletionResponse>('/chat/completions', openAIRequest),\n        { requestId, operation: 'chat_completion' }\n      );\n\n      // Transform response to unified format\n      return this.transformResponse(\n        response.data,\n        request,\n        this.createRequestMetrics(requestId, request.model, startTime)\n      );\n    } catch (error) {\n      throw this.handleError(error, requestId);\n    }\n  }\n\n  async *streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const requestId = this.generateRequestId();\n    \n    try {\n      // Validate and transform request\n      const openAIRequest = this.transformRequest({ ...request, stream: true });\n      \n      // Start streaming request\n      const stream = this.client.stream({\n        url: '/chat/completions',\n        method: 'POST',\n        body: openAIRequest\n      });\n\n      for await (const chunk of stream) {\n        // Parse SSE chunk\n        const lines = chunk.split('\\n').filter(line => line.trim());\n        \n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            \n            if (data === '[DONE]') {\n              return;\n            }\n            \n            try {\n              const parsed = JSON.parse(data) as OpenAIStreamChunk;\n              const transformedChunk = this.transformStreamChunk(parsed, request);\n              \n              if (transformedChunk) {\n                yield transformedChunk;\n              }\n            } catch (parseError) {\n              // Skip invalid JSON chunks\n              continue;\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw this.handleError(error, requestId);\n    }\n  }\n\n  protected transformResponse(\n    response: OpenAICompletionResponse,\n    request: ChatCompletionRequest,\n    metrics: Partial<any>\n  ): ChatCompletionResponse {\n    const usage: Usage = {\n      prompt_tokens: response.usage.prompt_tokens,\n      completion_tokens: response.usage.completion_tokens,\n      total_tokens: response.usage.total_tokens,\n      estimated_cost: this.calculateActualCost(response.usage, request.model)\n    };\n\n    return {\n      id: response.id,\n      object: 'chat.completion',\n      created: response.created,\n      model: response.model,\n      provider: 'openai',\n      choices: response.choices.map(choice => ({\n        index: choice.index,\n        message: {\n          role: choice.message.role as 'assistant',\n          content: choice.message.content,\n          function_call: choice.message.function_call,\n          tool_calls: choice.message.tool_calls\n        },\n        finish_reason: choice.finish_reason\n      })),\n      usage,\n      system_fingerprint: response.system_fingerprint\n    };\n  }\n\n  protected transformStreamChunk(\n    chunk: OpenAIStreamChunk,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null {\n    if (!chunk.choices || chunk.choices.length === 0) {\n      return null;\n    }\n\n    const choice = chunk.choices[0];\n    \n    return {\n      id: chunk.id,\n      object: 'chat.completion.chunk',\n      created: chunk.created,\n      model: chunk.model,\n      provider: 'openai',\n      choices: [{\n        index: choice.index,\n        delta: {\n          role: choice.delta.role,\n          content: choice.delta.content,\n          function_call: choice.delta.function_call,\n          tool_calls: choice.delta.tool_calls\n        },\n        finish_reason: choice.finish_reason\n      }],\n      usage: chunk.usage ? {\n        prompt_tokens: chunk.usage.prompt_tokens,\n        completion_tokens: chunk.usage.completion_tokens,\n        total_tokens: chunk.usage.total_tokens,\n        estimated_cost: chunk.usage ? this.calculateActualCost(chunk.usage, request.model) : 0\n      } : undefined\n    };\n  }\n\n  protected validateApiKey(apiKey: string): boolean {\n    return /^sk-[a-zA-Z0-9]{48}$/.test(apiKey) || \n           /^sk-proj-[a-zA-Z0-9]{48}$/.test(apiKey);\n  }\n\n  protected getAuthHeader(apiKey: string): string {\n    return `Bearer ${apiKey}`;\n  }\n\n  protected async testConnection(): Promise<void> {\n    try {\n      await this.client.get('/models');\n    } catch (error) {\n      if (error instanceof HTTPError && error.status === 401) {\n        throw new Error('Invalid OpenAI API key');\n      }\n      throw error;\n    }\n  }\n\n  private transformRequest(request: ChatCompletionRequest): OpenAICompletionRequest {\n    try {\n      const openAIRequest: OpenAICompletionRequest = {\n        model: request.model,\n        messages: request.messages.map(msg => ({\n          role: msg.role as OpenAIMessage['role'],\n          content: msg.content,\n          name: msg.name,\n          function_call: msg.function_call,\n          tool_calls: msg.tool_calls,\n          tool_call_id: msg.tool_call_id\n        })),\n        max_tokens: request.max_tokens,\n        temperature: request.temperature,\n        top_p: request.top_p,\n        n: request.n,\n        stream: request.stream,\n        stop: request.stop,\n        presence_penalty: request.presence_penalty,\n        frequency_penalty: request.frequency_penalty,\n        logit_bias: request.logit_bias,\n        user: request.user,\n        functions: request.functions,\n        function_call: request.function_call,\n        tools: request.tools,\n        tool_choice: request.tool_choice,\n        response_format: request.response_format,\n        seed: request.seed\n      };\n\n      // Validate request\n      return parse(openAIRequestSchema, openAIRequest);\n    } catch (error) {\n      if (error instanceof ValidationError) {\n        throw new Error(`Invalid request: ${error.message}`);\n      }\n      throw error;\n    }\n  }\n\n  private calculateActualCost(usage: { prompt_tokens: number; completion_tokens: number }, model: string): number {\n    const modelKey = model as keyof typeof OPENAI_PRICING;\n    const pricing = OPENAI_PRICING[modelKey];\n    \n    if (!pricing) {\n      return 0;\n    }\n\n    return (usage.prompt_tokens * pricing.input / 1000) + \n           (usage.completion_tokens * pricing.output / 1000);\n  }\n\n  private getContextLimit(): number {\n    const model = this.config.model;\n    \n    switch (model) {\n      case 'gpt-4o':\n      case 'gpt-4o-mini':\n        return 128000;\n      case 'gpt-4-turbo':\n      case 'gpt-4-turbo-preview':\n        return 128000;\n      case 'gpt-4':\n        return 8192;\n      case 'gpt-3.5-turbo':\n        return 16385;\n      default:\n        return 4096;\n    }\n  }\n\n  private handleError(error: unknown, requestId: string): Error {\n    if (error instanceof HTTPError) {\n      switch (error.status) {\n        case 401:\n          return new Error('Invalid OpenAI API key');\n        case 429:\n          return new Error('OpenAI rate limit exceeded');\n        case 400:\n          return new Error(`Invalid request: ${error.data?.error?.message || error.statusText}`);\n        case 500:\n        case 502:\n        case 503:\n          return new Error('OpenAI service temporarily unavailable');\n        default:\n          return new Error(`OpenAI API error: ${error.message}`);\n      }\n    }\n    \n    if (error instanceof Error) {\n      return error;\n    }\n    \n    return new Error(`Unknown error in OpenAI request ${requestId}`);\n  }\n}\n\n/**\n * Create OpenAI provider instance\n */\nexport function createOpenAIProvider(config: Omit<ProviderConfig, 'provider'>): OpenAIProvider {\n  return new OpenAIProvider({ ...config, provider: 'openai' });\n}\n\n/**\n * OpenAI provider factory\n */\nexport const openAIFactory = {\n  create: (config: ProviderConfig) => new OpenAIProvider(config),\n  supports: (provider: ApiProvider) => provider === 'openai'\n};","/**\n * Native Anthropic Provider Implementation\n * \n * Zero-dependency Anthropic/Claude provider eliminating the ~50KB @anthropic-ai/sdk\n * Maintains full compatibility with Claude's message API\n */\n\nimport { BaseProvider, BaseProviderOptions } from './base';\nimport { HTTPClient, createHTTPClient, HTTPError } from '../utils/http';\nimport { v, parse, ValidationError } from '../utils/validation';\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ProviderConfig,\n  ProviderCapabilities,\n  Usage,\n  Message\n} from '../types';\n\n// Anthropic-specific types (matching official API)\nexport interface AnthropicMessage {\n  role: 'user' | 'assistant';\n  content: string | AnthropicContent[];\n}\n\nexport interface AnthropicContent {\n  type: 'text' | 'image';\n  text?: string;\n  source?: {\n    type: 'base64';\n    media_type: string;\n    data: string;\n  };\n}\n\nexport interface AnthropicTool {\n  name: string;\n  description?: string;\n  input_schema: Record<string, any>;\n}\n\nexport interface AnthropicRequest {\n  model: string;\n  messages: AnthropicMessage[];\n  max_tokens: number;\n  system?: string;\n  temperature?: number;\n  top_p?: number;\n  stop_sequences?: string[];\n  tools?: AnthropicTool[];\n  stream?: boolean;\n}\n\nexport interface AnthropicResponse {\n  id: string;\n  type: 'message';\n  role: 'assistant';\n  content: Array<{\n    type: 'text' | 'tool_use';\n    text?: string;\n    id?: string;\n    name?: string;\n    input?: Record<string, any>;\n  }>;\n  model: string;\n  stop_reason: 'end_turn' | 'max_tokens' | 'stop_sequence' | 'tool_use';\n  stop_sequence?: string | null;\n  usage: {\n    input_tokens: number;\n    output_tokens: number;\n  };\n}\n\nexport interface AnthropicStreamEvent {\n  type: 'message_start' | 'message_delta' | 'content_block_start' | 'content_block_delta' | 'content_block_stop' | 'message_stop';\n  message?: Partial<AnthropicResponse>;\n  delta?: {\n    type?: string;\n    text?: string;\n    stop_reason?: string;\n  };\n  content_block?: {\n    type: 'text' | 'tool_use';\n    text?: string;\n  };\n  index?: number;\n  usage?: {\n    input_tokens: number;\n    output_tokens: number;\n  };\n}\n\n/**\n * Anthropic model pricing (per 1K tokens)\n */\nconst ANTHROPIC_PRICING = {\n  'claude-3-5-sonnet-20241022': { input: 0.003, output: 0.015 },\n  'claude-3-5-haiku-20241022': { input: 0.00025, output: 0.00125 },\n  'claude-3-opus-20240229': { input: 0.015, output: 0.075 },\n  'claude-3-sonnet-20240229': { input: 0.003, output: 0.015 },\n  'claude-3-haiku-20240307': { input: 0.00025, output: 0.00125 }\n} as const;\n\n/**\n * Request validation schemas\n */\nconst anthropicContentSchema = v.union(\n  v.string(),\n  v.array(v.object({\n    type: v.string().enum('text', 'image'),\n    text: v.string().optional(),\n    source: v.object({\n      type: v.literal('base64'),\n      media_type: v.string(),\n      data: v.string()\n    }).optional()\n  }))\n);\n\nconst anthropicMessageSchema = v.object({\n  role: v.string().enum('user', 'assistant'),\n  content: anthropicContentSchema\n});\n\nconst anthropicRequestSchema = v.object({\n  model: v.string(),\n  messages: v.array(anthropicMessageSchema),\n  max_tokens: v.number().int().min(1).max(4096),\n  system: v.string().optional(),\n  temperature: v.number().min(0).max(1).optional(),\n  top_p: v.number().min(0).max(1).optional(),\n  stop_sequences: v.array(v.string()).optional(),\n  tools: v.array(v.object({\n    name: v.string(),\n    description: v.string().optional(),\n    input_schema: v.object({}).optional()\n  })).optional(),\n  stream: v.boolean().default(false)\n});\n\n/**\n * Native Anthropic Provider\n */\nexport class AnthropicProvider extends BaseProvider {\n  private client: HTTPClient;\n  private apiKey: string;\n\n  constructor(config: ProviderConfig) {\n    super('anthropic', config);\n    \n    if (!config.apiKey) {\n      throw new Error('Anthropic API key is required');\n    }\n\n    this.apiKey = config.apiKey;\n    this.client = createHTTPClient({\n      baseURL: config.baseURL || 'https://api.anthropic.com/v1',\n      timeout: config.timeout || 30000,\n      headers: {\n        'x-api-key': this.apiKey,\n        'anthropic-version': '2023-06-01',\n        'anthropic-beta': 'messages-2023-12-15'\n      }\n    });\n  }\n\n  getCapabilities(): ProviderCapabilities {\n    return {\n      chatCompletion: true,\n      streamingCompletion: true,\n      functionCalling: true,\n      imageGeneration: false,\n      imageAnalysis: true,\n      jsonMode: false,\n      systemMessages: true,\n      toolUse: true,\n      multipleMessages: true,\n      maxContextTokens: this.getContextLimit(),\n      supportedModels: this.getAvailableModels()\n    };\n  }\n\n  validateModel(model: string): boolean {\n    return this.getAvailableModels().includes(model);\n  }\n\n  getAvailableModels(): string[] {\n    return [\n      'claude-3-5-sonnet-20241022',\n      'claude-3-5-haiku-20241022',\n      'claude-3-opus-20240229',\n      'claude-3-sonnet-20240229',\n      'claude-3-haiku-20240307'\n    ];\n  }\n\n  estimateCost(request: ChatCompletionRequest): number {\n    const model = request.model as keyof typeof ANTHROPIC_PRICING;\n    const pricing = ANTHROPIC_PRICING[model];\n    \n    if (!pricing) {\n      return 0; // Unknown model\n    }\n\n    // Rough token estimation: ~4 characters per token\n    const inputText = request.messages.map(m => \n      typeof m.content === 'string' ? m.content : JSON.stringify(m.content)\n    ).join(' ');\n    const estimatedInputTokens = Math.ceil(inputText.length / 4);\n    const estimatedOutputTokens = request.max_tokens || 1000;\n\n    return (estimatedInputTokens * pricing.input / 1000) + \n           (estimatedOutputTokens * pricing.output / 1000);\n  }\n\n  async chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse> {\n    const requestId = this.generateRequestId();\n    const startTime = Date.now();\n    \n    try {\n      // Validate and transform request\n      const anthropicRequest = this.transformRequest(request);\n      \n      // Make API call\n      const response = await this.executeWithRetry(\n        () => this.client.post<AnthropicResponse>('/messages', anthropicRequest),\n        { requestId, operation: 'chat_completion' }\n      );\n\n      // Transform response to unified format\n      return this.transformResponse(\n        response.data,\n        request,\n        this.createRequestMetrics(requestId, request.model, startTime)\n      );\n    } catch (error) {\n      throw this.handleError(error, requestId);\n    }\n  }\n\n  async *streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const requestId = this.generateRequestId();\n    \n    try {\n      // Validate and transform request\n      const anthropicRequest = this.transformRequest({ ...request, stream: true });\n      \n      // Start streaming request\n      const stream = this.client.stream({\n        url: '/messages',\n        method: 'POST',\n        body: anthropicRequest\n      });\n\n      for await (const chunk of stream) {\n        // Parse SSE chunk\n        const lines = chunk.split('\\n').filter(line => line.trim());\n        \n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            \n            if (data === '[DONE]') {\n              return;\n            }\n            \n            try {\n              const parsed = JSON.parse(data) as AnthropicStreamEvent;\n              const transformedChunk = this.transformStreamChunk(parsed, request);\n              \n              if (transformedChunk) {\n                yield transformedChunk;\n              }\n            } catch (parseError) {\n              // Skip invalid JSON chunks\n              continue;\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw this.handleError(error, requestId);\n    }\n  }\n\n  protected transformResponse(\n    response: AnthropicResponse,\n    request: ChatCompletionRequest,\n    metrics: Partial<any>\n  ): ChatCompletionResponse {\n    const usage: Usage = {\n      prompt_tokens: response.usage.input_tokens,\n      completion_tokens: response.usage.output_tokens,\n      total_tokens: response.usage.input_tokens + response.usage.output_tokens,\n      estimated_cost: this.calculateActualCost(response.usage, request.model)\n    };\n\n    // Extract text content from Anthropic response\n    const textContent = response.content\n      .filter(item => item.type === 'text')\n      .map(item => item.text)\n      .join('');\n\n    // Extract tool calls if present\n    const toolCalls = response.content\n      .filter(item => item.type === 'tool_use')\n      .map((item, index) => ({\n        id: item.id || `call_${index}`,\n        type: 'function' as const,\n        function: {\n          name: item.name || '',\n          arguments: JSON.stringify(item.input || {})\n        }\n      }));\n\n    return {\n      id: response.id,\n      object: 'chat.completion',\n      created: Math.floor(Date.now() / 1000),\n      model: response.model,\n      provider: 'anthropic',\n      choices: [{\n        index: 0,\n        message: {\n          role: 'assistant',\n          content: textContent,\n          ...(toolCalls.length > 0 && { tool_calls: toolCalls })\n        },\n        finish_reason: this.mapStopReason(response.stop_reason)\n      }],\n      usage\n    };\n  }\n\n  protected transformStreamChunk(\n    chunk: AnthropicStreamEvent,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null {\n    if (!chunk.type) {\n      return null;\n    }\n\n    const baseChunk = {\n      id: chunk.message?.id || 'unknown',\n      object: 'chat.completion.chunk' as const,\n      created: Math.floor(Date.now() / 1000),\n      model: request.model,\n      provider: 'anthropic' as const\n    };\n\n    switch (chunk.type) {\n      case 'message_start':\n        return {\n          ...baseChunk,\n          choices: [{\n            index: 0,\n            delta: { role: 'assistant' as const },\n            finish_reason: null\n          }]\n        };\n\n      case 'content_block_delta':\n        if (chunk.delta?.text) {\n          return {\n            ...baseChunk,\n            choices: [{\n              index: 0,\n              delta: { content: chunk.delta.text },\n              finish_reason: null\n            }]\n          };\n        }\n        break;\n\n      case 'message_delta':\n        const usage = chunk.usage ? {\n          prompt_tokens: chunk.usage.input_tokens,\n          completion_tokens: chunk.usage.output_tokens,\n          total_tokens: chunk.usage.input_tokens + chunk.usage.output_tokens,\n          estimated_cost: this.calculateActualCost(chunk.usage, request.model)\n        } : undefined;\n\n        return {\n          ...baseChunk,\n          choices: [{\n            index: 0,\n            delta: {},\n            finish_reason: this.mapStopReason(chunk.delta?.stop_reason || 'end_turn')\n          }],\n          ...(usage && { usage })\n        };\n\n      case 'message_stop':\n        return {\n          ...baseChunk,\n          choices: [{\n            index: 0,\n            delta: {},\n            finish_reason: 'stop'\n          }]\n        };\n    }\n\n    return null;\n  }\n\n  protected validateApiKey(apiKey: string): boolean {\n    return /^sk-ant-api03-[a-zA-Z0-9\\-_]{95}$/.test(apiKey);\n  }\n\n  protected getAuthHeader(apiKey: string): string {\n    return apiKey; // Anthropic uses x-api-key header, not Authorization\n  }\n\n  protected async testConnection(): Promise<void> {\n    try {\n      // Test with minimal request\n      const testRequest: AnthropicRequest = {\n        model: this.config.model || 'claude-3-5-haiku-20241022',\n        messages: [{ role: 'user', content: 'Hi' }],\n        max_tokens: 1\n      };\n      \n      await this.client.post('/messages', testRequest);\n    } catch (error) {\n      if (error instanceof HTTPError && error.status === 401) {\n        throw new Error('Invalid Anthropic API key');\n      }\n      throw error;\n    }\n  }\n\n  private transformRequest(request: ChatCompletionRequest): AnthropicRequest {\n    try {\n      // Extract system message if present\n      const systemMessage = request.messages.find(m => m.role === 'system');\n      const messages = request.messages.filter(m => m.role !== 'system');\n\n      // Convert messages to Anthropic format\n      const anthropicMessages: AnthropicMessage[] = messages.map(msg => ({\n        role: msg.role === 'assistant' ? 'assistant' : 'user',\n        content: this.transformMessageContent(msg)\n      }));\n\n      const anthropicRequest: AnthropicRequest = {\n        model: request.model,\n        messages: anthropicMessages,\n        max_tokens: request.max_tokens || 1000,\n        ...(systemMessage && { system: systemMessage.content as string }),\n        ...(request.temperature !== undefined && { temperature: request.temperature }),\n        ...(request.top_p !== undefined && { top_p: request.top_p }),\n        ...(request.stop && { \n          stop_sequences: Array.isArray(request.stop) ? request.stop : [request.stop] \n        }),\n        ...(request.tools && { tools: this.transformTools(request.tools) }),\n        ...(request.stream && { stream: true })\n      };\n\n      // Validate request\n      return parse(anthropicRequestSchema, anthropicRequest);\n    } catch (error) {\n      if (error instanceof ValidationError) {\n        throw new Error(`Invalid request: ${error.message}`);\n      }\n      throw error;\n    }\n  }\n\n  private transformMessageContent(message: Message): string | AnthropicContent[] {\n    if (typeof message.content === 'string') {\n      return message.content;\n    }\n\n    // Handle multimodal content (text + images)\n    return message.content.map(content => {\n      if (content.type === 'text') {\n        return {\n          type: 'text',\n          text: content.text\n        };\n      } else if (content.type === 'image_url') {\n        // Extract base64 data from data URL\n        const dataUrl = content.image_url?.url || '';\n        const [header, data] = dataUrl.split(',');\n        const mediaType = header.match(/data:([^;]+)/)?.[1] || 'image/jpeg';\n        \n        return {\n          type: 'image',\n          source: {\n            type: 'base64',\n            media_type: mediaType,\n            data: data || ''\n          }\n        };\n      }\n      \n      // Fallback for other content types\n      return {\n        type: 'text',\n        text: JSON.stringify(content)\n      };\n    });\n  }\n\n  private transformTools(tools: any[]): AnthropicTool[] {\n    return tools.map(tool => ({\n      name: tool.function.name,\n      description: tool.function.description,\n      input_schema: tool.function.parameters || {}\n    }));\n  }\n\n  private mapStopReason(stopReason: string): 'stop' | 'length' | 'tool_calls' | 'content_filter' | null {\n    const reasonMap: Record<string, 'stop' | 'length' | 'tool_calls'> = {\n      'end_turn': 'stop',\n      'max_tokens': 'length',\n      'stop_sequence': 'stop',\n      'tool_use': 'tool_calls'\n    };\n    return reasonMap[stopReason] || 'stop';\n  }\n\n  private calculateActualCost(\n    usage: { input_tokens: number; output_tokens: number }, \n    model: string\n  ): number {\n    const modelKey = model as keyof typeof ANTHROPIC_PRICING;\n    const pricing = ANTHROPIC_PRICING[modelKey];\n    \n    if (!pricing) {\n      return 0;\n    }\n\n    return (usage.input_tokens * pricing.input / 1000) + \n           (usage.output_tokens * pricing.output / 1000);\n  }\n\n  private getContextLimit(): number {\n    const model = this.config.model;\n    \n    switch (model) {\n      case 'claude-3-5-sonnet-20241022':\n      case 'claude-3-opus-20240229':\n      case 'claude-3-sonnet-20240229':\n        return 200000;\n      case 'claude-3-5-haiku-20241022':\n      case 'claude-3-haiku-20240307':\n        return 200000;\n      default:\n        return 200000;\n    }\n  }\n\n  private handleError(error: unknown, requestId: string): Error {\n    if (error instanceof HTTPError) {\n      switch (error.status) {\n        case 401:\n          return new Error('Invalid Anthropic API key');\n        case 429:\n          return new Error('Anthropic rate limit exceeded');\n        case 400:\n          return new Error(`Invalid request: ${error.data?.error?.message || error.statusText}`);\n        case 500:\n        case 502:\n        case 503:\n          return new Error('Anthropic service temporarily unavailable');\n        default:\n          return new Error(`Anthropic API error: ${error.message}`);\n      }\n    }\n    \n    if (error instanceof Error) {\n      return error;\n    }\n    \n    return new Error(`Unknown error in Anthropic request ${requestId}`);\n  }\n}\n\n/**\n * Create Anthropic provider instance\n */\nexport function createAnthropicProvider(config: Omit<ProviderConfig, 'provider'>): AnthropicProvider {\n  return new AnthropicProvider({ ...config, provider: 'anthropic' });\n}\n\n/**\n * Anthropic provider factory\n */\nexport const anthropicFactory = {\n  create: (config: ProviderConfig) => new AnthropicProvider(config),\n  supports: (provider: ApiProvider) => provider === 'anthropic'\n};\n\n/**\n * Convenience function to create Claude provider (alias for Anthropic)\n */\nexport function claude(options: Omit<ProviderConfig, 'provider'> = {}): ProviderConfig {\n  return {\n    provider: 'anthropic',\n    model: options.model || 'claude-3-5-sonnet-20241022',\n    ...options\n  };\n}","/**\n * Native Google Gemini Provider Implementation\n * \n * Zero-dependency Google Gemini provider with full API compatibility\n * Supports both Gemini Pro and Flash models for cost optimization\n */\n\nimport { BaseProvider, BaseProviderOptions } from './base';\nimport { HTTPClient, createHTTPClient, HTTPError } from '../utils/http';\nimport { v, parse, ValidationError } from '../utils/validation';\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ProviderConfig,\n  ProviderCapabilities,\n  Usage,\n  Message\n} from '../types';\n\n// Google Gemini-specific types\nexport interface GeminiContent {\n  role: 'user' | 'model';\n  parts: Array<{\n    text?: string;\n    inlineData?: {\n      mimeType: string;\n      data: string;\n    };\n  }>;\n}\n\nexport interface GeminiRequest {\n  contents: GeminiContent[];\n  generationConfig?: {\n    temperature?: number;\n    topP?: number;\n    topK?: number;\n    maxOutputTokens?: number;\n    stopSequences?: string[];\n  };\n  safetySettings?: Array<{\n    category: string;\n    threshold: string;\n  }>;\n}\n\nexport interface GeminiResponse {\n  candidates: Array<{\n    content: {\n      parts: Array<{\n        text: string;\n      }>;\n      role: string;\n    };\n    finishReason: 'STOP' | 'MAX_TOKENS' | 'SAFETY' | 'RECITATION' | 'OTHER';\n    index: number;\n    safetyRatings?: Array<{\n      category: string;\n      probability: string;\n    }>;\n  }>;\n  usageMetadata?: {\n    promptTokenCount: number;\n    candidatesTokenCount: number;\n    totalTokenCount: number;\n  };\n}\n\n/**\n * Google Gemini model pricing (per 1K tokens)\n */\nconst GEMINI_PRICING = {\n  'gemini-1.5-pro': { input: 0.00125, output: 0.005 },\n  'gemini-1.5-flash': { input: 0.000075, output: 0.0003 },\n  'gemini-pro': { input: 0.0005, output: 0.0015 },\n  'gemini-pro-vision': { input: 0.00025, output: 0.0005 }\n} as const;\n\n/**\n * Request validation schemas\n */\nconst geminiPartSchema = v.object({\n  text: v.string().optional(),\n  inlineData: v.object({\n    mimeType: v.string(),\n    data: v.string()\n  }).optional()\n});\n\nconst geminiContentSchema = v.object({\n  role: v.string().enum('user', 'model'),\n  parts: v.array(geminiPartSchema)\n});\n\nconst geminiRequestSchema = v.object({\n  contents: v.array(geminiContentSchema),\n  generationConfig: v.object({\n    temperature: v.number().min(0).max(1).optional(),\n    topP: v.number().min(0).max(1).optional(),\n    topK: v.number().int().min(1).optional(),\n    maxOutputTokens: v.number().int().min(1).optional(),\n    stopSequences: v.array(v.string()).optional()\n  }).optional(),\n  safetySettings: v.array(v.object({\n    category: v.string(),\n    threshold: v.string()\n  })).optional()\n});\n\n/**\n * Native Google Gemini Provider\n */\nexport class GoogleProvider extends BaseProvider {\n  private client: HTTPClient;\n  private apiKey: string;\n\n  constructor(config: ProviderConfig) {\n    super('google', config);\n    \n    if (!config.apiKey) {\n      throw new Error('Google API key is required');\n    }\n\n    this.apiKey = config.apiKey;\n    this.client = createHTTPClient({\n      baseURL: config.baseURL || 'https://generativelanguage.googleapis.com/v1beta',\n      timeout: config.timeout || 30000\n    });\n  }\n\n  getCapabilities(): ProviderCapabilities {\n    return {\n      chatCompletion: true,\n      streamingCompletion: true,\n      functionCalling: false, // Not yet implemented in this version\n      imageGeneration: false,\n      imageAnalysis: true,\n      jsonMode: false,\n      systemMessages: false, // Gemini doesn't have system messages\n      toolUse: false, // Not yet implemented\n      multipleMessages: true,\n      maxContextTokens: this.getContextLimit(),\n      supportedModels: this.getAvailableModels()\n    };\n  }\n\n  validateModel(model: string): boolean {\n    return this.getAvailableModels().includes(model);\n  }\n\n  getAvailableModels(): string[] {\n    return [\n      'gemini-1.5-pro',\n      'gemini-1.5-flash',\n      'gemini-pro',\n      'gemini-pro-vision'\n    ];\n  }\n\n  estimateCost(request: ChatCompletionRequest): number {\n    const model = request.model as keyof typeof GEMINI_PRICING;\n    const pricing = GEMINI_PRICING[model];\n    \n    if (!pricing) {\n      return 0; // Unknown model\n    }\n\n    // Rough token estimation: ~4 characters per token\n    const inputText = request.messages.map(m => \n      typeof m.content === 'string' ? m.content : JSON.stringify(m.content)\n    ).join(' ');\n    const estimatedInputTokens = Math.ceil(inputText.length / 4);\n    const estimatedOutputTokens = request.max_tokens || 1000;\n\n    return (estimatedInputTokens * pricing.input / 1000) + \n           (estimatedOutputTokens * pricing.output / 1000);\n  }\n\n  async chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse> {\n    const requestId = this.generateRequestId();\n    const startTime = Date.now();\n    \n    try {\n      // Validate and transform request\n      const geminiRequest = this.transformRequest(request);\n      \n      // Make API call\n      const url = `/models/${request.model}:generateContent?key=${this.apiKey}`;\n      const response = await this.executeWithRetry(\n        () => this.client.post<GeminiResponse>(url, geminiRequest),\n        { requestId, operation: 'chat_completion' }\n      );\n\n      // Transform response to unified format\n      return this.transformResponse(\n        response.data,\n        request,\n        this.createRequestMetrics(requestId, request.model, startTime)\n      );\n    } catch (error) {\n      throw this.handleError(error, requestId);\n    }\n  }\n\n  async *streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const requestId = this.generateRequestId();\n    \n    try {\n      // Validate and transform request\n      const geminiRequest = this.transformRequest(request);\n      \n      // Start streaming request\n      const url = `/models/${request.model}:streamGenerateContent?key=${this.apiKey}`;\n      const stream = this.client.stream({\n        url,\n        method: 'POST',\n        body: geminiRequest\n      });\n\n      for await (const chunk of stream) {\n        // Parse streaming response\n        const lines = chunk.split('\\n').filter(line => line.trim());\n        \n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            \n            if (data === '[DONE]') {\n              return;\n            }\n            \n            try {\n              const parsed = JSON.parse(data) as GeminiResponse;\n              const transformedChunk = this.transformStreamChunk(parsed, request);\n              \n              if (transformedChunk) {\n                yield transformedChunk;\n              }\n            } catch (parseError) {\n              // Skip invalid JSON chunks\n              continue;\n            }\n          }\n        }\n      }\n    } catch (error) {\n      throw this.handleError(error, requestId);\n    }\n  }\n\n  protected transformResponse(\n    response: GeminiResponse,\n    request: ChatCompletionRequest,\n    metrics: Partial<any>\n  ): ChatCompletionResponse {\n    const candidate = response.candidates[0];\n    if (!candidate) {\n      throw new Error('No response candidate from Gemini');\n    }\n\n    const usage: Usage = {\n      prompt_tokens: response.usageMetadata?.promptTokenCount || 0,\n      completion_tokens: response.usageMetadata?.candidatesTokenCount || 0,\n      total_tokens: response.usageMetadata?.totalTokenCount || 0,\n      estimated_cost: this.calculateActualCost(response.usageMetadata, request.model)\n    };\n\n    const content = candidate.content.parts\n      .map(part => part.text)\n      .join('');\n\n    return {\n      id: `gemini_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      object: 'chat.completion',\n      created: Math.floor(Date.now() / 1000),\n      model: request.model,\n      provider: 'google',\n      choices: [{\n        index: 0,\n        message: {\n          role: 'assistant',\n          content\n        },\n        finish_reason: this.mapFinishReason(candidate.finishReason)\n      }],\n      usage\n    };\n  }\n\n  protected transformStreamChunk(\n    response: GeminiResponse,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null {\n    const candidate = response.candidates?.[0];\n    if (!candidate) {\n      return null;\n    }\n\n    const content = candidate.content?.parts?.[0]?.text || '';\n    \n    return {\n      id: `gemini_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      object: 'chat.completion.chunk',\n      created: Math.floor(Date.now() / 1000),\n      model: request.model,\n      provider: 'google',\n      choices: [{\n        index: 0,\n        delta: {\n          content\n        },\n        finish_reason: candidate.finishReason ? this.mapFinishReason(candidate.finishReason) : null\n      }],\n      usage: response.usageMetadata ? {\n        prompt_tokens: response.usageMetadata.promptTokenCount,\n        completion_tokens: response.usageMetadata.candidatesTokenCount,\n        total_tokens: response.usageMetadata.totalTokenCount,\n        estimated_cost: this.calculateActualCost(response.usageMetadata, request.model)\n      } : undefined\n    };\n  }\n\n  protected validateApiKey(apiKey: string): boolean {\n    return /^AIza[0-9A-Za-z\\-_]{35}$/.test(apiKey);\n  }\n\n  protected getAuthHeader(apiKey: string): string {\n    return apiKey; // Google uses query parameter authentication\n  }\n\n  protected async testConnection(): Promise<void> {\n    try {\n      const testRequest: GeminiRequest = {\n        contents: [{\n          role: 'user',\n          parts: [{ text: 'Hi' }]\n        }]\n      };\n      \n      const url = `/models/${this.config.model || 'gemini-pro'}:generateContent?key=${this.apiKey}`;\n      await this.client.post(url, testRequest);\n    } catch (error) {\n      if (error instanceof HTTPError && error.status === 401) {\n        throw new Error('Invalid Google API key');\n      }\n      throw error;\n    }\n  }\n\n  private transformRequest(request: ChatCompletionRequest): GeminiRequest {\n    try {\n      // Filter out system messages as Gemini doesn't support them\n      const filteredMessages = request.messages.filter(m => m.role !== 'system');\n      \n      // Convert messages to Gemini format\n      const contents: GeminiContent[] = filteredMessages.map(msg => ({\n        role: msg.role === 'assistant' ? 'model' : 'user',\n        parts: this.transformMessageContent(msg)\n      }));\n\n      const geminiRequest: GeminiRequest = {\n        contents,\n        generationConfig: {\n          ...(request.temperature !== undefined && { temperature: request.temperature }),\n          ...(request.top_p !== undefined && { topP: request.top_p }),\n          ...(request.max_tokens !== undefined && { maxOutputTokens: request.max_tokens }),\n          ...(request.stop && { \n            stopSequences: Array.isArray(request.stop) ? request.stop : [request.stop] \n          })\n        }\n      };\n\n      // Validate request\n      return parse(geminiRequestSchema, geminiRequest);\n    } catch (error) {\n      if (error instanceof ValidationError) {\n        throw new Error(`Invalid request: ${error.message}`);\n      }\n      throw error;\n    }\n  }\n\n  private transformMessageContent(message: Message): Array<{ text?: string; inlineData?: { mimeType: string; data: string } }> {\n    if (typeof message.content === 'string') {\n      return [{ text: message.content }];\n    }\n\n    // Handle multimodal content (text + images)\n    return message.content.map(content => {\n      if (content.type === 'text') {\n        return { text: content.text };\n      } else if (content.type === 'image_url') {\n        // Extract base64 data from data URL\n        const dataUrl = content.image_url?.url || '';\n        const [header, data] = dataUrl.split(',');\n        const mimeType = header.match(/data:([^;]+)/)?.[1] || 'image/jpeg';\n        \n        return {\n          inlineData: {\n            mimeType,\n            data: data || ''\n          }\n        };\n      }\n      \n      // Fallback for other content types\n      return { text: JSON.stringify(content) };\n    });\n  }\n\n  private mapFinishReason(finishReason: string): 'stop' | 'length' | 'content_filter' | null {\n    const reasonMap: Record<string, 'stop' | 'length' | 'content_filter'> = {\n      'STOP': 'stop',\n      'MAX_TOKENS': 'length',\n      'SAFETY': 'content_filter',\n      'RECITATION': 'content_filter',\n      'OTHER': 'stop'\n    };\n    return reasonMap[finishReason] || 'stop';\n  }\n\n  private calculateActualCost(\n    usageMetadata: { promptTokenCount: number; candidatesTokenCount: number } | undefined,\n    model: string\n  ): number {\n    if (!usageMetadata) return 0;\n    \n    const modelKey = model as keyof typeof GEMINI_PRICING;\n    const pricing = GEMINI_PRICING[modelKey];\n    \n    if (!pricing) {\n      return 0;\n    }\n\n    return (usageMetadata.promptTokenCount * pricing.input / 1000) + \n           (usageMetadata.candidatesTokenCount * pricing.output / 1000);\n  }\n\n  private getContextLimit(): number {\n    const model = this.config.model;\n    \n    switch (model) {\n      case 'gemini-1.5-pro':\n        return 1000000; // 1M tokens\n      case 'gemini-1.5-flash':\n        return 1000000; // 1M tokens\n      case 'gemini-pro':\n        return 30720;\n      case 'gemini-pro-vision':\n        return 12288;\n      default:\n        return 30720;\n    }\n  }\n\n  private handleError(error: unknown, requestId: string): Error {\n    if (error instanceof HTTPError) {\n      switch (error.status) {\n        case 400:\n          return new Error(`Invalid request: ${error.data?.error?.message || error.statusText}`);\n        case 401:\n          return new Error('Invalid Google API key');\n        case 429:\n          return new Error('Google API rate limit exceeded');\n        case 500:\n        case 502:\n        case 503:\n          return new Error('Google API service temporarily unavailable');\n        default:\n          return new Error(`Google API error: ${error.message}`);\n      }\n    }\n    \n    if (error instanceof Error) {\n      return error;\n    }\n    \n    return new Error(`Unknown error in Google request ${requestId}`);\n  }\n}\n\n/**\n * Create Google provider instance\n */\nexport function createGoogleProvider(config: Omit<ProviderConfig, 'provider'>): GoogleProvider {\n  return new GoogleProvider({ ...config, provider: 'google' });\n}\n\n/**\n * Google provider factory\n */\nexport const googleFactory = {\n  create: (config: ProviderConfig) => new GoogleProvider(config),\n  supports: (provider: ApiProvider) => provider === 'google'\n};\n\n/**\n * Convenience function to create Gemini provider\n */\nexport function gemini(options: Omit<ProviderConfig, 'provider'> = {}): ProviderConfig {\n  return {\n    provider: 'google',\n    model: options.model || 'gemini-1.5-flash', // Default to Flash for cost optimization\n    ...options\n  };\n}","/**\n * AI Providers Module - Native Zero-Dependency Exports\n * \n * Unified exports for all native AI provider implementations\n * Eliminates 263KB+ of external dependencies (openai: 186KB, @anthropic-ai/sdk: 50KB, axios: 15KB, zod: 12KB)\n */\n\n// Base provider exports\nexport { BaseProvider, ProviderRegistry, providerRegistry, type ProviderFactory } from './base';\n\n// Native provider factories\nimport { openAIFactory } from './openai';\nimport { anthropicFactory } from './claude';\nimport { googleFactory } from './google';\nimport { providerRegistry } from './base';\n\n// OpenAI provider exports (native implementation)\nexport { OpenAIProvider, createOpenAIProvider, openAIFactory } from './openai';\n\n// Anthropic/Claude provider exports (native implementation)\nexport { AnthropicProvider, createAnthropicProvider, anthropicFactory, claude } from './claude';\n\n// Google Gemini provider exports (native implementation)\nexport { GoogleProvider, createGoogleProvider, googleFactory, gemini } from './google';\n\n// Register all native providers\nproviderRegistry.register('openai', openAIFactory);\nproviderRegistry.register('anthropic', anthropicFactory);\nproviderRegistry.register('claude', anthropicFactory); // Alias for anthropic\nproviderRegistry.register('google', googleFactory);\n\n// Re-export types for external use\nexport type {\n  BaseProviderOptions\n} from './base';\n\n/**\n * Provider convenience functions\n */\nexport const providers = {\n  openai: (config: any) => ({ provider: 'openai', model: 'gpt-4o', ...config }),\n  claude: (config: any) => ({ provider: 'anthropic', model: 'claude-3-5-sonnet-20241022', ...config }),\n  gemini: (config: any) => ({ provider: 'google', model: 'gemini-1.5-flash', ...config })\n} as const;\n\n/**\n * Individual provider factory functions\n */\nexport const openai = (config: any) => ({ provider: 'openai', model: 'gpt-4o', ...config });\n\n/**\n * Get all registered provider types\n */\nexport function getSupportedProviders() {\n  return providerRegistry.getRegisteredProviders();\n}\n\n/**\n * Check if a provider is supported\n */\nexport function isProviderSupported(provider: string) {\n  return providerRegistry.supports(provider as any);\n}\n\n/**\n * Health check all providers\n */\nexport async function checkProviderHealth() {\n  return providerRegistry.healthCheckAll();\n}","/**\n * AI Marketplace SDK - Main Entry Point\n * \n * Unified TypeScript SDK for AI App Marketplace with tree-shakable exports\n * Supports OpenAI, Claude, and other AI providers with intelligent routing\n * \n * @example\n * ```typescript\n * import { Chat, openai } from '@ai-marketplace/sdk';\n * \n * const chat = new Chat({\n *   provider: openai({ model: 'gpt-4o' })\n * });\n * \n * const response = await chat.ask('Hello, world!');\n * ```\n */\n\n// Core SDK exports\nexport { Chat } from './chat';\n\n// Enhanced Orchestration Engine (our competitive moat!)\nexport { \n  AIService, \n  AIOrchestrator, \n  StrategyEngine, \n  ProviderSelector,\n  ai \n} from './orchestration';\n\n// Provider exports for tree-shaking\nexport { \n  providers,\n  openai,\n  claude,\n  getSupportedProviders,\n  isProviderSupported,\n  checkProviderHealth\n} from './providers';\n\n// Type exports\nexport type {\n  // Core types\n  ApiProvider,\n  SDKConfig,\n  Message,\n  Tool,\n  \n  // Request/Response types\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ImageGenerationRequest,\n  ImageGenerationResponse,\n  \n  // Provider types\n  ProviderConfig,\n  ProviderCapabilities,\n  ProviderConstraints,\n  ProviderSelection,\n  \n  // Usage and metrics\n  Usage,\n  UsageMetrics,\n  RequestMetrics,\n  \n  // Error types\n  SDKError,\n  RateLimitError,\n  AuthenticationError,\n  ValidationError,\n  \n  // Utility types\n  DeepPartial,\n  RequiredFields,\n  Optional\n} from './types';\n\n// Enhanced Orchestration Types\nexport type {\n  AIRequest,\n  AIResult,\n  WorkflowStep,\n  WorkflowResult\n} from './orchestration';\n\n// Error exports\nexport {\n  BaseSDKError,\n  SDKRateLimitError,\n  SDKAuthenticationError,\n  SDKValidationError,\n  ErrorFactory,\n  RetryHandler,\n  CircuitBreaker,\n  withTimeout,\n  sanitizeErrorForLogging\n} from './utils/errors';\n\n// Re-export type guards from types\nexport {\n  isSDKError,\n  isRateLimitError,\n  isAuthenticationError,\n  isValidationError\n} from './types';\n\n// Provider registry (for advanced usage)\nexport { providerRegistry, BaseProvider } from './providers/base';\n\n/**\n * SDK Version\n */\nexport const VERSION = '0.1.0';\n\n/**\n * Default SDK Configuration\n */\nexport const DEFAULT_CONFIG = {\n  enableUsageTracking: true,\n  enableRetries: true,\n  maxRetries: 3,\n  retryDelay: 1000,\n  timeout: 30000,\n  debug: false\n};\n\n/**\n * Initialize SDK with global configuration\n */\nexport class SDK {\n  private static instance: SDK | null = null;\n  private config: any;\n\n  private constructor(config: any) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  /**\n   * Initialize SDK singleton\n   */\n  static init(config: any): SDK {\n    if (SDK.instance) {\n      throw new Error('SDK already initialized. Use SDK.getInstance() to access the initialized instance.');\n    }\n    SDK.instance = new SDK(config);\n    return SDK.instance;\n  }\n\n  /**\n   * Get SDK singleton instance\n   */\n  static getInstance(): SDK {\n    if (!SDK.instance) {\n      throw new Error('SDK not initialized. Call SDK.init(config) first.');\n    }\n    return SDK.instance;\n  }\n\n  /**\n   * Create Chat instance with SDK config\n   */\n  createChat(options: any = {}): any {\n    const { Chat } = require('./chat');\n    return new Chat({\n      provider: this.config.defaultProvider ? {\n        provider: this.config.defaultProvider,\n        model: this.config.defaultModel || 'gpt-4o',\n        apiKey: this.config.apiKey,\n        timeout: this.config.timeout,\n        maxRetries: this.config.maxRetries\n      } : undefined,\n      enableAutoRetry: this.config.enableRetries,\n      trackUsage: this.config.enableUsageTracking,\n      ...options\n    });\n  }\n\n  /**\n   * Get SDK configuration\n   */\n  getConfig(): any {\n    const { apiKey, ...safeConfig } = this.config;\n    return safeConfig;\n  }\n\n  /**\n   * Update SDK configuration\n   */\n  updateConfig(updates: any): void {\n    this.config = { ...this.config, ...updates };\n  }\n\n  /**\n   * Health check all providers\n   */\n  async healthCheck(): Promise<{\n    sdk: { version: string; config: any };\n    providers: any;\n    timestamp: string;\n  }> {\n    const providerHealth = await (await import('./providers')).checkProviderHealth();\n    \n    return {\n      sdk: {\n        version: VERSION,\n        config: this.getConfig()\n      },\n      providers: providerHealth,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Reset SDK instance (for testing)\n   */\n  static reset(): void {\n    SDK.instance = null;\n  }\n}\n\n/**\n * Quick initialization helper\n */\nexport function initSDK(config: any): SDK {\n  return SDK.init(config);\n}\n\n/**\n * Default export for CommonJS compatibility\n */\nconst defaultExports = {\n  SDK,\n  initSDK,\n  VERSION,\n  DEFAULT_CONFIG\n};\n\nexport default defaultExports;","/**\n * AI Orchestration Engine - Multi-Provider Intelligence\n * \n * Provides intelligent routing, cost optimization, and quality assurance\n * across multiple AI providers with confidence scoring and fallback strategies.\n * \n * This is our unique competitive moat - no other platform offers this level\n * of sophisticated multi-provider orchestration.\n */\n\nimport { ApiProvider, ChatCompletionRequest, ChatCompletionResponse } from '../types';\nimport { providers } from '../providers';\n\n// ============================================================================\n// Core Orchestration Types\n// ============================================================================\n\nexport interface AIRequest extends ChatCompletionRequest {\n  // Strategy configuration\n  strategy?: 'cost_optimized' | 'performance' | 'privacy_first' | 'balanced';\n  \n  // Requirements and constraints\n  requirements?: {\n    reasoning?: boolean;      // Needs advanced reasoning (o1, Claude)\n    vision?: boolean;         // Needs vision capabilities\n    tools?: boolean;          // Needs function calling\n    coding?: boolean;         // Needs code generation\n    creative?: boolean;       // Needs creative writing\n    analysis?: boolean;       // Needs analytical thinking\n  };\n  \n  constraints?: {\n    maxCost?: number;         // Maximum cost per request\n    maxLatency?: number;      // Maximum latency in ms\n    minConfidence?: number;   // Minimum confidence score (0-100)\n    excludeProviders?: ApiProvider[];\n    preferredProviders?: ApiProvider[];\n    privacyLevel?: 'public' | 'private' | 'hipaa';\n  };\n  \n  // Advanced options\n  validation?: {\n    enabled?: boolean;        // Enable cross-provider validation\n    providers?: ApiProvider[]; // Providers to use for validation\n    threshold?: number;       // Agreement threshold (0-100)\n  };\n}\n\nexport interface AIResult extends ChatCompletionResponse {\n  // Enhanced metadata\n  orchestration: {\n    strategy: string;\n    providersUsed: ApiProvider[];\n    fallbacksTriggered: boolean;\n    cacheHit: boolean;\n    processingTime: number;\n  };\n  \n  // Quality and confidence metrics\n  confidence: {\n    overall: number;          // 0-100 overall confidence\n    providerAgreement: number; // Cross-provider agreement\n    costEfficiency: number;   // Cost vs baseline\n    latencyScore: number;     // Latency vs target\n    qualityScore: number;     // Response quality estimate\n  };\n  \n  // Cost and usage tracking\n  cost: {\n    total: number;            // Total cost in USD\n    breakdown: Record<ApiProvider, number>;\n    savings: number;          // Savings vs most expensive option\n    efficiency: number;       // Cost efficiency score\n  };\n  \n  // Provider performance data\n  performance: {\n    latency: number;          // Total response time\n    tokensPerSecond: number;  // Processing speed\n    providerLatencies: Record<ApiProvider, number>;\n  };\n}\n\n// ============================================================================\n// Strategy Engine - Determines Optimal Execution Strategy\n// ============================================================================\n\nexport class StrategyEngine {\n  /**\n   * Analyze request and determine optimal strategy\n   */\n  determine(request: AIRequest): ExecutionStrategy {\n    const { requirements = {}, constraints = {}, strategy = 'balanced' } = request;\n    \n    // Analyze content complexity\n    const complexity = this.analyzeComplexity(request);\n    \n    // Determine provider capabilities needed\n    const capabilities = this.determineCapabilities(requirements);\n    \n    // Apply constraints and preferences\n    const candidateProviders = this.filterProviders(capabilities, constraints);\n    \n    // Create execution strategy\n    return {\n      strategy,\n      complexity,\n      capabilities,\n      providers: candidateProviders,\n      routing: this.determineRouting(strategy, candidateProviders, constraints),\n      fallbacks: this.determineFallbacks(candidateProviders, constraints),\n      validation: this.shouldValidate(request, complexity)\n    };\n  }\n  \n  private analyzeComplexity(request: AIRequest): 'simple' | 'moderate' | 'complex' {\n    const content = request.messages?.map(m => m.content).join(' ') || '';\n    const wordCount = content.split(' ').length;\n    \n    if (wordCount < 100) return 'simple';\n    if (wordCount < 500) return 'moderate';\n    return 'complex';\n  }\n  \n  private determineCapabilities(requirements: AIRequest['requirements'] = {}): ProviderCapability[] {\n    const capabilities: ProviderCapability[] = ['chat']; // Always need chat\n    \n    if (requirements.reasoning) capabilities.push('reasoning');\n    if (requirements.vision) capabilities.push('vision');\n    if (requirements.tools) capabilities.push('tools');\n    if (requirements.coding) capabilities.push('coding');\n    if (requirements.creative) capabilities.push('creative');\n    if (requirements.analysis) capabilities.push('analysis');\n    \n    return capabilities;\n  }\n  \n  private filterProviders(\n    capabilities: ProviderCapability[], \n    constraints: AIRequest['constraints'] = {}\n  ): ProviderCandidate[] {\n    const allProviders: ProviderCandidate[] = [\n      {\n        provider: 'openai',\n        model: 'gpt-4o',\n        capabilities: ['chat', 'vision', 'tools', 'coding', 'creative'],\n        costPerToken: 0.0025,\n        avgLatency: 2500,\n        qualityScore: 90,\n        privacyLevel: 'public'\n      },\n      {\n        provider: 'anthropic',\n        model: 'claude-3-5-sonnet-20241022',\n        capabilities: ['chat', 'reasoning', 'analysis', 'coding', 'tools'],\n        costPerToken: 0.003,\n        avgLatency: 3000,\n        qualityScore: 95,\n        privacyLevel: 'private'\n      },\n      {\n        provider: 'google',\n        model: 'gemini-1.5-pro',\n        capabilities: ['chat', 'vision', 'tools', 'analysis'],\n        costPerToken: 0.00125,\n        avgLatency: 2000,\n        qualityScore: 85,\n        privacyLevel: 'public'\n      },\n      {\n        provider: 'local',\n        model: 'llama-3.2-3b',\n        capabilities: ['chat', 'coding'],\n        costPerToken: 0,\n        avgLatency: 8000,\n        qualityScore: 70,\n        privacyLevel: 'hipaa'\n      }\n    ];\n    \n    return allProviders.filter(p => {\n      // Check capabilities\n      const hasCapabilities = capabilities.every(cap => p.capabilities.includes(cap));\n      if (!hasCapabilities) return false;\n      \n      // Check exclusions\n      if (constraints.excludeProviders?.includes(p.provider)) return false;\n      \n      // Check privacy level\n      if (constraints.privacyLevel === 'hipaa' && p.privacyLevel !== 'hipaa') return false;\n      \n      // Check cost constraints\n      if (constraints.maxCost && p.costPerToken * 1000 > constraints.maxCost) return false;\n      \n      // Check latency constraints\n      if (constraints.maxLatency && p.avgLatency > constraints.maxLatency) return false;\n      \n      return true;\n    });\n  }\n  \n  private determineRouting(\n    strategy: string,\n    candidates: ProviderCandidate[],\n    constraints: AIRequest['constraints'] = {}\n  ): ProviderRanking[] {\n    return candidates.map(candidate => {\n      let score = 0;\n      \n      switch (strategy) {\n        case 'cost_optimized':\n          score = 100 - (candidate.costPerToken * 10000); // Lower cost = higher score\n          break;\n        case 'performance':\n          score = 100 - (candidate.avgLatency / 100); // Lower latency = higher score\n          break;\n        case 'privacy_first':\n          score = candidate.privacyLevel === 'hipaa' ? 100 : \n                 candidate.privacyLevel === 'private' ? 80 : 60;\n          break;\n        case 'balanced':\n        default:\n          score = (candidate.qualityScore * 0.4) + \n                 ((100 - candidate.costPerToken * 10000) * 0.3) +\n                 ((100 - candidate.avgLatency / 100) * 0.3);\n          break;\n      }\n      \n      // Apply preferences\n      if (constraints.preferredProviders?.includes(candidate.provider)) {\n        score += 20;\n      }\n      \n      return {\n        ...candidate,\n        score: Math.max(0, Math.min(100, score))\n      };\n    }).sort((a, b) => b.score - a.score);\n  }\n  \n  private determineFallbacks(\n    candidates: ProviderCandidate[],\n    constraints: AIRequest['constraints'] = {}\n  ): ProviderCandidate[] {\n    // Return all candidates except the primary (first) one as fallbacks\n    return candidates.slice(1);\n  }\n  \n  private shouldValidate(request: AIRequest, complexity: string): boolean {\n    // Enable validation for complex requests or when explicitly requested\n    return request.validation?.enabled || complexity === 'complex';\n  }\n}\n\n// ============================================================================\n// Provider Selector - Ranks and Selects Optimal Providers\n// ============================================================================\n\nexport class ProviderSelector {\n  /**\n   * Rank providers based on execution strategy\n   */\n  rank(strategy: ExecutionStrategy): ProviderRanking[] {\n    return strategy.routing;\n  }\n  \n  /**\n   * Select primary provider for request\n   */\n  selectPrimary(rankings: ProviderRanking[]): ProviderRanking {\n    if (rankings.length === 0) {\n      throw new Error('No suitable providers available for request');\n    }\n    \n    return rankings[0];\n  }\n  \n  /**\n   * Get fallback providers in order of preference\n   */\n  getFallbacks(rankings: ProviderRanking[]): ProviderRanking[] {\n    return rankings.slice(1);\n  }\n}\n\n// ============================================================================\n// Orchestrator - Executes Requests with Intelligence\n// ============================================================================\n\nexport class AIOrchestrator {\n  private strategyEngine: StrategyEngine;\n  private providerSelector: ProviderSelector;\n  private cache: Map<string, AIResult> = new Map();\n  \n  constructor() {\n    this.strategyEngine = new StrategyEngine();\n    this.providerSelector = new ProviderSelector();\n  }\n  \n  /**\n   * Execute AI request with intelligent orchestration\n   */\n  async execute(request: AIRequest): Promise<AIResult> {\n    const startTime = Date.now();\n    \n    // 1. Check cache first\n    const cacheKey = this.generateCacheKey(request);\n    const cached = this.cache.get(cacheKey);\n    if (cached) {\n      return {\n        ...cached,\n        orchestration: {\n          ...cached.orchestration,\n          cacheHit: true\n        }\n      };\n    }\n    \n    // 2. Determine execution strategy\n    const strategy = this.strategyEngine.determine(request);\n    \n    // 3. Rank and select providers\n    const rankings = this.providerSelector.rank(strategy);\n    const primary = this.providerSelector.selectPrimary(rankings);\n    const fallbacks = this.providerSelector.getFallbacks(rankings);\n    \n    // 4. Execute with fallback handling\n    const result = await this.executeWithFallbacks(request, primary, fallbacks);\n    \n    // 5. Add orchestration metadata\n    const orchestratedResult: AIResult = {\n      ...result,\n      orchestration: {\n        strategy: request.strategy || 'balanced',\n        providersUsed: [primary.provider],\n        fallbacksTriggered: false, // TODO: Track this properly\n        cacheHit: false,\n        processingTime: Date.now() - startTime\n      },\n      confidence: await this.calculateConfidence(request, result, strategy),\n      cost: this.calculateCost(result, primary),\n      performance: this.calculatePerformance(result, primary, startTime)\n    };\n    \n    // 6. Cache result\n    this.cache.set(cacheKey, orchestratedResult);\n    \n    return orchestratedResult;\n  }\n  \n  private async executeWithFallbacks(\n    request: AIRequest,\n    primary: ProviderRanking,\n    fallbacks: ProviderRanking[]\n  ): Promise<ChatCompletionResponse> {\n    try {\n      // Try primary provider\n      const provider = providers[primary.provider];\n      return await provider.complete(request);\n    } catch (error) {\n      // Try fallbacks in order\n      for (const fallback of fallbacks) {\n        try {\n          const provider = providers[fallback.provider];\n          return await provider.complete(request);\n        } catch (fallbackError) {\n          console.warn(`Fallback provider ${fallback.provider} failed:`, fallbackError);\n        }\n      }\n      \n      throw new Error(`All providers failed. Primary: ${primary.provider}, Fallbacks: ${fallbacks.map(f => f.provider).join(', ')}`);\n    }\n  }\n  \n  private async calculateConfidence(\n    request: AIRequest,\n    result: ChatCompletionResponse,\n    strategy: ExecutionStrategy\n  ): Promise<AIResult['confidence']> {\n    // TODO: Implement sophisticated confidence calculation\n    return {\n      overall: 85,\n      providerAgreement: 90,\n      costEfficiency: 75,\n      latencyScore: 80,\n      qualityScore: 88\n    };\n  }\n  \n  private calculateCost(\n    result: ChatCompletionResponse,\n    provider: ProviderRanking\n  ): AIResult['cost'] {\n    const inputTokens = result.usage?.prompt_tokens || 0;\n    const outputTokens = result.usage?.completion_tokens || 0;\n    const totalCost = (inputTokens + outputTokens) * provider.costPerToken;\n    \n    return {\n      total: totalCost,\n      breakdown: { [provider.provider]: totalCost },\n      savings: 0, // TODO: Calculate vs most expensive option\n      efficiency: 85 // TODO: Calculate efficiency score\n    };\n  }\n  \n  private calculatePerformance(\n    result: ChatCompletionResponse,\n    provider: ProviderRanking,\n    startTime: number\n  ): AIResult['performance'] {\n    const totalTime = Date.now() - startTime;\n    const totalTokens = (result.usage?.completion_tokens || 0);\n    \n    return {\n      latency: totalTime,\n      tokensPerSecond: totalTokens / (totalTime / 1000),\n      providerLatencies: { [provider.provider]: totalTime }\n    };\n  }\n  \n  private generateCacheKey(request: AIRequest): string {\n    // Generate a cache key based on request content and constraints\n    const { messages, strategy, requirements, constraints } = request;\n    const keyData = { messages, strategy, requirements, constraints };\n    return Buffer.from(JSON.stringify(keyData)).toString('base64').slice(0, 32);\n  }\n}\n\n// ============================================================================\n// Public API - The Enhanced AIService\n// ============================================================================\n\nexport class AIService {\n  private orchestrator: AIOrchestrator;\n  \n  constructor() {\n    this.orchestrator = new AIOrchestrator();\n  }\n  \n  /**\n   * Complete an AI request with intelligent orchestration\n   */\n  async complete(request: AIRequest): Promise<AIResult> {\n    return this.orchestrator.execute(request);\n  }\n  \n  /**\n   * Simple completion with strategy shorthand\n   */\n  async ask(\n    prompt: string,\n    options: Partial<AIRequest> = {}\n  ): Promise<AIResult> {\n    return this.complete({\n      messages: [{ role: 'user', content: prompt }],\n      ...options\n    });\n  }\n  \n  /**\n   * Multi-step workflow execution\n   */\n  async workflow(steps: WorkflowStep[]): Promise<WorkflowResult> {\n    const results: Record<string, AIResult> = {};\n    \n    for (const step of steps) {\n      // Replace template variables from previous steps\n      const prompt = this.replaceTemplateVars(step.prompt, results);\n      \n      const result = await this.complete({\n        messages: [{ role: 'user', content: prompt }],\n        strategy: step.strategy,\n        requirements: step.requirements,\n        constraints: step.constraints\n      });\n      \n      results[step.name] = result;\n    }\n    \n    return { results };\n  }\n  \n  private replaceTemplateVars(prompt: string, results: Record<string, AIResult>): string {\n    return prompt.replace(/\\{\\{\\s*(\\w+)\\.output\\s*\\}\\}/g, (match, stepName) => {\n      const stepResult = results[stepName];\n      return stepResult?.choices?.[0]?.message?.content || match;\n    });\n  }\n}\n\n// ============================================================================\n// Supporting Types\n// ============================================================================\n\ntype ProviderCapability = 'chat' | 'reasoning' | 'vision' | 'tools' | 'coding' | 'creative' | 'analysis';\n\ninterface ProviderCandidate {\n  provider: ApiProvider;\n  model: string;\n  capabilities: ProviderCapability[];\n  costPerToken: number;\n  avgLatency: number;\n  qualityScore: number;\n  privacyLevel: 'public' | 'private' | 'hipaa';\n}\n\ninterface ProviderRanking extends ProviderCandidate {\n  score: number;\n}\n\ninterface ExecutionStrategy {\n  strategy: string;\n  complexity: 'simple' | 'moderate' | 'complex';\n  capabilities: ProviderCapability[];\n  providers: ProviderCandidate[];\n  routing: ProviderRanking[];\n  fallbacks: ProviderCandidate[];\n  validation: boolean;\n}\n\nexport interface WorkflowStep {\n  name: string;\n  prompt: string;\n  strategy?: AIRequest['strategy'];\n  requirements?: AIRequest['requirements'];\n  constraints?: AIRequest['constraints'];\n}\n\nexport interface WorkflowResult {\n  results: Record<string, AIResult>;\n}\n\n// ============================================================================\n// Default Export - Ready to Use\n// ============================================================================\n\nexport const ai = new AIService();\nexport default AIService;","/**\n * Core Types for AI Marketplace SDK\n * \n * Unified types supporting OpenAI and Claude providers with tree-shakable exports\n */\n\n// Base Types\nexport type ApiProvider = 'openai' | 'anthropic' | 'claude' | 'google' | 'azure' | 'cohere' | 'huggingface';\n\nexport interface BaseConfig {\n  apiKey?: string;\n  baseURL?: string;\n  timeout?: number;\n  maxRetries?: number;\n  retryDelay?: number;\n  userAgent?: string;\n}\n\n// Message Types - Unified interface for all providers\nexport interface Message {\n  role: 'system' | 'user' | 'assistant' | 'tool';\n  content: string | MessageContent[];\n  name?: string;\n  tool_calls?: ToolCall[];\n  tool_call_id?: string;\n}\n\nexport interface MessageContent {\n  type: 'text' | 'image_url';\n  text?: string;\n  image_url?: {\n    url: string;\n    detail?: 'low' | 'high' | 'auto';\n  };\n}\n\nexport interface ToolCall {\n  id: string;\n  type: 'function';\n  function: {\n    name: string;\n    arguments: string;\n  };\n}\n\n// Chat Completion Types\nexport interface ChatCompletionRequest {\n  messages: Message[];\n  model?: string;\n  temperature?: number;\n  max_tokens?: number;\n  top_p?: number;\n  frequency_penalty?: number;\n  presence_penalty?: number;\n  stop?: string | string[];\n  stream?: boolean;\n  tools?: Tool[];\n  tool_choice?: 'none' | 'auto' | { type: 'function'; function: { name: string } };\n  user?: string;\n}\n\nexport interface Tool {\n  type: 'function';\n  function: {\n    name: string;\n    description?: string;\n    parameters?: Record<string, any>;\n  };\n}\n\nexport interface ChatCompletionResponse {\n  id: string;\n  object: 'chat.completion';\n  created: number;\n  model: string;\n  provider: ApiProvider;\n  choices: ChatChoice[];\n  usage: Usage;\n  system_fingerprint?: string;\n}\n\nexport interface ChatChoice {\n  index: number;\n  message: Message;\n  finish_reason: 'stop' | 'length' | 'tool_calls' | 'content_filter' | null;\n  logprobs?: ChatCompletionLogprobs | null;\n}\n\nexport interface ChatCompletionLogprobs {\n  content: ChatCompletionTokenLogprob[] | null;\n}\n\nexport interface ChatCompletionTokenLogprob {\n  token: string;\n  logprob: number;\n  bytes: number[] | null;\n  top_logprobs: TopLogprob[];\n}\n\nexport interface TopLogprob {\n  token: string;\n  logprob: number;\n  bytes: number[] | null;\n}\n\nexport interface Usage {\n  prompt_tokens: number;\n  completion_tokens: number;\n  total_tokens: number;\n  estimated_cost: number;\n}\n\n// Streaming Types\nexport interface ChatCompletionChunk {\n  id: string;\n  object: 'chat.completion.chunk';\n  created: number;\n  model: string;\n  provider: ApiProvider;\n  choices: ChatChunkChoice[];\n  usage?: Usage;\n}\n\nexport interface ChatChunkChoice {\n  index: number;\n  delta: {\n    role?: 'assistant';\n    content?: string;\n    tool_calls?: ToolCall[];\n  };\n  finish_reason: 'stop' | 'length' | 'tool_calls' | 'content_filter' | null;\n}\n\n// Image Generation Types\nexport interface ImageGenerationRequest {\n  prompt: string;\n  model?: string;\n  n?: number;\n  size?: '256x256' | '512x512' | '1024x1024' | '1792x1024' | '1024x1792';\n  quality?: 'standard' | 'hd';\n  style?: 'vivid' | 'natural';\n  response_format?: 'url' | 'b64_json';\n  user?: string;\n}\n\nexport interface ImageGenerationResponse {\n  created: number;\n  data: ImageData[];\n  provider: ApiProvider;\n  usage?: {\n    estimated_cost: number;\n  };\n}\n\nexport interface ImageData {\n  url?: string;\n  b64_json?: string;\n  revised_prompt?: string;\n}\n\n// Provider Configuration Types\nexport interface ProviderConfig extends BaseConfig {\n  provider: ApiProvider;\n  model: string;\n  defaultParams?: Record<string, any>;\n}\n\nexport interface ProviderCapabilities {\n  chatCompletion: boolean;\n  streamingCompletion: boolean;\n  functionCalling: boolean;\n  imageGeneration: boolean;\n  imageAnalysis: boolean;\n  jsonMode: boolean;\n  systemMessages: boolean;\n  toolUse: boolean;\n  multipleMessages: boolean;\n  maxContextTokens: number;\n  supportedModels: string[];\n}\n\n// Error Types\nexport interface SDKError extends Error {\n  code: string;\n  statusCode?: number;\n  provider?: ApiProvider;\n  requestId?: string;\n  details?: Record<string, any>;\n}\n\nexport interface RateLimitError extends SDKError {\n  code: 'RATE_LIMIT_EXCEEDED';\n  retryAfter?: number;\n  limitType: 'requests' | 'tokens' | 'cost';\n}\n\nexport interface AuthenticationError extends SDKError {\n  code: 'AUTHENTICATION_FAILED';\n  provider: ApiProvider;\n}\n\nexport interface ValidationError extends SDKError {\n  code: 'VALIDATION_ERROR';\n  field: string;\n  value: any;\n}\n\n// Provider Selection Types\nexport interface ProviderConstraints {\n  maxCost?: number;\n  maxLatency?: number;\n  qualityThreshold?: number;\n  requiredCapabilities?: (keyof ProviderCapabilities)[];\n  excludeProviders?: ApiProvider[];\n  preferredProviders?: ApiProvider[];\n}\n\nexport interface ProviderSelection {\n  provider: ApiProvider;\n  model: string;\n  estimatedCost: number;\n  estimatedLatency: number;\n  qualityScore: number;\n  reasoning: string;\n}\n\n// Usage Tracking Types\nexport interface UsageMetrics {\n  requests: number;\n  tokens: {\n    input: number;\n    output: number;\n    total: number;\n  };\n  cost: number;\n  latency: {\n    avg: number;\n    p95: number;\n    p99: number;\n  };\n  errors: {\n    total: number;\n    rate: number;\n    byCode: Record<string, number>;\n  };\n}\n\nexport interface RequestMetrics {\n  requestId: string;\n  provider: ApiProvider;\n  model: string;\n  startTime: number;\n  endTime: number;\n  tokens: Usage;\n  cost: number;\n  success: boolean;\n  error?: SDKError;\n}\n\n// SDK Configuration Types\nexport interface SDKConfig {\n  apiKey?: string;\n  baseURL?: string;\n  defaultProvider?: ApiProvider;\n  defaultModel?: string;\n  providers?: Record<ApiProvider, ProviderConfig>;\n  enableUsageTracking?: boolean;\n  enableRetries?: boolean;\n  maxRetries?: number;\n  retryDelay?: number;\n  timeout?: number;\n  userAgent?: string;\n  debug?: boolean;\n}\n\n// Model Information Types\nexport interface ModelInfo {\n  id: string;\n  provider: ApiProvider;\n  name: string;\n  description?: string;\n  contextWindow: number;\n  maxOutputTokens: number;\n  capabilities: ProviderCapabilities;\n  pricing: {\n    input: number; // per 1k tokens\n    output: number; // per 1k tokens\n  };\n  deprecated?: boolean;\n  deprecationDate?: string;\n}\n\n// Export utility types\nexport type DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n};\n\nexport type RequiredFields<T, K extends keyof T> = T & Required<Pick<T, K>>;\n\nexport type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\n// Type guards\nexport function isSDKError(error: any): error is SDKError {\n  return error && typeof error === 'object' && 'code' in error && typeof error.code === 'string';\n}\n\nexport function isRateLimitError(error: any): error is RateLimitError {\n  return isSDKError(error) && error.code === 'RATE_LIMIT_EXCEEDED';\n}\n\nexport function isAuthenticationError(error: any): error is AuthenticationError {\n  return isSDKError(error) && error.code === 'AUTHENTICATION_FAILED';\n}\n\nexport function isValidationError(error: any): error is ValidationError {\n  return isSDKError(error) && error.code === 'VALIDATION_ERROR';\n}\n\n// Constants\nexport const SUPPORTED_PROVIDERS: ApiProvider[] = [\n  'openai',\n  'anthropic',\n  'claude',\n  'google',\n  'azure',\n  'cohere',\n  'huggingface'\n];\n\nexport const DEFAULT_MODELS: Record<ApiProvider, string> = {\n  openai: 'gpt-4o',\n  anthropic: 'claude-3-5-sonnet-20241022',\n  claude: 'claude-3-5-sonnet-20241022',\n  google: 'gemini-pro',\n  azure: 'gpt-4',\n  cohere: 'command-r-plus',\n  huggingface: 'meta-llama/Llama-2-70b-chat-hf'\n};\n\nexport const PROVIDER_CAPABILITIES: Record<ApiProvider, ProviderCapabilities> = {\n  openai: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: true,\n    imageGeneration: true,\n    imageAnalysis: true,\n    jsonMode: true,\n    systemMessages: true,\n    toolUse: true,\n    multipleMessages: true,\n    maxContextTokens: 128000,\n    supportedModels: ['gpt-4o', 'gpt-4o-mini', 'gpt-4-turbo', 'gpt-4', 'gpt-3.5-turbo']\n  },\n  anthropic: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: true,\n    imageGeneration: false,\n    imageAnalysis: true,\n    jsonMode: false,\n    systemMessages: true,\n    toolUse: true,\n    multipleMessages: true,\n    maxContextTokens: 200000,\n    supportedModels: ['claude-3-5-sonnet-20241022', 'claude-3-5-haiku-20241022', 'claude-3-opus-20240229']\n  },\n  claude: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: true,\n    imageGeneration: false,\n    imageAnalysis: true,\n    jsonMode: false,\n    systemMessages: true,\n    toolUse: true,\n    multipleMessages: true,\n    maxContextTokens: 200000,\n    supportedModels: ['claude-3-5-sonnet-20241022', 'claude-3-5-haiku-20241022', 'claude-3-opus-20240229']\n  },\n  google: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: false,\n    imageGeneration: false,\n    imageAnalysis: true,\n    jsonMode: false,\n    systemMessages: false,\n    toolUse: false,\n    multipleMessages: true,\n    maxContextTokens: 1000000,\n    supportedModels: ['gemini-1.5-pro', 'gemini-1.5-flash', 'gemini-pro', 'gemini-pro-vision']\n  },\n  azure: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: true,\n    imageGeneration: true,\n    imageAnalysis: true,\n    jsonMode: true,\n    systemMessages: true,\n    toolUse: true,\n    multipleMessages: true,\n    maxContextTokens: 128000,\n    supportedModels: ['gpt-4', 'gpt-3.5-turbo']\n  },\n  cohere: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: true,\n    imageGeneration: false,\n    imageAnalysis: false,\n    jsonMode: false,\n    systemMessages: true,\n    toolUse: true,\n    multipleMessages: true,\n    maxContextTokens: 128000,\n    supportedModels: ['command-r-plus', 'command-r']\n  },\n  huggingface: {\n    chatCompletion: true,\n    streamingCompletion: true,\n    functionCalling: false,\n    imageGeneration: false,\n    imageAnalysis: false,\n    jsonMode: false,\n    systemMessages: true,\n    toolUse: false,\n    multipleMessages: true,\n    maxContextTokens: 4096,\n    supportedModels: ['meta-llama/Llama-2-70b-chat-hf']\n  }\n};"]}