{"version":3,"sources":["../src/utils/errors.ts","../src/providers/base.ts","../src/providers/openai.ts","../src/providers/claude.ts","../src/providers/index.ts","../src/chat/index.ts","../src/index.ts","../src/types/index.ts"],"names":["Chat","chat"],"mappings":"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","file":"index.mjs","sourcesContent":["/**\n * Error Handling and Retry Mechanisms\n * \n * Implements exponential backoff, circuit breaker patterns, and provider-specific error handling\n */\n\nimport type { \n  SDKError, \n  RateLimitError, \n  AuthenticationError, \n  ValidationError, \n  ApiProvider,\n  RequestMetrics \n} from '../types';\n\n/**\n * Custom SDK Error Classes\n */\nexport class BaseSDKError extends Error implements SDKError {\n  public readonly code: string;\n  public readonly statusCode?: number;\n  public readonly provider?: ApiProvider;\n  public readonly requestId?: string;\n  public readonly details?: Record<string, any>;\n\n  constructor(\n    message: string,\n    code: string,\n    options?: {\n      statusCode?: number;\n      provider?: ApiProvider;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, { cause: options?.cause });\n    this.name = this.constructor.name;\n    this.code = code;\n    this.statusCode = options?.statusCode;\n    this.provider = options?.provider;\n    this.requestId = options?.requestId;\n    this.details = options?.details;\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n}\n\nexport class SDKRateLimitError extends BaseSDKError implements RateLimitError {\n  public readonly code = 'RATE_LIMIT_EXCEEDED';\n  public readonly retryAfter?: number;\n  public readonly limitType: 'requests' | 'tokens' | 'cost';\n\n  constructor(\n    message: string,\n    limitType: 'requests' | 'tokens' | 'cost',\n    options?: {\n      retryAfter?: number;\n      statusCode?: number;\n      provider?: ApiProvider;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, 'RATE_LIMIT_EXCEEDED', options);\n    this.limitType = limitType;\n    this.retryAfter = options?.retryAfter;\n  }\n}\n\nexport class SDKAuthenticationError extends BaseSDKError implements AuthenticationError {\n  public readonly code = 'AUTHENTICATION_FAILED';\n  public readonly provider: ApiProvider;\n\n  constructor(\n    message: string,\n    provider: ApiProvider,\n    options?: {\n      statusCode?: number;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, 'AUTHENTICATION_FAILED', { ...options, provider });\n    this.provider = provider;\n  }\n}\n\nexport class SDKValidationError extends BaseSDKError implements ValidationError {\n  public readonly code = 'VALIDATION_ERROR';\n  public readonly field: string;\n  public readonly value: any;\n\n  constructor(\n    message: string,\n    field: string,\n    value: any,\n    options?: {\n      statusCode?: number;\n      provider?: ApiProvider;\n      requestId?: string;\n      details?: Record<string, any>;\n      cause?: Error;\n    }\n  ) {\n    super(message, 'VALIDATION_ERROR', options);\n    this.field = field;\n    this.value = value;\n  }\n}\n\n/**\n * Error Factory - Creates appropriate error types from provider responses\n */\nexport class ErrorFactory {\n  static fromProviderError(\n    error: any,\n    provider: ApiProvider,\n    requestId?: string\n  ): SDKError {\n    // OpenAI error handling\n    if (provider === 'openai') {\n      return this.fromOpenAIError(error, requestId);\n    }\n\n    // Claude error handling\n    if (provider === 'claude') {\n      return this.fromClaudeError(error, requestId);\n    }\n\n    // Generic error handling\n    return this.fromGenericError(error, provider, requestId);\n  }\n\n  private static fromOpenAIError(error: any, requestId?: string): SDKError {\n    const statusCode = error.status || error.statusCode || 500;\n    const message = error.message || error.error?.message || 'OpenAI API error';\n\n    // Rate limiting\n    if (statusCode === 429) {\n      const retryAfter = error.headers?.['retry-after'] \n        ? parseInt(error.headers['retry-after'], 10) \n        : undefined;\n      \n      return new SDKRateLimitError(\n        message,\n        'requests',\n        {\n          retryAfter,\n          statusCode,\n          provider: 'openai',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Authentication errors\n    if (statusCode === 401) {\n      return new SDKAuthenticationError(\n        message,\n        'openai',\n        {\n          statusCode,\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Validation errors\n    if (statusCode === 400) {\n      return new SDKValidationError(\n        message,\n        error.error?.param || 'unknown',\n        error.error?.code || 'unknown',\n        {\n          statusCode,\n          provider: 'openai',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Generic OpenAI error\n    return new BaseSDKError(\n      message,\n      'OPENAI_API_ERROR',\n      {\n        statusCode,\n        provider: 'openai',\n        requestId,\n        details: { originalError: error },\n        cause: error\n      }\n    );\n  }\n\n  private static fromClaudeError(error: any, requestId?: string): SDKError {\n    const statusCode = error.status || error.statusCode || 500;\n    const message = error.message || error.error?.message || 'Claude API error';\n\n    // Rate limiting\n    if (statusCode === 429) {\n      const retryAfter = error.headers?.['retry-after'] \n        ? parseInt(error.headers['retry-after'], 10) \n        : undefined;\n      \n      return new SDKRateLimitError(\n        message,\n        'requests',\n        {\n          retryAfter,\n          statusCode,\n          provider: 'claude',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Authentication errors\n    if (statusCode === 401) {\n      return new SDKAuthenticationError(\n        message,\n        'claude',\n        {\n          statusCode,\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Validation errors\n    if (statusCode === 400) {\n      return new SDKValidationError(\n        message,\n        error.error?.param || 'unknown',\n        error.error?.code || 'unknown',\n        {\n          statusCode,\n          provider: 'claude',\n          requestId,\n          details: { originalError: error }\n        }\n      );\n    }\n\n    // Generic Claude error\n    return new BaseSDKError(\n      message,\n      'CLAUDE_API_ERROR',\n      {\n        statusCode,\n        provider: 'claude',\n        requestId,\n        details: { originalError: error },\n        cause: error\n      }\n    );\n  }\n\n  private static fromGenericError(\n    error: any,\n    provider: ApiProvider,\n    requestId?: string\n  ): SDKError {\n    const statusCode = error.status || error.statusCode || 500;\n    const message = error.message || `${provider} API error`;\n\n    return new BaseSDKError(\n      message,\n      'API_ERROR',\n      {\n        statusCode,\n        provider,\n        requestId,\n        details: { originalError: error },\n        cause: error\n      }\n    );\n  }\n}\n\n/**\n * Retry Configuration and Logic\n */\nexport interface RetryConfig {\n  maxRetries: number;\n  baseDelay: number;\n  maxDelay: number;\n  backoffMultiplier: number;\n  jitter: boolean;\n  retryableErrors: string[];\n}\n\nexport const DEFAULT_RETRY_CONFIG: RetryConfig = {\n  maxRetries: 3,\n  baseDelay: 1000, // 1 second\n  maxDelay: 30000, // 30 seconds\n  backoffMultiplier: 2,\n  jitter: true,\n  retryableErrors: [\n    'RATE_LIMIT_EXCEEDED',\n    'NETWORK_ERROR',\n    'TIMEOUT',\n    'SERVER_ERROR',\n    'TEMPORARY_FAILURE'\n  ]\n};\n\nexport class RetryHandler {\n  private config: RetryConfig;\n\n  constructor(config: Partial<RetryConfig> = {}) {\n    this.config = { ...DEFAULT_RETRY_CONFIG, ...config };\n  }\n\n  /**\n   * Execute a function with retry logic\n   */\n  async execute<T>(\n    fn: () => Promise<T>,\n    context?: {\n      provider?: ApiProvider;\n      requestId?: string;\n      operation?: string;\n    }\n  ): Promise<T> {\n    let lastError: SDKError | null = null;\n    let attempt = 0;\n\n    while (attempt <= this.config.maxRetries) {\n      try {\n        return await fn();\n      } catch (error) {\n        lastError = error instanceof BaseSDKError \n          ? error \n          : this.convertToSDKError(error, context?.provider);\n\n        // Don't retry on last attempt\n        if (attempt === this.config.maxRetries) {\n          break;\n        }\n\n        // Check if error is retryable\n        if (!this.isRetryableError(lastError)) {\n          break;\n        }\n\n        // Calculate delay for next attempt\n        const delay = this.calculateDelay(attempt, lastError);\n        \n        console.warn(`Attempt ${attempt + 1} failed, retrying in ${delay}ms`, {\n          error: lastError.code,\n          provider: context?.provider,\n          requestId: context?.requestId,\n          operation: context?.operation\n        });\n\n        await this.sleep(delay);\n        attempt++;\n      }\n    }\n\n    // All attempts failed, throw the last error\n    throw lastError;\n  }\n\n  /**\n   * Check if an error should trigger a retry\n   */\n  private isRetryableError(error: SDKError): boolean {\n    // Don't retry authentication or validation errors\n    if (error.code === 'AUTHENTICATION_FAILED' || error.code === 'VALIDATION_ERROR') {\n      return false;\n    }\n\n    // Retry rate limit errors\n    if (error.code === 'RATE_LIMIT_EXCEEDED') {\n      return true;\n    }\n\n    // Retry server errors (5xx)\n    if (error.statusCode && error.statusCode >= 500) {\n      return true;\n    }\n\n    // Retry network/timeout errors\n    if (this.config.retryableErrors.includes(error.code)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Calculate exponential backoff delay with jitter\n   */\n  private calculateDelay(attempt: number, error: SDKError): number {\n    // Use retry-after header if available (rate limit errors)\n    if (error instanceof SDKRateLimitError && error.retryAfter) {\n      return error.retryAfter * 1000; // Convert seconds to milliseconds\n    }\n\n    // Exponential backoff\n    let delay = this.config.baseDelay * Math.pow(this.config.backoffMultiplier, attempt);\n    \n    // Cap at max delay\n    delay = Math.min(delay, this.config.maxDelay);\n\n    // Add jitter to avoid thundering herd\n    if (this.config.jitter) {\n      delay = delay * (0.5 + Math.random() * 0.5);\n    }\n\n    return Math.floor(delay);\n  }\n\n  /**\n   * Convert generic error to SDK error\n   */\n  private convertToSDKError(error: any, provider?: ApiProvider): SDKError {\n    if (error instanceof BaseSDKError) {\n      return error;\n    }\n\n    // Network/timeout errors\n    if (error.code === 'ECONNRESET' || error.code === 'ENOTFOUND' || error.code === 'ETIMEDOUT') {\n      return new BaseSDKError(\n        `Network error: ${error.message}`,\n        'NETWORK_ERROR',\n        { provider, cause: error }\n      );\n    }\n\n    // Generic error\n    return new BaseSDKError(\n      error.message || 'Unknown error',\n      'UNKNOWN_ERROR',\n      { provider, cause: error }\n    );\n  }\n\n  /**\n   * Sleep utility\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n\n/**\n * Circuit Breaker Pattern Implementation\n */\nexport interface CircuitBreakerConfig {\n  failureThreshold: number;\n  recoveryTimeout: number;\n  monitoringPeriod: number;\n}\n\nexport enum CircuitState {\n  CLOSED = 'closed',\n  OPEN = 'open',\n  HALF_OPEN = 'half_open'\n}\n\nexport class CircuitBreaker {\n  private state: CircuitState = CircuitState.CLOSED;\n  private failures: number = 0;\n  private lastFailureTime: number = 0;\n  private nextAttempt: number = 0;\n  private config: CircuitBreakerConfig;\n\n  constructor(config: Partial<CircuitBreakerConfig> = {}) {\n    this.config = {\n      failureThreshold: 5,\n      recoveryTimeout: 60000, // 1 minute\n      monitoringPeriod: 60000, // 1 minute\n      ...config\n    };\n  }\n\n  /**\n   * Execute function through circuit breaker\n   */\n  async execute<T>(fn: () => Promise<T>): Promise<T> {\n    if (this.state === CircuitState.OPEN) {\n      if (Date.now() < this.nextAttempt) {\n        throw new BaseSDKError(\n          'Circuit breaker is OPEN - too many recent failures',\n          'CIRCUIT_BREAKER_OPEN'\n        );\n      } else {\n        this.state = CircuitState.HALF_OPEN;\n      }\n    }\n\n    try {\n      const result = await fn();\n      this.onSuccess();\n      return result;\n    } catch (error) {\n      this.onFailure();\n      throw error;\n    }\n  }\n\n  private onSuccess(): void {\n    this.failures = 0;\n    this.state = CircuitState.CLOSED;\n  }\n\n  private onFailure(): void {\n    this.failures++;\n    this.lastFailureTime = Date.now();\n\n    if (this.failures >= this.config.failureThreshold) {\n      this.state = CircuitState.OPEN;\n      this.nextAttempt = Date.now() + this.config.recoveryTimeout;\n    }\n  }\n\n  /**\n   * Get current circuit breaker status\n   */\n  getStatus(): {\n    state: CircuitState;\n    failures: number;\n    lastFailureTime: number;\n    nextAttempt: number;\n  } {\n    return {\n      state: this.state,\n      failures: this.failures,\n      lastFailureTime: this.lastFailureTime,\n      nextAttempt: this.nextAttempt\n    };\n  }\n}\n\n/**\n * Request timeout wrapper\n */\nexport function withTimeout<T>(\n  promise: Promise<T>,\n  timeoutMs: number,\n  context?: { operation?: string; provider?: ApiProvider }\n): Promise<T> {\n  return Promise.race([\n    promise,\n    new Promise<never>((_, reject) => {\n      setTimeout(() => {\n        reject(new BaseSDKError(\n          `Operation timed out after ${timeoutMs}ms`,\n          'TIMEOUT',\n          {\n            provider: context?.provider,\n            details: { timeoutMs, operation: context?.operation }\n          }\n        ));\n      }, timeoutMs);\n    })\n  ]);\n}\n\n/**\n * Utility function to sanitize errors for logging\n */\nexport function sanitizeErrorForLogging(error: any): Record<string, any> {\n  const sanitized: Record<string, any> = {\n    name: error.name || 'Error',\n    message: error.message || 'Unknown error',\n    code: error.code,\n    statusCode: error.statusCode,\n    provider: error.provider,\n    requestId: error.requestId\n  };\n\n  // Remove sensitive information\n  if (error.details) {\n    sanitized.details = { ...error.details };\n    \n    // Remove API keys\n    if (sanitized.details.apiKey) {\n      sanitized.details.apiKey = '[REDACTED]';\n    }\n    \n    // Remove authorization headers\n    if (sanitized.details.headers?.authorization) {\n      sanitized.details.headers.authorization = '[REDACTED]';\n    }\n  }\n\n  return sanitized;\n}","/**\n * Base Provider Interface and Abstract Implementation\n * \n * Defines the unified interface that all AI providers must implement\n */\n\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ImageGenerationRequest,\n  ImageGenerationResponse,\n  ProviderConfig,\n  ProviderCapabilities,\n  SDKError,\n  RequestMetrics,\n  Usage\n} from '../types';\n\nimport { RetryHandler, CircuitBreaker, withTimeout } from '../utils/errors';\n\nexport interface BaseProviderOptions {\n  apiKey?: string;\n  baseURL?: string;\n  timeout?: number;\n  maxRetries?: number;\n  retryDelay?: number;\n  userAgent?: string;\n  debug?: boolean;\n}\n\n/**\n * Abstract base class for all AI providers\n */\nexport abstract class BaseProvider {\n  protected readonly provider: ApiProvider;\n  protected readonly config: ProviderConfig;\n  protected readonly retryHandler: RetryHandler;\n  protected readonly circuitBreaker: CircuitBreaker;\n\n  constructor(provider: ApiProvider, config: ProviderConfig) {\n    this.provider = provider;\n    this.config = config;\n    this.retryHandler = new RetryHandler({\n      maxRetries: config.maxRetries || 3,\n      baseDelay: config.retryDelay || 1000\n    });\n    this.circuitBreaker = new CircuitBreaker();\n  }\n\n  /**\n   * Provider capabilities - must be implemented by each provider\n   */\n  abstract getCapabilities(): ProviderCapabilities;\n\n  /**\n   * Chat completion - core method all providers must implement\n   */\n  abstract chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse>;\n\n  /**\n   * Streaming chat completion - optional, defaults to error\n   */\n  abstract streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown>;\n\n  /**\n   * Image generation - optional, defaults to error if not supported\n   */\n  generateImages(request: ImageGenerationRequest): Promise<ImageGenerationResponse> {\n    throw new Error(`Image generation not supported by ${this.provider} provider`);\n  }\n\n  /**\n   * Provider-specific model validation\n   */\n  abstract validateModel(model: string): boolean;\n\n  /**\n   * Get available models for this provider\n   */\n  abstract getAvailableModels(): string[];\n\n  /**\n   * Estimate cost for a request\n   */\n  abstract estimateCost(request: ChatCompletionRequest): number;\n\n  /**\n   * Transform provider-specific response to unified format\n   */\n  protected abstract transformResponse(\n    response: any,\n    request: ChatCompletionRequest,\n    metrics: Partial<RequestMetrics>\n  ): ChatCompletionResponse;\n\n  /**\n   * Transform provider-specific streaming response to unified format\n   */\n  protected abstract transformStreamChunk(\n    chunk: any,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null;\n\n  /**\n   * Execute request with retry logic and circuit breaker\n   */\n  protected async executeWithRetry<T>(\n    fn: () => Promise<T>,\n    context?: {\n      requestId?: string;\n      operation?: string;\n    }\n  ): Promise<T> {\n    const requestId = context?.requestId || this.generateRequestId();\n    \n    return this.circuitBreaker.execute(async () => {\n      return this.retryHandler.execute(fn, {\n        provider: this.provider,\n        requestId,\n        operation: context?.operation\n      });\n    });\n  }\n\n  /**\n   * Execute request with timeout\n   */\n  protected async executeWithTimeout<T>(\n    promise: Promise<T>,\n    operation: string\n  ): Promise<T> {\n    const timeout = this.config.timeout || 30000; // 30 seconds default\n    \n    return withTimeout(promise, timeout, {\n      operation,\n      provider: this.provider\n    });\n  }\n\n  /**\n   * Create request metrics for tracking\n   */\n  protected createRequestMetrics(\n    requestId: string,\n    model: string,\n    startTime: number\n  ): Partial<RequestMetrics> {\n    return {\n      requestId,\n      provider: this.provider,\n      model,\n      startTime,\n      endTime: 0,\n      tokens: { prompt_tokens: 0, completion_tokens: 0, total_tokens: 0, estimated_cost: 0 },\n      cost: 0,\n      success: false\n    };\n  }\n\n  /**\n   * Finalize request metrics\n   */\n  protected finalizeMetrics(\n    metrics: Partial<RequestMetrics>,\n    usage: Usage,\n    success: boolean,\n    error?: SDKError\n  ): RequestMetrics {\n    return {\n      ...metrics,\n      endTime: Date.now(),\n      tokens: usage,\n      cost: usage.estimated_cost,\n      success,\n      error\n    } as RequestMetrics;\n  }\n\n  /**\n   * Generate unique request ID\n   */\n  protected generateRequestId(): string {\n    return `${this.provider}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Validate API key format for this provider\n   */\n  protected abstract validateApiKey(apiKey: string): boolean;\n\n  /**\n   * Get default headers for requests\n   */\n  protected getDefaultHeaders(): Record<string, string> {\n    const headers: Record<string, string> = {\n      'Content-Type': 'application/json',\n      'User-Agent': this.config.userAgent || `ai-marketplace-sdk/0.1.0 (${this.provider})`\n    };\n\n    if (this.config.apiKey) {\n      headers['Authorization'] = this.getAuthHeader(this.config.apiKey);\n    }\n\n    return headers;\n  }\n\n  /**\n   * Get provider-specific authorization header\n   */\n  protected abstract getAuthHeader(apiKey: string): string;\n\n  /**\n   * Health check for the provider\n   */\n  async healthCheck(): Promise<{\n    provider: ApiProvider;\n    healthy: boolean;\n    latency?: number;\n    error?: string;\n    capabilities: ProviderCapabilities;\n    circuitBreakerStatus: any;\n  }> {\n    const startTime = Date.now();\n    \n    try {\n      // Simple test request to verify provider is accessible\n      await this.executeWithTimeout(\n        this.testConnection(),\n        'health_check'\n      );\n\n      return {\n        provider: this.provider,\n        healthy: true,\n        latency: Date.now() - startTime,\n        capabilities: this.getCapabilities(),\n        circuitBreakerStatus: this.circuitBreaker.getStatus()\n      };\n    } catch (error) {\n      return {\n        provider: this.provider,\n        healthy: false,\n        latency: Date.now() - startTime,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        capabilities: this.getCapabilities(),\n        circuitBreakerStatus: this.circuitBreaker.getStatus()\n      };\n    }\n  }\n\n  /**\n   * Test connection to provider - should be implemented by each provider\n   */\n  protected abstract testConnection(): Promise<void>;\n\n  /**\n   * Get provider configuration (without sensitive data)\n   */\n  getConfig(): Omit<ProviderConfig, 'apiKey'> {\n    const { apiKey, ...safeConfig } = this.config;\n    return safeConfig;\n  }\n\n  /**\n   * Update provider configuration\n   */\n  updateConfig(updates: Partial<BaseProviderOptions>): void {\n    Object.assign(this.config, updates);\n  }\n}\n\n/**\n * Provider factory interface\n */\nexport interface ProviderFactory {\n  create(config: ProviderConfig): BaseProvider;\n  supports(provider: ApiProvider): boolean;\n}\n\n/**\n * Provider registry for managing multiple providers\n */\nexport class ProviderRegistry {\n  private factories = new Map<ApiProvider, ProviderFactory>();\n  private instances = new Map<string, BaseProvider>();\n\n  /**\n   * Register a provider factory\n   */\n  register(provider: ApiProvider, factory: ProviderFactory): void {\n    this.factories.set(provider, factory);\n  }\n\n  /**\n   * Get or create a provider instance\n   */\n  getProvider(config: ProviderConfig): BaseProvider {\n    const key = `${config.provider}-${config.model}`;\n    \n    if (this.instances.has(key)) {\n      return this.instances.get(key)!;\n    }\n\n    const factory = this.factories.get(config.provider);\n    if (!factory) {\n      throw new Error(`No factory registered for provider: ${config.provider}`);\n    }\n\n    const instance = factory.create(config);\n    this.instances.set(key, instance);\n    return instance;\n  }\n\n  /**\n   * Get all registered providers\n   */\n  getRegisteredProviders(): ApiProvider[] {\n    return Array.from(this.factories.keys());\n  }\n\n  /**\n   * Check if provider is supported\n   */\n  supports(provider: ApiProvider): boolean {\n    return this.factories.has(provider);\n  }\n\n  /**\n   * Clear all cached instances\n   */\n  clearCache(): void {\n    this.instances.clear();\n  }\n\n  /**\n   * Health check all providers\n   */\n  async healthCheckAll(): Promise<Record<string, any>> {\n    const results: Record<string, any> = {};\n    \n    for (const [provider, factory] of this.factories) {\n      try {\n        // Create a test instance with minimal config\n        const testInstance = factory.create({\n          provider,\n          model: 'test',\n          apiKey: 'test'\n        });\n        \n        results[provider] = await testInstance.healthCheck();\n      } catch (error) {\n        results[provider] = {\n          provider,\n          healthy: false,\n          error: error instanceof Error ? error.message : 'Unknown error'\n        };\n      }\n    }\n\n    return results;\n  }\n}\n\n// Global provider registry instance\nexport const providerRegistry = new ProviderRegistry();","/**\n * OpenAI Provider Implementation\n * \n * Provides OpenAI API integration with unified interface\n */\n\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ImageGenerationRequest,\n  ImageGenerationResponse,\n  ProviderConfig,\n  ProviderCapabilities,\n  RequestMetrics,\n  Usage\n} from '../types';\n\nimport { BaseProvider, type BaseProviderOptions, type ProviderFactory } from './base';\nimport { ErrorFactory } from '../utils/errors';\n\n/**\n * OpenAI-specific configuration\n */\nexport interface OpenAIConfig extends BaseProviderOptions {\n  organization?: string;\n  project?: string;\n}\n\n/**\n * OpenAI Provider Implementation\n */\nexport class OpenAIProvider extends BaseProvider {\n  private readonly openaiConfig: OpenAIConfig;\n\n  constructor(config: ProviderConfig & OpenAIConfig) {\n    super('openai', config);\n    this.openaiConfig = config;\n  }\n\n  /**\n   * Get OpenAI provider capabilities\n   */\n  getCapabilities(): ProviderCapabilities {\n    return {\n      chat: true,\n      images: true,\n      embeddings: true,\n      tools: true,\n      streaming: true,\n      vision: true,\n      maxTokens: 128000,\n      costPer1kTokens: { input: 0.01, output: 0.03 }\n    };\n  }\n\n  /**\n   * Validate OpenAI model\n   */\n  validateModel(model: string): boolean {\n    const validModels = this.getAvailableModels();\n    return validModels.includes(model);\n  }\n\n  /**\n   * Get available OpenAI models\n   */\n  getAvailableModels(): string[] {\n    return [\n      'gpt-4o',\n      'gpt-4o-mini',\n      'gpt-4-turbo',\n      'gpt-4',\n      'gpt-3.5-turbo',\n      'gpt-3.5-turbo-16k'\n    ];\n  }\n\n  /**\n   * Estimate cost for OpenAI request\n   */\n  estimateCost(request: ChatCompletionRequest): number {\n    const model = request.model || this.config.model;\n    const tokenCount = this.estimateTokenCount(request);\n    \n    // Model-specific pricing (per 1k tokens)\n    const pricing = this.getModelPricing(model);\n    const inputCost = (tokenCount.input / 1000) * pricing.input;\n    const outputCost = (tokenCount.output / 1000) * pricing.output;\n    \n    return inputCost + outputCost;\n  }\n\n  /**\n   * Chat completion implementation\n   */\n  async chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse> {\n    const requestId = this.generateRequestId();\n    const startTime = Date.now();\n    const metrics = this.createRequestMetrics(requestId, request.model || this.config.model, startTime);\n\n    return this.executeWithRetry(async () => {\n      const openaiRequest = this.transformRequest(request);\n      \n      const response = await this.executeWithTimeout(\n        this.makeOpenAIRequest('/chat/completions', openaiRequest),\n        'chat_completion'\n      );\n\n      const usage = this.calculateUsage(response, request);\n      const transformedResponse = this.transformResponse(response, request, metrics);\n      \n      // Log successful request metrics\n      this.logRequestMetrics(this.finalizeMetrics(metrics, usage, true));\n      \n      return transformedResponse;\n    }, { requestId, operation: 'chat_completion' });\n  }\n\n  /**\n   * Streaming chat completion implementation\n   */\n  async* streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const requestId = this.generateRequestId();\n    const openaiRequest = { ...this.transformRequest(request), stream: true };\n\n    const response = await this.executeWithTimeout(\n      this.makeOpenAIStreamRequest('/chat/completions', openaiRequest),\n      'stream_chat_completion'\n    );\n\n    let totalUsage: Usage = {\n      prompt_tokens: 0,\n      completion_tokens: 0,\n      total_tokens: 0,\n      estimated_cost: 0\n    };\n\n    try {\n      for await (const chunk of response) {\n        const transformedChunk = this.transformStreamChunk(chunk, request);\n        if (transformedChunk) {\n          if (transformedChunk.usage) {\n            totalUsage = transformedChunk.usage;\n          }\n          yield transformedChunk;\n        }\n      }\n    } catch (error) {\n      throw ErrorFactory.fromProviderError(error, 'openai', requestId);\n    }\n  }\n\n  /**\n   * Image generation implementation\n   */\n  async generateImages(request: ImageGenerationRequest): Promise<ImageGenerationResponse> {\n    const requestId = this.generateRequestId();\n\n    return this.executeWithRetry(async () => {\n      const openaiRequest = this.transformImageRequest(request);\n      \n      const response = await this.executeWithTimeout(\n        this.makeOpenAIRequest('/images/generations', openaiRequest),\n        'image_generation'\n      );\n\n      return this.transformImageResponse(response);\n    }, { requestId, operation: 'image_generation' });\n  }\n\n  /**\n   * Transform unified request to OpenAI format\n   */\n  private transformRequest(request: ChatCompletionRequest): any {\n    const openaiRequest: any = {\n      model: request.model || this.config.model,\n      messages: request.messages.map(msg => ({\n        role: msg.role,\n        content: msg.content,\n        ...(msg.name && { name: msg.name }),\n        ...(msg.tool_calls && { tool_calls: msg.tool_calls }),\n        ...(msg.tool_call_id && { tool_call_id: msg.tool_call_id })\n      })),\n      ...(request.temperature !== undefined && { temperature: request.temperature }),\n      ...(request.max_tokens !== undefined && { max_tokens: request.max_tokens }),\n      ...(request.top_p !== undefined && { top_p: request.top_p }),\n      ...(request.frequency_penalty !== undefined && { frequency_penalty: request.frequency_penalty }),\n      ...(request.presence_penalty !== undefined && { presence_penalty: request.presence_penalty }),\n      ...(request.stop && { stop: request.stop }),\n      ...(request.tools && { tools: request.tools }),\n      ...(request.tool_choice && { tool_choice: request.tool_choice }),\n      ...(request.user && { user: request.user })\n    };\n\n    return openaiRequest;\n  }\n\n  /**\n   * Transform OpenAI response to unified format\n   */\n  protected transformResponse(\n    response: any,\n    request: ChatCompletionRequest,\n    metrics: Partial<RequestMetrics>\n  ): ChatCompletionResponse {\n    return {\n      id: response.id,\n      object: 'chat.completion',\n      created: response.created,\n      model: response.model,\n      provider: 'openai',\n      choices: response.choices.map((choice: any) => ({\n        index: choice.index,\n        message: {\n          role: choice.message.role,\n          content: choice.message.content,\n          ...(choice.message.tool_calls && { tool_calls: choice.message.tool_calls })\n        },\n        finish_reason: choice.finish_reason,\n        ...(choice.logprobs && { logprobs: choice.logprobs })\n      })),\n      usage: {\n        prompt_tokens: response.usage.prompt_tokens,\n        completion_tokens: response.usage.completion_tokens,\n        total_tokens: response.usage.total_tokens,\n        estimated_cost: this.calculateCost(response.usage, request.model || this.config.model)\n      },\n      ...(response.system_fingerprint && { system_fingerprint: response.system_fingerprint })\n    };\n  }\n\n  /**\n   * Transform OpenAI streaming chunk to unified format\n   */\n  protected transformStreamChunk(\n    chunk: any,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null {\n    if (!chunk || chunk === '[DONE]') {\n      return null;\n    }\n\n    // Parse SSE data\n    let data;\n    try {\n      data = typeof chunk === 'string' ? JSON.parse(chunk) : chunk;\n    } catch {\n      return null;\n    }\n\n    return {\n      id: data.id,\n      object: 'chat.completion.chunk',\n      created: data.created,\n      model: data.model,\n      provider: 'openai',\n      choices: data.choices.map((choice: any) => ({\n        index: choice.index,\n        delta: {\n          ...(choice.delta.role && { role: choice.delta.role }),\n          ...(choice.delta.content && { content: choice.delta.content }),\n          ...(choice.delta.tool_calls && { tool_calls: choice.delta.tool_calls })\n        },\n        finish_reason: choice.finish_reason\n      })),\n      ...(data.usage && {\n        usage: {\n          prompt_tokens: data.usage.prompt_tokens,\n          completion_tokens: data.usage.completion_tokens,\n          total_tokens: data.usage.total_tokens,\n          estimated_cost: this.calculateCost(data.usage, request.model || this.config.model)\n        }\n      })\n    };\n  }\n\n  /**\n   * Transform unified image request to OpenAI format\n   */\n  private transformImageRequest(request: ImageGenerationRequest): any {\n    return {\n      prompt: request.prompt,\n      model: request.model || 'dall-e-3',\n      n: request.n || 1,\n      size: request.size || '1024x1024',\n      quality: request.quality || 'standard',\n      style: request.style || 'vivid',\n      response_format: request.response_format || 'url',\n      ...(request.user && { user: request.user })\n    };\n  }\n\n  /**\n   * Transform OpenAI image response to unified format\n   */\n  private transformImageResponse(response: any): ImageGenerationResponse {\n    return {\n      created: response.created,\n      data: response.data.map((item: any) => ({\n        url: item.url,\n        b64_json: item.b64_json,\n        revised_prompt: item.revised_prompt\n      })),\n      provider: 'openai',\n      usage: {\n        estimated_cost: this.calculateImageCost(response.data.length)\n      }\n    };\n  }\n\n  /**\n   * Make HTTP request to OpenAI API\n   */\n  private async makeOpenAIRequest(endpoint: string, data: any): Promise<any> {\n    const url = `${this.config.baseURL || 'https://api.openai.com/v1'}${endpoint}`;\n    const headers = this.getDefaultHeaders();\n\n    // Add OpenAI-specific headers\n    if (this.openaiConfig.organization) {\n      headers['OpenAI-Organization'] = this.openaiConfig.organization;\n    }\n    if (this.openaiConfig.project) {\n      headers['OpenAI-Project'] = this.openaiConfig.project;\n    }\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(data)\n      });\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => ({ message: response.statusText }));\n        throw ErrorFactory.fromProviderError({ ...error, status: response.status }, 'openai');\n      }\n\n      return await response.json();\n    } catch (error) {\n      throw ErrorFactory.fromProviderError(error, 'openai');\n    }\n  }\n\n  /**\n   * Make streaming HTTP request to OpenAI API\n   */\n  private async makeOpenAIStreamRequest(endpoint: string, data: any): Promise<AsyncGenerator<any>> {\n    const url = `${this.config.baseURL || 'https://api.openai.com/v1'}${endpoint}`;\n    const headers = { ...this.getDefaultHeaders(), 'Accept': 'text/event-stream' };\n\n    // Add OpenAI-specific headers\n    if (this.openaiConfig.organization) {\n      headers['OpenAI-Organization'] = this.openaiConfig.organization;\n    }\n    if (this.openaiConfig.project) {\n      headers['OpenAI-Project'] = this.openaiConfig.project;\n    }\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(data)\n    });\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ message: response.statusText }));\n      throw ErrorFactory.fromProviderError({ ...error, status: response.status }, 'openai');\n    }\n\n    return this.parseSSEStream(response);\n  }\n\n  /**\n   * Parse Server-Sent Events stream\n   */\n  private async* parseSSEStream(response: Response): AsyncGenerator<any> {\n    const reader = response.body?.getReader();\n    if (!reader) throw new Error('No response body');\n\n    const decoder = new TextDecoder();\n    let buffer = '';\n\n    try {\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') return;\n            \n            try {\n              yield JSON.parse(data);\n            } catch {\n              // Skip malformed JSON\n            }\n          }\n        }\n      }\n    } finally {\n      reader.releaseLock();\n    }\n  }\n\n  /**\n   * Validate OpenAI API key format\n   */\n  protected validateApiKey(apiKey: string): boolean {\n    return /^sk-[a-zA-Z0-9]{48}$/.test(apiKey);\n  }\n\n  /**\n   * Get OpenAI authorization header\n   */\n  protected getAuthHeader(apiKey: string): string {\n    return `Bearer ${apiKey}`;\n  }\n\n  /**\n   * Test connection to OpenAI API\n   */\n  protected async testConnection(): Promise<void> {\n    await this.makeOpenAIRequest('/models', {}).catch(() => {\n      // Simple connectivity test - models endpoint\n    });\n  }\n\n  /**\n   * Calculate usage and cost\n   */\n  private calculateUsage(response: any, request: ChatCompletionRequest): Usage {\n    const usage = response.usage;\n    const cost = this.calculateCost(usage, request.model || this.config.model);\n    \n    return {\n      prompt_tokens: usage.prompt_tokens,\n      completion_tokens: usage.completion_tokens,\n      total_tokens: usage.total_tokens,\n      estimated_cost: cost\n    };\n  }\n\n  /**\n   * Calculate cost based on usage and model\n   */\n  private calculateCost(usage: any, model: string): number {\n    const pricing = this.getModelPricing(model);\n    const inputCost = (usage.prompt_tokens / 1000) * pricing.input;\n    const outputCost = (usage.completion_tokens / 1000) * pricing.output;\n    return inputCost + outputCost;\n  }\n\n  /**\n   * Get model-specific pricing\n   */\n  private getModelPricing(model: string): { input: number; output: number } {\n    const pricingMap: Record<string, { input: number; output: number }> = {\n      'gpt-4o': { input: 0.005, output: 0.015 },\n      'gpt-4o-mini': { input: 0.00015, output: 0.0006 },\n      'gpt-4-turbo': { input: 0.01, output: 0.03 },\n      'gpt-4': { input: 0.03, output: 0.06 },\n      'gpt-3.5-turbo': { input: 0.0015, output: 0.002 },\n      'gpt-3.5-turbo-16k': { input: 0.003, output: 0.004 }\n    };\n\n    return pricingMap[model] || { input: 0.01, output: 0.03 }; // Default pricing\n  }\n\n  /**\n   * Calculate image generation cost\n   */\n  private calculateImageCost(imageCount: number): number {\n    return imageCount * 0.04; // $0.04 per image for DALL-E 3\n  }\n\n  /**\n   * Estimate token count for cost calculation\n   */\n  private estimateTokenCount(request: ChatCompletionRequest): { input: number; output: number } {\n    // Rough estimation - 4 characters per token\n    const messageText = request.messages\n      .map(m => typeof m.content === 'string' ? m.content : JSON.stringify(m.content))\n      .join(' ');\n    \n    const inputTokens = Math.ceil(messageText.length / 4);\n    const outputTokens = request.max_tokens || 1000;\n\n    return { input: inputTokens, output: outputTokens };\n  }\n\n  /**\n   * Log request metrics for analytics\n   */\n  private logRequestMetrics(metrics: RequestMetrics): void {\n    if (this.config.debug) {\n      console.log('OpenAI Request Metrics:', {\n        requestId: metrics.requestId,\n        provider: metrics.provider,\n        model: metrics.model,\n        duration: metrics.endTime - metrics.startTime,\n        tokens: metrics.tokens,\n        cost: metrics.cost,\n        success: metrics.success\n      });\n    }\n  }\n}\n\n/**\n * OpenAI Provider Factory\n */\nexport class OpenAIProviderFactory implements ProviderFactory {\n  create(config: ProviderConfig): OpenAIProvider {\n    return new OpenAIProvider(config as ProviderConfig & OpenAIConfig);\n  }\n\n  supports(provider: ApiProvider): boolean {\n    return provider === 'openai';\n  }\n}\n\n/**\n * Convenience function to create OpenAI provider\n */\nexport function openai(options: OpenAIConfig = {}): ProviderConfig & OpenAIConfig {\n  return {\n    provider: 'openai',\n    model: options.model || 'gpt-4o',\n    ...options\n  };\n}","/**\n * Claude Provider Implementation\n * \n * Provides Anthropic Claude API integration with unified interface\n */\n\nimport type {\n  ApiProvider,\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ProviderConfig,\n  ProviderCapabilities,\n  RequestMetrics,\n  Usage,\n  Message\n} from '../types';\n\nimport { BaseProvider, type BaseProviderOptions, type ProviderFactory } from './base';\nimport { ErrorFactory } from '../utils/errors';\n\n/**\n * Claude-specific configuration\n */\nexport interface ClaudeConfig extends BaseProviderOptions {\n  anthropicVersion?: string;\n}\n\n/**\n * Claude Provider Implementation\n */\nexport class ClaudeProvider extends BaseProvider {\n  private readonly claudeConfig: ClaudeConfig;\n\n  constructor(config: ProviderConfig & ClaudeConfig) {\n    super('claude', config);\n    this.claudeConfig = config;\n  }\n\n  /**\n   * Get Claude provider capabilities\n   */\n  getCapabilities(): ProviderCapabilities {\n    return {\n      chat: true,\n      images: false,\n      embeddings: false,\n      tools: true,\n      streaming: true,\n      vision: true,\n      maxTokens: 200000,\n      costPer1kTokens: { input: 0.003, output: 0.015 }\n    };\n  }\n\n  /**\n   * Validate Claude model\n   */\n  validateModel(model: string): boolean {\n    const validModels = this.getAvailableModels();\n    return validModels.includes(model);\n  }\n\n  /**\n   * Get available Claude models\n   */\n  getAvailableModels(): string[] {\n    return [\n      'claude-3-5-sonnet-20241022',\n      'claude-3-5-haiku-20241022',\n      'claude-3-opus-20240229',\n      'claude-3-sonnet-20240229',\n      'claude-3-haiku-20240307'\n    ];\n  }\n\n  /**\n   * Estimate cost for Claude request\n   */\n  estimateCost(request: ChatCompletionRequest): number {\n    const model = request.model || this.config.model;\n    const tokenCount = this.estimateTokenCount(request);\n    \n    // Model-specific pricing (per 1k tokens)\n    const pricing = this.getModelPricing(model);\n    const inputCost = (tokenCount.input / 1000) * pricing.input;\n    const outputCost = (tokenCount.output / 1000) * pricing.output;\n    \n    return inputCost + outputCost;\n  }\n\n  /**\n   * Chat completion implementation\n   */\n  async chatCompletion(request: ChatCompletionRequest): Promise<ChatCompletionResponse> {\n    const requestId = this.generateRequestId();\n    const startTime = Date.now();\n    const metrics = this.createRequestMetrics(requestId, request.model || this.config.model, startTime);\n\n    return this.executeWithRetry(async () => {\n      const claudeRequest = this.transformRequest(request);\n      \n      const response = await this.executeWithTimeout(\n        this.makeClaudeRequest('/messages', claudeRequest),\n        'chat_completion'\n      );\n\n      const usage = this.calculateUsage(response, request);\n      const transformedResponse = this.transformResponse(response, request, metrics);\n      \n      // Log successful request metrics\n      this.logRequestMetrics(this.finalizeMetrics(metrics, usage, true));\n      \n      return transformedResponse;\n    }, { requestId, operation: 'chat_completion' });\n  }\n\n  /**\n   * Streaming chat completion implementation\n   */\n  async* streamChatCompletion(\n    request: ChatCompletionRequest\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const requestId = this.generateRequestId();\n    const claudeRequest = { ...this.transformRequest(request), stream: true };\n\n    const response = await this.executeWithTimeout(\n      this.makeClaudeStreamRequest('/messages', claudeRequest),\n      'stream_chat_completion'\n    );\n\n    let totalUsage: Usage = {\n      prompt_tokens: 0,\n      completion_tokens: 0,\n      total_tokens: 0,\n      estimated_cost: 0\n    };\n\n    try {\n      for await (const chunk of response) {\n        const transformedChunk = this.transformStreamChunk(chunk, request);\n        if (transformedChunk) {\n          if (transformedChunk.usage) {\n            totalUsage = transformedChunk.usage;\n          }\n          yield transformedChunk;\n        }\n      }\n    } catch (error) {\n      throw ErrorFactory.fromProviderError(error, 'claude', requestId);\n    }\n  }\n\n  /**\n   * Transform unified request to Claude format\n   */\n  private transformRequest(request: ChatCompletionRequest): any {\n    // Extract system message if present\n    const systemMessage = request.messages.find(m => m.role === 'system');\n    const messages = request.messages.filter(m => m.role !== 'system');\n\n    // Convert messages to Claude format\n    const claudeMessages = messages.map(msg => ({\n      role: msg.role === 'assistant' ? 'assistant' : 'user',\n      content: this.transformMessageContent(msg)\n    }));\n\n    const claudeRequest: any = {\n      model: request.model || this.config.model,\n      messages: claudeMessages,\n      max_tokens: request.max_tokens || 1000,\n      ...(systemMessage && { system: systemMessage.content }),\n      ...(request.temperature !== undefined && { temperature: request.temperature }),\n      ...(request.top_p !== undefined && { top_p: request.top_p }),\n      ...(request.stop && { stop_sequences: Array.isArray(request.stop) ? request.stop : [request.stop] }),\n      ...(request.tools && { tools: this.transformTools(request.tools) })\n    };\n\n    return claudeRequest;\n  }\n\n  /**\n   * Transform message content for Claude format\n   */\n  private transformMessageContent(message: Message): any {\n    if (typeof message.content === 'string') {\n      return message.content;\n    }\n\n    // Handle multimodal content (text + images)\n    return message.content.map(content => {\n      if (content.type === 'text') {\n        return {\n          type: 'text',\n          text: content.text\n        };\n      } else if (content.type === 'image_url') {\n        return {\n          type: 'image',\n          source: {\n            type: 'base64',\n            media_type: 'image/jpeg', // Assume JPEG, could be improved\n            data: content.image_url?.url.split(',')[1] || '' // Remove data:image/jpeg;base64, prefix\n          }\n        };\n      }\n      return content;\n    });\n  }\n\n  /**\n   * Transform tools for Claude format\n   */\n  private transformTools(tools: any[]): any[] {\n    return tools.map(tool => ({\n      name: tool.function.name,\n      description: tool.function.description,\n      input_schema: tool.function.parameters\n    }));\n  }\n\n  /**\n   * Transform Claude response to unified format\n   */\n  protected transformResponse(\n    response: any,\n    request: ChatCompletionRequest,\n    metrics: Partial<RequestMetrics>\n  ): ChatCompletionResponse {\n    // Calculate usage from Claude response\n    const usage: Usage = {\n      prompt_tokens: response.usage?.input_tokens || 0,\n      completion_tokens: response.usage?.output_tokens || 0,\n      total_tokens: (response.usage?.input_tokens || 0) + (response.usage?.output_tokens || 0),\n      estimated_cost: this.calculateCost(response.usage, request.model || this.config.model)\n    };\n\n    return {\n      id: response.id,\n      object: 'chat.completion',\n      created: Math.floor(Date.now() / 1000),\n      model: response.model,\n      provider: 'claude',\n      choices: [{\n        index: 0,\n        message: {\n          role: 'assistant',\n          content: this.extractContentFromResponse(response),\n          ...(response.tool_calls && { tool_calls: this.transformToolCallsFromClaude(response.tool_calls) })\n        },\n        finish_reason: this.mapStopReason(response.stop_reason)\n      }],\n      usage\n    };\n  }\n\n  /**\n   * Extract content from Claude response\n   */\n  private extractContentFromResponse(response: any): string {\n    if (response.content && Array.isArray(response.content)) {\n      return response.content\n        .filter((item: any) => item.type === 'text')\n        .map((item: any) => item.text)\n        .join('');\n    }\n    return response.content || '';\n  }\n\n  /**\n   * Transform tool calls from Claude format\n   */\n  private transformToolCallsFromClaude(toolCalls: any[]): any[] {\n    return toolCalls.map((call, index) => ({\n      id: `call_${index}`,\n      type: 'function',\n      function: {\n        name: call.name,\n        arguments: JSON.stringify(call.input)\n      }\n    }));\n  }\n\n  /**\n   * Map Claude stop reason to unified format\n   */\n  private mapStopReason(stopReason: string): string {\n    const reasonMap: Record<string, string> = {\n      'end_turn': 'stop',\n      'max_tokens': 'length',\n      'stop_sequence': 'stop',\n      'tool_use': 'tool_calls'\n    };\n    return reasonMap[stopReason] || 'stop';\n  }\n\n  /**\n   * Transform Claude streaming chunk to unified format\n   */\n  protected transformStreamChunk(\n    chunk: any,\n    request: ChatCompletionRequest\n  ): ChatCompletionChunk | null {\n    if (!chunk || !chunk.type) {\n      return null;\n    }\n\n    // Handle different event types\n    if (chunk.type === 'message_start') {\n      return {\n        id: chunk.message.id,\n        object: 'chat.completion.chunk',\n        created: Math.floor(Date.now() / 1000),\n        model: chunk.message.model,\n        provider: 'claude',\n        choices: [{\n          index: 0,\n          delta: { role: 'assistant' },\n          finish_reason: null\n        }]\n      };\n    }\n\n    if (chunk.type === 'content_block_delta') {\n      return {\n        id: chunk.message?.id || 'unknown',\n        object: 'chat.completion.chunk',\n        created: Math.floor(Date.now() / 1000),\n        model: request.model || this.config.model,\n        provider: 'claude',\n        choices: [{\n          index: 0,\n          delta: { content: chunk.delta.text },\n          finish_reason: null\n        }]\n      };\n    }\n\n    if (chunk.type === 'message_delta') {\n      const usage = chunk.usage ? {\n        prompt_tokens: chunk.usage.input_tokens || 0,\n        completion_tokens: chunk.usage.output_tokens || 0,\n        total_tokens: (chunk.usage.input_tokens || 0) + (chunk.usage.output_tokens || 0),\n        estimated_cost: this.calculateCost(chunk.usage, request.model || this.config.model)\n      } : undefined;\n\n      return {\n        id: chunk.message?.id || 'unknown',\n        object: 'chat.completion.chunk',\n        created: Math.floor(Date.now() / 1000),\n        model: request.model || this.config.model,\n        provider: 'claude',\n        choices: [{\n          index: 0,\n          delta: {},\n          finish_reason: this.mapStopReason(chunk.delta.stop_reason || 'end_turn')\n        }],\n        ...(usage && { usage })\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Make HTTP request to Claude API\n   */\n  private async makeClaudeRequest(endpoint: string, data: any): Promise<any> {\n    const url = `${this.config.baseURL || 'https://api.anthropic.com/v1'}${endpoint}`;\n    const headers = this.getDefaultHeaders();\n\n    // Add Claude-specific headers\n    headers['anthropic-version'] = this.claudeConfig.anthropicVersion || '2023-06-01';\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(data)\n      });\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => ({ message: response.statusText }));\n        throw ErrorFactory.fromProviderError({ ...error, status: response.status }, 'claude');\n      }\n\n      return await response.json();\n    } catch (error) {\n      throw ErrorFactory.fromProviderError(error, 'claude');\n    }\n  }\n\n  /**\n   * Make streaming HTTP request to Claude API\n   */\n  private async makeClaudeStreamRequest(endpoint: string, data: any): Promise<AsyncGenerator<any>> {\n    const url = `${this.config.baseURL || 'https://api.anthropic.com/v1'}${endpoint}`;\n    const headers = { ...this.getDefaultHeaders(), 'Accept': 'text/event-stream' };\n\n    // Add Claude-specific headers\n    headers['anthropic-version'] = this.claudeConfig.anthropicVersion || '2023-06-01';\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(data)\n    });\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ message: response.statusText }));\n      throw ErrorFactory.fromProviderError({ ...error, status: response.status }, 'claude');\n    }\n\n    return this.parseSSEStream(response);\n  }\n\n  /**\n   * Parse Server-Sent Events stream for Claude\n   */\n  private async* parseSSEStream(response: Response): AsyncGenerator<any> {\n    const reader = response.body?.getReader();\n    if (!reader) throw new Error('No response body');\n\n    const decoder = new TextDecoder();\n    let buffer = '';\n\n    try {\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') return;\n            \n            try {\n              yield JSON.parse(data);\n            } catch {\n              // Skip malformed JSON\n            }\n          }\n        }\n      }\n    } finally {\n      reader.releaseLock();\n    }\n  }\n\n  /**\n   * Validate Claude API key format\n   */\n  protected validateApiKey(apiKey: string): boolean {\n    return /^sk-ant-api[a-zA-Z0-9\\-]{95}$/.test(apiKey);\n  }\n\n  /**\n   * Get Claude authorization header\n   */\n  protected getAuthHeader(apiKey: string): string {\n    return `Bearer ${apiKey}`;\n  }\n\n  /**\n   * Test connection to Claude API\n   */\n  protected async testConnection(): Promise<void> {\n    // Simple test with minimal request\n    const testRequest = {\n      model: this.config.model,\n      messages: [{ role: 'user' as const, content: 'Hi' }],\n      max_tokens: 1\n    };\n    \n    await this.makeClaudeRequest('/messages', testRequest).catch(() => {\n      // Simple connectivity test\n    });\n  }\n\n  /**\n   * Calculate usage and cost\n   */\n  private calculateUsage(response: any, request: ChatCompletionRequest): Usage {\n    const usage = response.usage || {};\n    const cost = this.calculateCost(usage, request.model || this.config.model);\n    \n    return {\n      prompt_tokens: usage.input_tokens || 0,\n      completion_tokens: usage.output_tokens || 0,\n      total_tokens: (usage.input_tokens || 0) + (usage.output_tokens || 0),\n      estimated_cost: cost\n    };\n  }\n\n  /**\n   * Calculate cost based on usage and model\n   */\n  private calculateCost(usage: any, model: string): number {\n    const pricing = this.getModelPricing(model);\n    const inputCost = ((usage.input_tokens || 0) / 1000) * pricing.input;\n    const outputCost = ((usage.output_tokens || 0) / 1000) * pricing.output;\n    return inputCost + outputCost;\n  }\n\n  /**\n   * Get model-specific pricing\n   */\n  private getModelPricing(model: string): { input: number; output: number } {\n    const pricingMap: Record<string, { input: number; output: number }> = {\n      'claude-3-5-sonnet-20241022': { input: 0.003, output: 0.015 },\n      'claude-3-5-haiku-20241022': { input: 0.00025, output: 0.00125 },\n      'claude-3-opus-20240229': { input: 0.015, output: 0.075 },\n      'claude-3-sonnet-20240229': { input: 0.003, output: 0.015 },\n      'claude-3-haiku-20240307': { input: 0.00025, output: 0.00125 }\n    };\n\n    return pricingMap[model] || { input: 0.003, output: 0.015 }; // Default to Sonnet pricing\n  }\n\n  /**\n   * Estimate token count for cost calculation\n   */\n  private estimateTokenCount(request: ChatCompletionRequest): { input: number; output: number } {\n    // Rough estimation - Claude typically uses ~4 characters per token\n    const messageText = request.messages\n      .map(m => typeof m.content === 'string' ? m.content : JSON.stringify(m.content))\n      .join(' ');\n    \n    const inputTokens = Math.ceil(messageText.length / 4);\n    const outputTokens = request.max_tokens || 1000;\n\n    return { input: inputTokens, output: outputTokens };\n  }\n\n  /**\n   * Log request metrics for analytics\n   */\n  private logRequestMetrics(metrics: RequestMetrics): void {\n    if (this.config.debug) {\n      console.log('Claude Request Metrics:', {\n        requestId: metrics.requestId,\n        provider: metrics.provider,\n        model: metrics.model,\n        duration: metrics.endTime - metrics.startTime,\n        tokens: metrics.tokens,\n        cost: metrics.cost,\n        success: metrics.success\n      });\n    }\n  }\n}\n\n/**\n * Claude Provider Factory\n */\nexport class ClaudeProviderFactory implements ProviderFactory {\n  create(config: ProviderConfig): ClaudeProvider {\n    return new ClaudeProvider(config as ProviderConfig & ClaudeConfig);\n  }\n\n  supports(provider: ApiProvider): boolean {\n    return provider === 'claude';\n  }\n}\n\n/**\n * Convenience function to create Claude provider\n */\nexport function claude(options: ClaudeConfig = {}): ProviderConfig & ClaudeConfig {\n  return {\n    provider: 'claude',\n    model: options.model || 'claude-3-5-sonnet-20241022',\n    ...options\n  };\n}","/**\n * AI Providers Module - Exports\n * \n * Unified exports for all AI provider implementations with factory functions\n */\n\n// Base provider exports\nexport { BaseProvider, ProviderRegistry, providerRegistry, type ProviderFactory } from './base';\n\n// Provider registry setup (import first)\nimport { OpenAIProviderFactory, openai } from './openai';\nimport { ClaudeProviderFactory, claude } from './claude';\nimport { providerRegistry } from './base';\n\n// OpenAI provider exports\nexport { OpenAIProvider, OpenAIProviderFactory, openai, type OpenAIConfig } from './openai';\n\n// Claude provider exports\nexport { ClaudeProvider, ClaudeProviderFactory, claude, type ClaudeConfig } from './claude';\n\n// Register all providers\nproviderRegistry.register('openai', new OpenAIProviderFactory());\nproviderRegistry.register('claude', new ClaudeProviderFactory());\n\n// Re-export types for external use\nexport type {\n  BaseProviderOptions\n} from './base';\n\n/**\n * Provider convenience functions\n */\nexport const providers = {\n  openai,\n  claude\n} as const;\n\n/**\n * Get all registered provider types\n */\nexport function getSupportedProviders() {\n  return providerRegistry.getRegisteredProviders();\n}\n\n/**\n * Check if a provider is supported\n */\nexport function isProviderSupported(provider: string) {\n  return providerRegistry.supports(provider as any);\n}\n\n/**\n * Health check all providers\n */\nexport async function checkProviderHealth() {\n  return providerRegistry.healthCheckAll();\n}","/**\n * Chat Module - Unified Chat Interface\n * \n * Provides high-level chat interface with provider abstraction and intelligent routing\n */\n\nimport type {\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ProviderConfig,\n  ProviderConstraints,\n  ProviderSelection,\n  Message,\n  Tool\n} from '../types';\n\nimport { providerRegistry } from '../providers/base';\nimport { BaseSDKError } from '../utils/errors';\n\nexport interface ChatOptions {\n  provider?: ProviderConfig;\n  constraints?: ProviderConstraints;\n  enableAutoRetry?: boolean;\n  enableFallback?: boolean;\n  trackUsage?: boolean;\n}\n\n/**\n * High-level Chat interface with provider abstraction\n */\nexport class Chat {\n  private defaultProvider?: ProviderConfig;\n  private options: ChatOptions;\n\n  constructor(options: ChatOptions = {}) {\n    this.options = {\n      enableAutoRetry: true,\n      enableFallback: true,\n      trackUsage: true,\n      ...options\n    };\n    \n    this.defaultProvider = options.provider;\n  }\n\n  /**\n   * Complete a chat conversation\n   */\n  async complete(\n    request: ChatCompletionRequest,\n    options?: Partial<ChatOptions>\n  ): Promise<ChatCompletionResponse> {\n    const mergedOptions = { ...this.options, ...options };\n    \n    // Select optimal provider\n    const providerConfig = await this.selectProvider(request, mergedOptions);\n    \n    // Get provider instance\n    const provider = providerRegistry.getProvider(providerConfig);\n    \n    try {\n      return await provider.chatCompletion(request);\n    } catch (error) {\n      // Handle fallback if enabled\n      if (mergedOptions.enableFallback && this.shouldFallback(error)) {\n        return this.executeWithFallback(request, providerConfig, mergedOptions);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Stream a chat conversation\n   */\n  async* stream(\n    request: ChatCompletionRequest,\n    options?: Partial<ChatOptions>\n  ): AsyncGenerator<ChatCompletionChunk, void, unknown> {\n    const mergedOptions = { ...this.options, ...options };\n    \n    // Select optimal provider\n    const providerConfig = await this.selectProvider(request, mergedOptions);\n    \n    // Get provider instance\n    const provider = providerRegistry.getProvider(providerConfig);\n    \n    try {\n      yield* provider.streamChatCompletion(request);\n    } catch (error) {\n      // Fallback for streaming is more complex, for now just throw\n      throw error;\n    }\n  }\n\n  /**\n   * Simple text completion (convenience method)\n   */\n  async ask(\n    message: string,\n    options?: {\n      system?: string;\n      temperature?: number;\n      maxTokens?: number;\n    } & Partial<ChatOptions>\n  ): Promise<string> {\n    const messages: Message[] = [];\n    \n    if (options?.system) {\n      messages.push({ role: 'system', content: options.system });\n    }\n    \n    messages.push({ role: 'user', content: message });\n\n    const request: ChatCompletionRequest = {\n      messages,\n      ...(options?.temperature && { temperature: options.temperature }),\n      ...(options?.maxTokens && { max_tokens: options.maxTokens })\n    };\n\n    const response = await this.complete(request, options);\n    return response.choices[0]?.message.content || '';\n  }\n\n  /**\n   * Chat with conversation history\n   */\n  async chat(\n    messages: Message[],\n    options?: {\n      temperature?: number;\n      maxTokens?: number;\n      tools?: Tool[];\n    } & Partial<ChatOptions>\n  ): Promise<ChatCompletionResponse> {\n    const request: ChatCompletionRequest = {\n      messages,\n      ...(options?.temperature && { temperature: options.temperature }),\n      ...(options?.maxTokens && { max_tokens: options.maxTokens }),\n      ...(options?.tools && { tools: options.tools })\n    };\n\n    return this.complete(request, options);\n  }\n\n  /**\n   * Create a conversation instance for stateful chat\n   */\n  conversation(options?: {\n    system?: string;\n    temperature?: number;\n    maxTokens?: number;\n  } & Partial<ChatOptions>): Conversation {\n    return new Conversation(this, options);\n  }\n\n  /**\n   * Select optimal provider based on request and constraints\n   */\n  private async selectProvider(\n    request: ChatCompletionRequest,\n    options: ChatOptions\n  ): Promise<ProviderConfig> {\n    // Use explicit provider if specified\n    if (options.provider) {\n      return options.provider;\n    }\n\n    // Use default provider if no constraints\n    if (this.defaultProvider && !options.constraints) {\n      return this.defaultProvider;\n    }\n\n    // Implement intelligent provider selection\n    return this.intelligentProviderSelection(request, options.constraints);\n  }\n\n  /**\n   * Intelligent provider selection based on constraints and request characteristics\n   */\n  private async intelligentProviderSelection(\n    request: ChatCompletionRequest,\n    constraints?: ProviderConstraints\n  ): Promise<ProviderConfig> {\n    const supportedProviders = providerRegistry.getRegisteredProviders();\n    const candidates: ProviderSelection[] = [];\n\n    for (const provider of supportedProviders) {\n      // Skip excluded providers\n      if (constraints?.excludeProviders?.includes(provider)) {\n        continue;\n      }\n\n      // Get provider instance for evaluation\n      const config: ProviderConfig = {\n        provider,\n        model: this.getDefaultModel(provider),\n        apiKey: '' // Will be resolved later\n      };\n\n      const providerInstance = providerRegistry.getProvider(config);\n      const capabilities = providerInstance.getCapabilities();\n\n      // Check required capabilities\n      if (constraints?.requiredCapabilities) {\n        const hasRequired = constraints.requiredCapabilities.every(\n          cap => capabilities[cap] === true\n        );\n        if (!hasRequired) continue;\n      }\n\n      // Estimate cost and quality\n      const estimatedCost = providerInstance.estimateCost(request);\n      const estimatedLatency = this.estimateLatency(provider);\n      const qualityScore = this.calculateQualityScore(provider, request);\n\n      // Apply constraints\n      if (constraints?.maxCost && estimatedCost > constraints.maxCost) {\n        continue;\n      }\n      if (constraints?.maxLatency && estimatedLatency > constraints.maxLatency) {\n        continue;\n      }\n      if (constraints?.qualityThreshold && qualityScore < constraints.qualityThreshold) {\n        continue;\n      }\n\n      candidates.push({\n        provider,\n        model: config.model,\n        estimatedCost,\n        estimatedLatency,\n        qualityScore,\n        reasoning: this.generateSelectionReasoning(provider, estimatedCost, qualityScore)\n      });\n    }\n\n    if (candidates.length === 0) {\n      throw new BaseSDKError(\n        'No providers meet the specified constraints',\n        'NO_SUITABLE_PROVIDER',\n        { details: { constraints } }\n      );\n    }\n\n    // Select best candidate (optimize for cost/quality ratio)\n    const bestCandidate = candidates.reduce((best, current) => {\n      const bestScore = best.qualityScore / best.estimatedCost;\n      const currentScore = current.qualityScore / current.estimatedCost;\n      return currentScore > bestScore ? current : best;\n    });\n\n    // Check for preferred providers\n    if (constraints?.preferredProviders) {\n      const preferredCandidate = candidates.find(c => \n        constraints.preferredProviders!.includes(c.provider)\n      );\n      if (preferredCandidate) {\n        return {\n          provider: preferredCandidate.provider,\n          model: preferredCandidate.model,\n          apiKey: '' // Will be resolved later\n        };\n      }\n    }\n\n    return {\n      provider: bestCandidate.provider,\n      model: bestCandidate.model,\n      apiKey: '' // Will be resolved later\n    };\n  }\n\n  /**\n   * Execute request with fallback providers\n   */\n  private async executeWithFallback(\n    request: ChatCompletionRequest,\n    failedProvider: ProviderConfig,\n    options: ChatOptions\n  ): Promise<ChatCompletionResponse> {\n    const fallbackProviders = this.getFallbackProviders(failedProvider);\n    \n    for (const provider of fallbackProviders) {\n      try {\n        const providerInstance = providerRegistry.getProvider(provider);\n        return await providerInstance.chatCompletion(request);\n      } catch (error) {\n        // Continue to next fallback\n        continue;\n      }\n    }\n\n    throw new BaseSDKError(\n      'All fallback providers failed',\n      'ALL_PROVIDERS_FAILED',\n      { details: { originalProvider: failedProvider.provider } }\n    );\n  }\n\n  /**\n   * Determine if error should trigger fallback\n   */\n  private shouldFallback(error: any): boolean {\n    // Fallback on rate limits, server errors, but not auth/validation errors\n    if (error.code === 'RATE_LIMIT_EXCEEDED') return true;\n    if (error.statusCode && error.statusCode >= 500) return true;\n    if (error.code === 'NETWORK_ERROR') return true;\n    return false;\n  }\n\n  /**\n   * Get fallback providers for a failed provider\n   */\n  private getFallbackProviders(failedProvider: ProviderConfig): ProviderConfig[] {\n    const fallbackMap: Record<string, string[]> = {\n      'openai': ['claude'],\n      'claude': ['openai'],\n      'google': ['openai', 'claude'],\n      'azure': ['openai', 'claude'],\n      'cohere': ['openai', 'claude'],\n      'huggingface': ['openai', 'claude']\n    };\n\n    const fallbacks = fallbackMap[failedProvider.provider] || ['openai'];\n    return fallbacks.map(provider => ({\n      provider: provider as any,\n      model: this.getDefaultModel(provider as any),\n      apiKey: '' // Will be resolved later\n    }));\n  }\n\n  /**\n   * Get default model for provider\n   */\n  private getDefaultModel(provider: string): string {\n    const defaultModels: Record<string, string> = {\n      'openai': 'gpt-4o',\n      'claude': 'claude-3-5-sonnet-20241022',\n      'google': 'gemini-pro',\n      'azure': 'gpt-4',\n      'cohere': 'command-r-plus',\n      'huggingface': 'meta-llama/Llama-2-70b-chat-hf'\n    };\n    return defaultModels[provider] || 'gpt-4o';\n  }\n\n  /**\n   * Estimate latency for provider (placeholder implementation)\n   */\n  private estimateLatency(provider: string): number {\n    const latencyMap: Record<string, number> = {\n      'openai': 2000,\n      'claude': 3000,\n      'google': 1500,\n      'azure': 2500,\n      'cohere': 2000,\n      'huggingface': 4000\n    };\n    return latencyMap[provider] || 2000;\n  }\n\n  /**\n   * Calculate quality score for provider (placeholder implementation)\n   */\n  private calculateQualityScore(provider: string, request: ChatCompletionRequest): number {\n    // Simple quality scoring based on provider capabilities\n    const qualityMap: Record<string, number> = {\n      'openai': 0.9,\n      'claude': 0.95,\n      'google': 0.8,\n      'azure': 0.9,\n      'cohere': 0.7,\n      'huggingface': 0.6\n    };\n    return qualityMap[provider] || 0.5;\n  }\n\n  /**\n   * Generate reasoning for provider selection\n   */\n  private generateSelectionReasoning(provider: string, cost: number, quality: number): string {\n    return `Selected ${provider} for optimal cost/quality ratio (cost: $${cost.toFixed(4)}, quality: ${quality.toFixed(2)})`;\n  }\n}\n\n/**\n * Stateful conversation class\n */\nexport class Conversation {\n  private messages: Message[] = [];\n  private chat: Chat;\n  private options: any;\n\n  constructor(chat: Chat, options: any = {}) {\n    this.chat = chat;\n    this.options = options;\n\n    // Add system message if provided\n    if (options.system) {\n      this.messages.push({ role: 'system', content: options.system });\n    }\n  }\n\n  /**\n   * Send a message and get response\n   */\n  async say(message: string): Promise<string> {\n    this.messages.push({ role: 'user', content: message });\n\n    const response = await this.chat.chat(this.messages, this.options);\n    const assistantMessage = response.choices[0]?.message.content || '';\n\n    this.messages.push({ role: 'assistant', content: assistantMessage });\n\n    return assistantMessage;\n  }\n\n  /**\n   * Get conversation history\n   */\n  getHistory(): Message[] {\n    return [...this.messages];\n  }\n\n  /**\n   * Clear conversation history (keeping system message)\n   */\n  clear(): void {\n    const systemMessage = this.messages.find(m => m.role === 'system');\n    this.messages = systemMessage ? [systemMessage] : [];\n  }\n\n  /**\n   * Get conversation summary\n   */\n  async summarize(): Promise<string> {\n    if (this.messages.length < 3) {\n      return 'Conversation too short to summarize';\n    }\n\n    const summaryRequest: Message[] = [\n      { role: 'system', content: 'Summarize the following conversation concisely.' },\n      { role: 'user', content: JSON.stringify(this.messages) }\n    ];\n\n    const response = await this.chat.chat(summaryRequest, { ...this.options, maxTokens: 200 });\n    return response.choices[0]?.message.content || 'Unable to generate summary';\n  }\n}\n\n/**\n * Convenience function to create a Chat instance\n */\nexport function createChat(options?: ChatOptions): Chat {\n  return new Chat(options);\n}\n\n/**\n * Quick helper functions\n */\nexport async function ask(\n  message: string,\n  options?: {\n    provider?: ProviderConfig;\n    system?: string;\n    temperature?: number;\n  }\n): Promise<string> {\n  const chat = new Chat({ provider: options?.provider });\n  return chat.ask(message, options);\n}\n\nexport async function chat(\n  messages: Message[],\n  options?: {\n    provider?: ProviderConfig;\n    temperature?: number;\n    tools?: Tool[];\n  }\n): Promise<ChatCompletionResponse> {\n  const chatInstance = new Chat({ provider: options?.provider });\n  return chatInstance.chat(messages, options);\n}","/**\n * AI Marketplace SDK - Main Entry Point\n * \n * Unified TypeScript SDK for AI App Marketplace with tree-shakable exports\n * Supports OpenAI, Claude, and other AI providers with intelligent routing\n * \n * @example\n * ```typescript\n * import { Chat, openai } from '@ai-marketplace/sdk';\n * \n * const chat = new Chat({\n *   provider: openai({ model: 'gpt-4o' })\n * });\n * \n * const response = await chat.ask('Hello, world!');\n * ```\n */\n\n// Core SDK exports\nexport { Chat, Conversation, createChat, ask, chat } from './chat';\n\n// Provider exports for tree-shaking\nexport { \n  providers,\n  openai,\n  claude,\n  getSupportedProviders,\n  isProviderSupported,\n  checkProviderHealth\n} from './providers';\n\n// Type exports\nexport type {\n  // Core types\n  ApiProvider,\n  SDKConfig,\n  Message,\n  Tool,\n  \n  // Request/Response types\n  ChatCompletionRequest,\n  ChatCompletionResponse,\n  ChatCompletionChunk,\n  ImageGenerationRequest,\n  ImageGenerationResponse,\n  \n  // Provider types\n  ProviderConfig,\n  ProviderCapabilities,\n  ProviderConstraints,\n  ProviderSelection,\n  \n  // Usage and metrics\n  Usage,\n  UsageMetrics,\n  RequestMetrics,\n  \n  // Error types\n  SDKError,\n  RateLimitError,\n  AuthenticationError,\n  ValidationError,\n  \n  // Utility types\n  DeepPartial,\n  RequiredFields,\n  Optional\n} from './types';\n\n// Error exports\nexport {\n  BaseSDKError,\n  SDKRateLimitError,\n  SDKAuthenticationError,\n  SDKValidationError,\n  ErrorFactory,\n  RetryHandler,\n  CircuitBreaker,\n  withTimeout,\n  sanitizeErrorForLogging\n} from './utils/errors';\n\n// Re-export type guards from types\nexport {\n  isSDKError,\n  isRateLimitError,\n  isAuthenticationError,\n  isValidationError\n} from './types';\n\n// Provider registry (for advanced usage)\nexport { providerRegistry, BaseProvider } from './providers/base';\n\n/**\n * SDK Version\n */\nexport const VERSION = '0.1.0';\n\n/**\n * Default SDK Configuration\n */\nexport const DEFAULT_CONFIG = {\n  enableUsageTracking: true,\n  enableRetries: true,\n  maxRetries: 3,\n  retryDelay: 1000,\n  timeout: 30000,\n  debug: false\n};\n\n/**\n * Initialize SDK with global configuration\n */\nexport class SDK {\n  private static instance: SDK | null = null;\n  private config: any;\n\n  private constructor(config: any) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  /**\n   * Initialize SDK singleton\n   */\n  static init(config: any): SDK {\n    if (SDK.instance) {\n      throw new Error('SDK already initialized. Use SDK.getInstance() to access the initialized instance.');\n    }\n    SDK.instance = new SDK(config);\n    return SDK.instance;\n  }\n\n  /**\n   * Get SDK singleton instance\n   */\n  static getInstance(): SDK {\n    if (!SDK.instance) {\n      throw new Error('SDK not initialized. Call SDK.init(config) first.');\n    }\n    return SDK.instance;\n  }\n\n  /**\n   * Create Chat instance with SDK config\n   */\n  createChat(options: any = {}): any {\n    return new Chat({\n      provider: this.config.defaultProvider ? {\n        provider: this.config.defaultProvider,\n        model: this.config.defaultModel || 'gpt-4o',\n        apiKey: this.config.apiKey,\n        timeout: this.config.timeout,\n        maxRetries: this.config.maxRetries\n      } : undefined,\n      enableAutoRetry: this.config.enableRetries,\n      trackUsage: this.config.enableUsageTracking,\n      ...options\n    });\n  }\n\n  /**\n   * Get SDK configuration\n   */\n  getConfig(): any {\n    const { apiKey, ...safeConfig } = this.config;\n    return safeConfig;\n  }\n\n  /**\n   * Update SDK configuration\n   */\n  updateConfig(updates: any): void {\n    this.config = { ...this.config, ...updates };\n  }\n\n  /**\n   * Health check all providers\n   */\n  async healthCheck(): Promise<{\n    sdk: { version: string; config: any };\n    providers: any;\n    timestamp: string;\n  }> {\n    const providerHealth = await (await import('./providers')).checkProviderHealth();\n    \n    return {\n      sdk: {\n        version: VERSION,\n        config: this.getConfig()\n      },\n      providers: providerHealth,\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  /**\n   * Reset SDK instance (for testing)\n   */\n  static reset(): void {\n    SDK.instance = null;\n  }\n}\n\n/**\n * Quick initialization helper\n */\nexport function initSDK(config: any): SDK {\n  return SDK.init(config);\n}\n\n/**\n * Default export for CommonJS compatibility\n */\nconst defaultExports = {\n  SDK,\n  initSDK,\n  VERSION,\n  DEFAULT_CONFIG\n};\n\nexport default defaultExports;","/**\n * Core Types for AI Marketplace SDK\n * \n * Unified types supporting OpenAI and Claude providers with tree-shakable exports\n */\n\n// Base Types\nexport type ApiProvider = 'openai' | 'claude' | 'google' | 'azure' | 'cohere' | 'huggingface';\n\nexport interface BaseConfig {\n  apiKey?: string;\n  baseURL?: string;\n  timeout?: number;\n  maxRetries?: number;\n  retryDelay?: number;\n  userAgent?: string;\n}\n\n// Message Types - Unified interface for all providers\nexport interface Message {\n  role: 'system' | 'user' | 'assistant' | 'tool';\n  content: string | MessageContent[];\n  name?: string;\n  tool_calls?: ToolCall[];\n  tool_call_id?: string;\n}\n\nexport interface MessageContent {\n  type: 'text' | 'image_url';\n  text?: string;\n  image_url?: {\n    url: string;\n    detail?: 'low' | 'high' | 'auto';\n  };\n}\n\nexport interface ToolCall {\n  id: string;\n  type: 'function';\n  function: {\n    name: string;\n    arguments: string;\n  };\n}\n\n// Chat Completion Types\nexport interface ChatCompletionRequest {\n  messages: Message[];\n  model?: string;\n  temperature?: number;\n  max_tokens?: number;\n  top_p?: number;\n  frequency_penalty?: number;\n  presence_penalty?: number;\n  stop?: string | string[];\n  stream?: boolean;\n  tools?: Tool[];\n  tool_choice?: 'none' | 'auto' | { type: 'function'; function: { name: string } };\n  user?: string;\n}\n\nexport interface Tool {\n  type: 'function';\n  function: {\n    name: string;\n    description?: string;\n    parameters?: Record<string, any>;\n  };\n}\n\nexport interface ChatCompletionResponse {\n  id: string;\n  object: 'chat.completion';\n  created: number;\n  model: string;\n  provider: ApiProvider;\n  choices: ChatChoice[];\n  usage: Usage;\n  system_fingerprint?: string;\n}\n\nexport interface ChatChoice {\n  index: number;\n  message: Message;\n  finish_reason: 'stop' | 'length' | 'tool_calls' | 'content_filter' | null;\n  logprobs?: ChatCompletionLogprobs | null;\n}\n\nexport interface ChatCompletionLogprobs {\n  content: ChatCompletionTokenLogprob[] | null;\n}\n\nexport interface ChatCompletionTokenLogprob {\n  token: string;\n  logprob: number;\n  bytes: number[] | null;\n  top_logprobs: TopLogprob[];\n}\n\nexport interface TopLogprob {\n  token: string;\n  logprob: number;\n  bytes: number[] | null;\n}\n\nexport interface Usage {\n  prompt_tokens: number;\n  completion_tokens: number;\n  total_tokens: number;\n  estimated_cost: number;\n}\n\n// Streaming Types\nexport interface ChatCompletionChunk {\n  id: string;\n  object: 'chat.completion.chunk';\n  created: number;\n  model: string;\n  provider: ApiProvider;\n  choices: ChatChunkChoice[];\n  usage?: Usage;\n}\n\nexport interface ChatChunkChoice {\n  index: number;\n  delta: {\n    role?: 'assistant';\n    content?: string;\n    tool_calls?: ToolCall[];\n  };\n  finish_reason: 'stop' | 'length' | 'tool_calls' | 'content_filter' | null;\n}\n\n// Image Generation Types\nexport interface ImageGenerationRequest {\n  prompt: string;\n  model?: string;\n  n?: number;\n  size?: '256x256' | '512x512' | '1024x1024' | '1792x1024' | '1024x1792';\n  quality?: 'standard' | 'hd';\n  style?: 'vivid' | 'natural';\n  response_format?: 'url' | 'b64_json';\n  user?: string;\n}\n\nexport interface ImageGenerationResponse {\n  created: number;\n  data: ImageData[];\n  provider: ApiProvider;\n  usage?: {\n    estimated_cost: number;\n  };\n}\n\nexport interface ImageData {\n  url?: string;\n  b64_json?: string;\n  revised_prompt?: string;\n}\n\n// Provider Configuration Types\nexport interface ProviderConfig extends BaseConfig {\n  provider: ApiProvider;\n  model: string;\n  defaultParams?: Record<string, any>;\n}\n\nexport interface ProviderCapabilities {\n  chat: boolean;\n  images: boolean;\n  embeddings: boolean;\n  tools: boolean;\n  streaming: boolean;\n  vision: boolean;\n  maxTokens: number;\n  costPer1kTokens: {\n    input: number;\n    output: number;\n  };\n}\n\n// Error Types\nexport interface SDKError extends Error {\n  code: string;\n  statusCode?: number;\n  provider?: ApiProvider;\n  requestId?: string;\n  details?: Record<string, any>;\n}\n\nexport interface RateLimitError extends SDKError {\n  code: 'RATE_LIMIT_EXCEEDED';\n  retryAfter?: number;\n  limitType: 'requests' | 'tokens' | 'cost';\n}\n\nexport interface AuthenticationError extends SDKError {\n  code: 'AUTHENTICATION_FAILED';\n  provider: ApiProvider;\n}\n\nexport interface ValidationError extends SDKError {\n  code: 'VALIDATION_ERROR';\n  field: string;\n  value: any;\n}\n\n// Provider Selection Types\nexport interface ProviderConstraints {\n  maxCost?: number;\n  maxLatency?: number;\n  qualityThreshold?: number;\n  requiredCapabilities?: (keyof ProviderCapabilities)[];\n  excludeProviders?: ApiProvider[];\n  preferredProviders?: ApiProvider[];\n}\n\nexport interface ProviderSelection {\n  provider: ApiProvider;\n  model: string;\n  estimatedCost: number;\n  estimatedLatency: number;\n  qualityScore: number;\n  reasoning: string;\n}\n\n// Usage Tracking Types\nexport interface UsageMetrics {\n  requests: number;\n  tokens: {\n    input: number;\n    output: number;\n    total: number;\n  };\n  cost: number;\n  latency: {\n    avg: number;\n    p95: number;\n    p99: number;\n  };\n  errors: {\n    total: number;\n    rate: number;\n    byCode: Record<string, number>;\n  };\n}\n\nexport interface RequestMetrics {\n  requestId: string;\n  provider: ApiProvider;\n  model: string;\n  startTime: number;\n  endTime: number;\n  tokens: Usage;\n  cost: number;\n  success: boolean;\n  error?: SDKError;\n}\n\n// SDK Configuration Types\nexport interface SDKConfig {\n  apiKey?: string;\n  baseURL?: string;\n  defaultProvider?: ApiProvider;\n  defaultModel?: string;\n  providers?: Record<ApiProvider, ProviderConfig>;\n  enableUsageTracking?: boolean;\n  enableRetries?: boolean;\n  maxRetries?: number;\n  retryDelay?: number;\n  timeout?: number;\n  userAgent?: string;\n  debug?: boolean;\n}\n\n// Model Information Types\nexport interface ModelInfo {\n  id: string;\n  provider: ApiProvider;\n  name: string;\n  description?: string;\n  contextWindow: number;\n  maxOutputTokens: number;\n  capabilities: ProviderCapabilities;\n  pricing: {\n    input: number; // per 1k tokens\n    output: number; // per 1k tokens\n  };\n  deprecated?: boolean;\n  deprecationDate?: string;\n}\n\n// Export utility types\nexport type DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P];\n};\n\nexport type RequiredFields<T, K extends keyof T> = T & Required<Pick<T, K>>;\n\nexport type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\n// Type guards\nexport function isSDKError(error: any): error is SDKError {\n  return error && typeof error === 'object' && 'code' in error && typeof error.code === 'string';\n}\n\nexport function isRateLimitError(error: any): error is RateLimitError {\n  return isSDKError(error) && error.code === 'RATE_LIMIT_EXCEEDED';\n}\n\nexport function isAuthenticationError(error: any): error is AuthenticationError {\n  return isSDKError(error) && error.code === 'AUTHENTICATION_FAILED';\n}\n\nexport function isValidationError(error: any): error is ValidationError {\n  return isSDKError(error) && error.code === 'VALIDATION_ERROR';\n}\n\n// Constants\nexport const SUPPORTED_PROVIDERS: ApiProvider[] = [\n  'openai',\n  'claude',\n  'google',\n  'azure',\n  'cohere',\n  'huggingface'\n];\n\nexport const DEFAULT_MODELS: Record<ApiProvider, string> = {\n  openai: 'gpt-4o',\n  claude: 'claude-3-5-sonnet-20241022',\n  google: 'gemini-pro',\n  azure: 'gpt-4',\n  cohere: 'command-r-plus',\n  huggingface: 'meta-llama/Llama-2-70b-chat-hf'\n};\n\nexport const PROVIDER_CAPABILITIES: Record<ApiProvider, ProviderCapabilities> = {\n  openai: {\n    chat: true,\n    images: true,\n    embeddings: true,\n    tools: true,\n    streaming: true,\n    vision: true,\n    maxTokens: 128000,\n    costPer1kTokens: { input: 0.01, output: 0.03 }\n  },\n  claude: {\n    chat: true,\n    images: false,\n    embeddings: false,\n    tools: true,\n    streaming: true,\n    vision: true,\n    maxTokens: 200000,\n    costPer1kTokens: { input: 0.003, output: 0.015 }\n  },\n  google: {\n    chat: true,\n    images: false,\n    embeddings: true,\n    tools: true,\n    streaming: true,\n    vision: true,\n    maxTokens: 1000000,\n    costPer1kTokens: { input: 0.000125, output: 0.000375 }\n  },\n  azure: {\n    chat: true,\n    images: true,\n    embeddings: true,\n    tools: true,\n    streaming: true,\n    vision: true,\n    maxTokens: 128000,\n    costPer1kTokens: { input: 0.01, output: 0.03 }\n  },\n  cohere: {\n    chat: true,\n    images: false,\n    embeddings: true,\n    tools: true,\n    streaming: true,\n    vision: false,\n    maxTokens: 128000,\n    costPer1kTokens: { input: 0.0015, output: 0.002 }\n  },\n  huggingface: {\n    chat: true,\n    images: false,\n    embeddings: true,\n    tools: false,\n    streaming: true,\n    vision: false,\n    maxTokens: 4096,\n    costPer1kTokens: { input: 0.0002, output: 0.0002 }\n  }\n};"]}